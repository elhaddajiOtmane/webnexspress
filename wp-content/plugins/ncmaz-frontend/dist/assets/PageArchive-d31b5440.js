import{j as e,a as o,N as r,r as G}from"./main-01589982.js";import{N as B}from"./NcModal-42d0aa76.js";import{G as q,a as z,P as D}from"./queryGraphql-58383481.js";import{B as O}from"./ButtonPrimary-7b9ce8b4.js";import{C as H,a as K}from"./CardCategory1Skeleton-a1084ba9.js";import{D as b}from"./DataStatementBlockV2-5007f6a0.js";import{b as v,c as W}from"./useQuery-2326dd90.js";import{u as U}from"./useLazyQuery-f7f1f4cb.js";import{T as X}from"./Tag-82d8b167.js";import{S as Y}from"./index-0c588460.js";import{A as Z,a as J,S as M}from"./ArchiveGridPost-cd33a26d.js";import{N as R}from"./NcImage-befadaec.js";const ee=()=>{const S=v`
    ${q}
  `,[l,{loading:_,error:a,data:n,fetchMore:m}]=U(S,{notifyOnNetworkStatusChange:!0}),C=()=>{n!=null&&n.categories.edges.length||l({variables:{first:20,orderby:null,hideEmpty:!0}})},h=(i,{fetchMoreResult:s})=>{var x,c,p;return(x=s==null?void 0:s.categories)!=null&&x.edges.length?{...s,categories:{...s.categories,edges:[...(c=i==null?void 0:i.categories)==null?void 0:c.edges,...(p=s==null?void 0:s.categories)==null?void 0:p.edges]}}:i},T=()=>{m&&m({variables:{first:20,after:(n==null?void 0:n.categories.pageInfo.endCursor)||null},updateQuery:h})},g=_&&!(n!=null&&n.categories.edges.length),N=()=>o("div",{className:"flex flex-col items-center space-y-8",children:[e(b,{data:(n==null?void 0:n.categories.edges)||[],isSkeleton:g,error:a}),o("div",{className:"w-full grid gap-6 grid-cols-1 sm:grid-cols-2 sm:py-2 md:gap-8 md:grid-cols-3 lg:grid-cols-4 xl:md:grid-cols-5",children:[g&&Array.from("iiiiiiiiiiiiiiiiiiii").map((i,s)=>e(H,{},s)),((n==null?void 0:n.categories.edges)||[]).map(i=>e(K,{taxonomy:i.node,size:"normal"},i.node.id))]}),(n==null?void 0:n.categories.pageInfo.hasNextPage)&&e(O,{loading:_,onClick:T,children:r.showMeMore})]});return e("div",{className:"nc-ModalCats",children:e(B,{onOpenModal:C,triggerText:o("span",{children:[e("span",{className:"hidden sm:inline",children:r.otherCategories})," ",e("span",{className:"inline sm:hidden",children:r.categories})]}),modalTitle:r.discoverOtherCategories,renderContent:N})})},se=()=>{const S=v`
    ${z}
  `,[l,{error:_,data:a,fetchMore:n,loading:m}]=U(S,{notifyOnNetworkStatusChange:!0}),C=()=>{a!=null&&a.tags.edges.length||l({variables:{first:30}})},h=(i,{fetchMoreResult:s})=>{var x,c,p;return(x=s==null?void 0:s.tags)!=null&&x.edges.length?{...s,tags:{...s.tags,edges:[...(c=i==null?void 0:i.tags)==null?void 0:c.edges,...(p=s==null?void 0:s.tags)==null?void 0:p.edges]}}:i},T=()=>{n&&n({variables:{first:30,after:(a==null?void 0:a.tags.pageInfo.endCursor)||null},updateQuery:h})},g=m&&!(a!=null&&a.tags.edges.length),N=()=>o("div",{className:"flex flex-col items-center space-y-5",children:[e(b,{data:(a==null?void 0:a.tags.edges)||[],isSkeleton:g,error:_}),o("div",{className:"w-full flex flex-wrap dark:text-neutral-200",children:[g&&Array.from("iiiiiiiiiiiiiiiiiiiiiiiiiiii").map((i,s)=>e(Y,{height:"38px",className:"mr-2.5 mb-2",width:"90px"},s)),((a==null?void 0:a.tags.edges)||[]).map(i=>e(X,{tag:i.node,className:"mr-2 mb-2"},i.node.id))]}),(a==null?void 0:a.tags.pageInfo.hasNextPage)&&e(O,{loading:m,onClick:T,children:r.showMeMore})]});return e("div",{className:"nc-ModalTags",children:e(B,{contentExtraClass:"max-w-screen-md",onOpenModal:C,triggerText:o("span",{children:[e("span",{className:"hidden sm:inline",children:r.otherTags})," ",e("span",{className:"inline sm:hidden",children:r.tags})]}),modalTitle:r.discoverOtherTags,renderContent:N})})},V=window.frontendObject.isActivePluginFavorites?[{name:r.mostRecent,value:"DATE"},{name:r.mostLiked,value:"FAVORITES_COUNT"},{name:r.mostDiscussed,value:"COMMENT_COUNT"},{name:r.mostViewed,value:"VIEWS_COUNT"}]:[{name:r.mostRecent,value:"DATE"},{name:r.mostDiscussed,value:"COMMENT_COUNT"},{name:r.mostViewed,value:"VIEWS_COUNT"}],j=V,ne=({className:E="",termId:S,termData:l,isCategory:_,isFormatAudio:a,isFormatVideo:n,isTag:m,sectionCategoriesTrending:C})=>{var u,w,I,k;const h=((u=frontendObject.allSettings)==null?void 0:u.readingSettingsPostsPerPage)||20,[T,g]=G.useState(j[0].value);G.useEffect(()=>{const d=window.location.search,f=new URLSearchParams(d).get("orderBy");!f||!["COMMENT_COUNT","DATE","FAVORITES_COUNT","VIEWS_COUNT"].includes(f)||g(f||"DATE")},[]);let N={};m?N={order:"DESC",field:T,tagIn:[S],first:h}:N={order:"DESC",field:T,categoryIn:[S],first:h};const i=v`
    ${D}
  `,{loading:s,error:x,data:c,fetchMore:p}=W(i,{notifyOnNetworkStatusChange:!0,variables:N}),y=(c==null?void 0:c.posts.edges)||[],F=(d,{fetchMoreResult:t})=>{var f,P,L;return(f=t==null?void 0:t.posts)!=null&&f.edges.length?{...t,posts:{...t.posts,edges:[...(P=d==null?void 0:d.posts)==null?void 0:P.edges,...(L=t==null?void 0:t.posts)==null?void 0:L.edges]}}:d},Q=d=>{g(d.value);let t=new URLSearchParams(window.location.search);t.set("orderBy",d.value),history.replaceState(null,"",`?${t.toString()}`)},$=()=>{if(!p)return;const d=y.map(t=>t.node.postId);p({variables:{first:h,notIn:d},updateQuery:F})},A=s&&!y.length;return o("div",{className:`nc-PageArchive mt-4 sm:mt-7 ${E}`,"data-nc-id":"PageArchive",children:[e("div",{className:"w-full px-2 xl:max-w-screen-2xl mx-auto",children:o("div",{className:"rounded-3xl relative aspect-w-16 aspect-h-12 sm:aspect-h-8 lg:aspect-h-7 xl:aspect-h-5 overflow-hidden ",children:[e(R,{containerClassName:"absolute inset-0",src:((w=l.ncTaxonomyMeta.featuredImage)==null?void 0:w.sourceUrl)||frontendObject.archivePageCoverImgDefault||"https://images.pexels.com/photos/2662116/pexels-photo-2662116.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",srcSet:(I=l.ncTaxonomyMeta.featuredImage)==null?void 0:I.srcSet,imageSizes:"_1536X1536",className:"object-cover w-full h-full"}),o("div",{className:"absolute inset-0 bg-black text-white bg-opacity-30 flex flex-col items-center justify-center text-center",children:[o("h1",{className:"inline-block align-middle text-4xl sm:text-5xl font-semibold md:text-7xl",children:[m?"#":"",l.name]}),l.description&&e("div",{className:"hidden md:block max-w-xl text-sm mt-3 text-neutral-100",dangerouslySetInnerHTML:{__html:l.description}}),e("span",{className:"block mt-2 sm:mt-4 text-neutral-200",children:`${l.count||0} ${r.articles}`})]})]})}),l.description&&e("div",{className:"container block md:hidden max-w-xl text-sm mt-4",dangerouslySetInnerHTML:{__html:l.description}}),o("div",{className:"container py-16 lg:pb-24 space-y-16 lg:space-y-24",children:[o("div",{children:[o("div",{className:"flex flex-col sm:items-center sm:justify-between sm:flex-row",children:[o("div",{className:"flex space-x-2.5",children:[e(ee,{}),e(se,{})]}),e("div",{className:"block my-4 border-b w-full border-neutral-100 sm:hidden"}),e("div",{className:"flex justify-end",children:e(Z,{onChangeSelect:Q,lists:j,defaultValue:T})})]}),e(b,{className:"my-10",data:y,error:x,isSkeleton:A}),e(J,{is_skeleton:A,posts:y}),((k=c==null?void 0:c.posts.pageInfo)==null?void 0:k.hasNextPage)&&e("div",{className:"flex justify-center mt-8 sm:mt-10 lg:mt-14",children:e(O,{onClick:$,loading:s,children:r.showMeMore})})]}),C.enable&&e(M,{...C,parentId:Number(S),isCategory:!!_})]})]})},he=Object.freeze(Object.defineProperty({__proto__:null,ARCHIVE_PAGE_FILTERS:V,default:ne},Symbol.toStringTag,{value:"Module"}));export{V as A,ee as M,he as P,se as a};
