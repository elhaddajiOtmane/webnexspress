import{r as A,R as W,y as xf,c as kf,N as X,j as w,a as z,a4 as Sf,a5 as Fr,F as Xn,z as Af,B as Ef}from"./main-01589982.js";import{B as hr}from"./ButtonPrimary-7b9ce8b4.js";import{C as Mf}from"./CircleLoading-5a5ec4b1.js";import{b as Js}from"./useQuery-2326dd90.js";import{u as qu}from"./useLazyQuery-f7f1f4cb.js";import{B as Kr}from"./ButtonSecondary-a2b42169.js";import{N as wo}from"./NcModal-42d0aa76.js";import{D as Tf}from"./DataStatementBlockV2-5007f6a0.js";import{G as Of}from"./queryGraphql-58383481.js";import{N as Zl}from"./NcImage-befadaec.js";import{S as Nf}from"./index-0c588460.js";import{L as qe,I as Ys,T as Ff,u as If}from"./Textarea-4502000e.js";import{I as pn}from"./Input-8cf5b968.js";import{C as et,y as je,T as Bf,n as Xs,E as Gu,s as Ir,o as oe,l as Pf,c as Rf,u as Xt,d as Pi,$ as _e,k as bt,S as Qn,e as Ju,I as Ge,L as ke,v as Lf,F as zf,q as fe,r as Qs,h as Yu,a as Do,p as Hf,z as $f,N as gi,t as Vf,A as ea}from"./use-owner-4bb5aead.js";import{s as Zs,Z as Wt}from"./menu-8d10a083.js";import{E as jf,n as Xu,h as Zn,s as qr,a as Ln,F as _f,k as Wf}from"./dialog-c077491e.js";import{T as Uf,p as Kf,M as yi,C as qf,u as Gf}from"./useWindowSize-e7f502a5.js";import{J as Ri}from"./transition-c5ae4969.js";import{B as Jf}from"./Button-d1fff97b.js";var Yf=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Yf||{}),Xf=(n=>(n[n.TogglePopover=0]="TogglePopover",n[n.ClosePopover=1]="ClosePopover",n[n.SetButton=2]="SetButton",n[n.SetButtonId=3]="SetButtonId",n[n.SetPanel=4]="SetPanel",n[n.SetPanelId=5]="SetPanelId",n))(Xf||{});let Qf={[0]:n=>({...n,popoverState:Xt(n.popoverState,{[0]:1,[1]:0})}),[1](n){return n.popoverState===1?n:{...n,popoverState:1}},[2](n,e){return n.button===e.button?n:{...n,button:e.button}},[3](n,e){return n.buttonId===e.buttonId?n:{...n,buttonId:e.buttonId}},[4](n,e){return n.panel===e.panel?n:{...n,panel:e.panel}},[5](n,e){return n.panelId===e.panelId?n:{...n,panelId:e.panelId}}},el=A.createContext(null);el.displayName="PopoverContext";function Co(n){let e=A.useContext(el);if(e===null){let t=new Error(`<${n} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Co),t}return e}let tl=A.createContext(null);tl.displayName="PopoverAPIContext";function nl(n){let e=A.useContext(tl);if(e===null){let t=new Error(`<${n} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,nl),t}return e}let rl=A.createContext(null);rl.displayName="PopoverGroupContext";function Qu(){return A.useContext(rl)}let il=A.createContext(null);il.displayName="PopoverPanelContext";function Zf(){return A.useContext(il)}function eh(n,e){return Xt(e.type,Qf,n,e)}let th="div",nh=et(function(n,e){var t;let r=A.useRef(null),i=je(e,Bf(S=>{r.current=S})),o=A.useReducer(eh,{popoverState:1,buttons:[],button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:A.createRef(),afterPanelSentinel:A.createRef()}),[{popoverState:s,button:l,buttonId:a,panel:u,panelId:c,beforePanelSentinel:d,afterPanelSentinel:f},h]=o,p=Xs((t=r.current)!=null?t:l),m=A.useMemo(()=>{if(!l||!u)return!1;for(let ne of document.querySelectorAll("body > *"))if(Number(ne==null?void 0:ne.contains(l))^Number(ne==null?void 0:ne.contains(u)))return!0;let S=Gu(),B=S.indexOf(l),N=(B+S.length-1)%S.length,U=(B+1)%S.length,q=S[N],G=S[U];return!u.contains(q)&&!u.contains(G)},[l,u]),g=Ir(a),v=Ir(c),b=A.useMemo(()=>({buttonId:g,panelId:v,close:()=>h({type:1})}),[g,v,h]),C=Qu(),y=C==null?void 0:C.registerPopover,k=oe(()=>{var S;return(S=C==null?void 0:C.isFocusWithinPopoverGroup())!=null?S:(p==null?void 0:p.activeElement)&&((l==null?void 0:l.contains(p.activeElement))||(u==null?void 0:u.contains(p.activeElement)))});A.useEffect(()=>y==null?void 0:y(b),[y,b]),jf(p==null?void 0:p.defaultView,"focus",S=>{var B,N,U,q;s===0&&(k()||!l||!u||S.target!==window&&((N=(B=d.current)==null?void 0:B.contains)!=null&&N.call(B,S.target)||(q=(U=f.current)==null?void 0:U.contains)!=null&&q.call(U,S.target)||h({type:1})))},!0),Pf([l,u],(S,B)=>{h({type:1}),Lf(B,zf.Loose)||(S.preventDefault(),l==null||l.focus())},s===0);let D=oe(S=>{h({type:1});let B=(()=>S?S instanceof HTMLElement?S:"current"in S&&S.current instanceof HTMLElement?S.current:l:l)();B==null||B.focus()}),T=A.useMemo(()=>({close:D,isPortalled:m}),[D,m]),E=A.useMemo(()=>({open:s===0,close:D}),[s,D]),O=n,L={ref:i};return W.createElement(el.Provider,{value:o},W.createElement(tl.Provider,{value:T},W.createElement(Rf,{value:Xt(s,{[0]:Pi.Open,[1]:Pi.Closed})},_e({ourProps:L,theirProps:O,slot:E,defaultTag:th,name:"Popover"}))))}),rh="button",ih=et(function(n,e){let t=bt(),{id:r=`headlessui-popover-button-${t}`,...i}=n,[o,s]=Co("Popover.Button"),{isPortalled:l}=nl("Popover.Button"),a=A.useRef(null),u=`headlessui-focus-sentinel-${bt()}`,c=Qu(),d=c==null?void 0:c.closeOthers,f=Zf(),h=f===null?!1:f===o.panelId;A.useEffect(()=>{if(!h)return s({type:3,buttonId:r}),()=>{s({type:3,buttonId:null})}},[r,s]);let p=je(a,e,h?null:S=>{if(S)o.buttons.push(r);else{let B=o.buttons.indexOf(r);B!==-1&&o.buttons.splice(B,1)}o.buttons.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),S&&s({type:2,button:S})}),m=je(a,e),g=Xs(a),v=oe(S=>{var B,N,U;if(h){if(o.popoverState===1)return;switch(S.key){case fe.Space:case fe.Enter:S.preventDefault(),(N=(B=S.target).click)==null||N.call(B),s({type:1}),(U=o.button)==null||U.focus();break}}else switch(S.key){case fe.Space:case fe.Enter:S.preventDefault(),S.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),s({type:0});break;case fe.Escape:if(o.popoverState!==0)return d==null?void 0:d(o.buttonId);if(!a.current||g!=null&&g.activeElement&&!a.current.contains(g.activeElement))return;S.preventDefault(),S.stopPropagation(),s({type:1});break}}),b=oe(S=>{h||S.key===fe.Space&&S.preventDefault()}),C=oe(S=>{var B,N;Qs(S.currentTarget)||n.disabled||(h?(s({type:1}),(B=o.button)==null||B.focus()):(S.preventDefault(),S.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),s({type:0}),(N=o.button)==null||N.focus()))}),y=oe(S=>{S.preventDefault(),S.stopPropagation()}),k=o.popoverState===0,D=A.useMemo(()=>({open:k}),[k]),T=Zs(n,a),E=h?{ref:m,type:T,onKeyDown:v,onClick:C}:{ref:p,id:o.buttonId,type:T,"aria-expanded":n.disabled?void 0:o.popoverState===0,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:v,onKeyUp:b,onClick:C,onMouseDown:y},O=Xu(),L=oe(()=>{let S=o.panel;if(!S)return;function B(){Xt(O.current,{[Ln.Forwards]:()=>Ge(S,ke.First),[Ln.Backwards]:()=>Ge(S,ke.Last)})}B()});return W.createElement(W.Fragment,null,_e({ourProps:E,theirProps:i,slot:D,defaultTag:rh,name:"Popover.Button"}),k&&!h&&l&&W.createElement(Zn,{id:u,features:qr.Focusable,as:"button",type:"button",onFocus:L}))}),oh="div",sh=Qn.RenderStrategy|Qn.Static,lh=et(function(n,e){let t=bt(),{id:r=`headlessui-popover-overlay-${t}`,...i}=n,[{popoverState:o},s]=Co("Popover.Overlay"),l=je(e),a=Ju(),u=(()=>a!==null?a===Pi.Open:o===0)(),c=oe(f=>{if(Qs(f.currentTarget))return f.preventDefault();s({type:1})}),d=A.useMemo(()=>({open:o===0}),[o]);return _e({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:c},theirProps:i,slot:d,defaultTag:oh,features:sh,visible:u,name:"Popover.Overlay"})}),ah="div",uh=Qn.RenderStrategy|Qn.Static,ch=et(function(n,e){let t=bt(),{id:r=`headlessui-popover-panel-${t}`,focus:i=!1,...o}=n,[s,l]=Co("Popover.Panel"),{close:a,isPortalled:u}=nl("Popover.Panel"),c=`headlessui-focus-sentinel-before-${bt()}`,d=`headlessui-focus-sentinel-after-${bt()}`,f=A.useRef(null),h=je(f,e,T=>{l({type:4,panel:T})}),p=Xs(f);A.useEffect(()=>(l({type:5,panelId:r}),()=>{l({type:5,panelId:null})}),[r,l]);let m=Ju(),g=(()=>m!==null?m===Pi.Open:s.popoverState===0)(),v=oe(T=>{var E;switch(T.key){case fe.Escape:if(s.popoverState!==0||!f.current||p!=null&&p.activeElement&&!f.current.contains(p.activeElement))return;T.preventDefault(),T.stopPropagation(),l({type:1}),(E=s.button)==null||E.focus();break}});A.useEffect(()=>{var T;n.static||s.popoverState===1&&((T=n.unmount)==null||T)&&l({type:4,panel:null})},[s.popoverState,n.unmount,n.static,l]),A.useEffect(()=>{if(!i||s.popoverState!==0||!f.current)return;let T=p==null?void 0:p.activeElement;f.current.contains(T)||Ge(f.current,ke.First)},[i,f,s.popoverState]);let b=A.useMemo(()=>({open:s.popoverState===0,close:a}),[s,a]),C={ref:h,id:s.panelId,onKeyDown:v,onBlur:i&&s.popoverState===0?T=>{var E,O,L,S,B;let N=T.relatedTarget;!N||!f.current||(E=f.current)!=null&&E.contains(N)||(l({type:1}),((L=(O=s.beforePanelSentinel.current)==null?void 0:O.contains)!=null&&L.call(O,N)||(B=(S=s.afterPanelSentinel.current)==null?void 0:S.contains)!=null&&B.call(S,N))&&N.focus({preventScroll:!0}))}:void 0,tabIndex:-1},y=Xu(),k=oe(()=>{let T=f.current;if(!T)return;function E(){Xt(y.current,{[Ln.Forwards]:()=>{Ge(T,ke.First)},[Ln.Backwards]:()=>{var O;(O=s.button)==null||O.focus({preventScroll:!0})}})}E()}),D=oe(()=>{let T=f.current;if(!T)return;function E(){Xt(y.current,{[Ln.Forwards]:()=>{var O,L,S;if(!s.button)return;let B=Gu(),N=B.indexOf(s.button),U=B.slice(0,N+1),q=[...B.slice(N+1),...U];for(let G of q.slice())if((L=(O=G==null?void 0:G.id)==null?void 0:O.startsWith)!=null&&L.call(O,"headlessui-focus-sentinel-")||(S=s.panel)!=null&&S.contains(G)){let ne=q.indexOf(G);ne!==-1&&q.splice(ne,1)}Ge(q,ke.First,{sorted:!1})},[Ln.Backwards]:()=>Ge(T,ke.Last)})}E()});return W.createElement(il.Provider,{value:s.panelId},g&&u&&W.createElement(Zn,{id:c,ref:s.beforePanelSentinel,features:qr.Focusable,as:"button",type:"button",onFocus:k}),_e({ourProps:C,theirProps:o,slot:b,defaultTag:ah,features:uh,visible:g,name:"Popover.Panel"}),g&&u&&W.createElement(Zn,{id:d,ref:s.afterPanelSentinel,features:qr.Focusable,as:"button",type:"button",onFocus:D}))}),dh="div",fh=et(function(n,e){let t=A.useRef(null),r=je(t,e),[i,o]=A.useState([]),s=oe(p=>{o(m=>{let g=m.indexOf(p);if(g!==-1){let v=m.slice();return v.splice(g,1),v}return m})}),l=oe(p=>(o(m=>[...m,p]),()=>s(p))),a=oe(()=>{var p;let m=Yu(t);if(!m)return!1;let g=m.activeElement;return(p=t.current)!=null&&p.contains(g)?!0:i.some(v=>{var b,C;return((b=m.getElementById(v.buttonId.current))==null?void 0:b.contains(g))||((C=m.getElementById(v.panelId.current))==null?void 0:C.contains(g))})}),u=oe(p=>{for(let m of i)m.buttonId.current!==p&&m.close()}),c=A.useMemo(()=>({registerPopover:l,unregisterPopover:s,isFocusWithinPopoverGroup:a,closeOthers:u}),[l,s,a,u]),d=A.useMemo(()=>({}),[]),f=n,h={ref:r};return W.createElement(rl.Provider,{value:c},_e({ourProps:h,theirProps:f,slot:d,defaultTag:dh,name:"Popover.Group"}))}),$o=Object.assign(nh,{Button:ih,Overlay:lh,Panel:ch,Group:fh}),Zu=A.createContext(null);function ec(){let n=A.useContext(Zu);if(n===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ec),e}return n}function hh(){let[n,e]=A.useState([]);return[n.length>0?n.join(" "):void 0,A.useMemo(()=>function(t){let r=oe(o=>(e(s=>[...s,o]),()=>e(s=>{let l=s.slice(),a=l.indexOf(o);return a!==-1&&l.splice(a,1),l}))),i=A.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props}),[r,t.slot,t.name,t.props]);return W.createElement(Zu.Provider,{value:i},t.children)},[e])]}let ph="label",mh=et(function(n,e){let t=bt(),{id:r=`headlessui-label-${t}`,passive:i=!1,...o}=n,s=ec(),l=je(e);Do(()=>s.register(r),[r,s.register]);let a={ref:l,...s.props,id:r};return i&&("onClick"in a&&delete a.onClick,"onClick"in o&&delete o.onClick),_e({ourProps:a,theirProps:o,slot:s.slot||{},defaultTag:ph,name:s.name||"Label"})}),ol=A.createContext(null);ol.displayName="GroupContext";let gh=A.Fragment;function yh(n){let[e,t]=A.useState(null),[r,i]=hh(),[o,s]=Wf(),l=A.useMemo(()=>({switch:e,setSwitch:t,labelledby:r,describedby:o}),[e,t,r,o]),a={},u=n;return W.createElement(s,{name:"Switch.Description"},W.createElement(i,{name:"Switch.Label",props:{onClick(){!e||(e.click(),e.focus({preventScroll:!0}))}}},W.createElement(ol.Provider,{value:l},_e({ourProps:a,theirProps:u,defaultTag:gh,name:"Switch.Group"}))))}let vh="button",bh=et(function(n,e){let t=bt(),{id:r=`headlessui-switch-${t}`,checked:i,defaultChecked:o=!1,onChange:s,name:l,value:a,...u}=n,c=A.useContext(ol),d=A.useRef(null),f=je(d,e,c===null?null:c.setSwitch),[h,p]=Uf(i,s,o),m=oe(()=>p==null?void 0:p(!h)),g=oe(D=>{if(Qs(D.currentTarget))return D.preventDefault();D.preventDefault(),m()}),v=oe(D=>{D.key===fe.Space?(D.preventDefault(),m()):D.key===fe.Enter&&Kf(D.currentTarget)}),b=oe(D=>D.preventDefault()),C=A.useMemo(()=>({checked:h}),[h]),y={id:r,ref:f,role:"switch",type:Zs(n,d),tabIndex:0,"aria-checked":h,"aria-labelledby":c==null?void 0:c.labelledby,"aria-describedby":c==null?void 0:c.describedby,onClick:g,onKeyUp:v,onKeyPress:b},k=Hf();return A.useEffect(()=>{var D;let T=(D=d.current)==null?void 0:D.closest("form");!T||o!==void 0&&k.addEventListener(T,"reset",()=>{p(o)})},[d,p]),W.createElement(W.Fragment,null,l!=null&&h&&W.createElement(Zn,{features:qr.Hidden,...$f({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:h,name:l,value:a})}),_e({ourProps:y,theirProps:u,slot:C,defaultTag:vh,name:"Switch"}))}),wh=Object.assign(bh,{Group:yh,Label:mh,Description:_f});function Dh({onFocus:n}){let[e,t]=A.useState(!0);return e?W.createElement(Zn,{as:"button",type:"button",features:qr.Focusable,onFocus:r=>{r.preventDefault();let i,o=50;function s(){if(o--<=0){i&&cancelAnimationFrame(i);return}if(n()){t(!1),cancelAnimationFrame(i);return}i=requestAnimationFrame(s)}i=requestAnimationFrame(s)}}):null}var Ch=(n=>(n[n.SetSelectedIndex=0]="SetSelectedIndex",n[n.RegisterTab=1]="RegisterTab",n[n.UnregisterTab=2]="UnregisterTab",n[n.RegisterPanel=3]="RegisterPanel",n[n.UnregisterPanel=4]="UnregisterPanel",n))(Ch||{});let xh={[0](n,e){let t=n.tabs.filter(o=>{var s;return!((s=o.current)!=null&&s.hasAttribute("disabled"))});if(e.index<0)return{...n,selectedIndex:n.tabs.indexOf(t[0])};if(e.index>n.tabs.length)return{...n,selectedIndex:n.tabs.indexOf(t[t.length-1])};let r=n.tabs.slice(0,e.index),i=[...n.tabs.slice(e.index),...r].find(o=>t.includes(o));return i?{...n,selectedIndex:n.tabs.indexOf(i)}:n},[1](n,e){var t;if(n.tabs.includes(e.tab))return n;let r=n.tabs[n.selectedIndex],i=ea([...n.tabs,e.tab],s=>s.current),o=(t=i.indexOf(r))!=null?t:n.selectedIndex;return o===-1&&(o=n.selectedIndex),{...n,tabs:i,selectedIndex:o}},[2](n,e){return{...n,tabs:n.tabs.filter(t=>t!==e.tab)}},[3](n,e){return n.panels.includes(e.panel)?n:{...n,panels:ea([...n.panels,e.panel],t=>t.current)}},[4](n,e){return{...n,panels:n.panels.filter(t=>t!==e.panel)}}},sl=A.createContext(null);sl.displayName="TabsSSRContext";function ll(n){let e=A.useContext(sl);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ll),t}return e}let al=A.createContext(null);al.displayName="TabsDataContext";function er(n){let e=A.useContext(al);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,er),t}return e}let ul=A.createContext(null);ul.displayName="TabsActionsContext";function cl(n){let e=A.useContext(ul);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,cl),t}return e}function kh(n,e){return Xt(e.type,xh,n,e)}let Sh=A.Fragment,Ah=et(function(n,e){let{defaultIndex:t=0,vertical:r=!1,manual:i=!1,onChange:o,selectedIndex:s=null,...l}=n;const a=r?"vertical":"horizontal",u=i?"manual":"auto";let c=s!==null,d=je(e),[f,h]=A.useReducer(kh,{selectedIndex:s??t,tabs:[],panels:[]}),p=A.useMemo(()=>({selectedIndex:f.selectedIndex}),[f.selectedIndex]),m=Ir(o||(()=>{})),g=Ir(f.tabs),v=A.useMemo(()=>({orientation:a,activation:u,...f}),[a,u,f]),b=oe(O=>(h({type:1,tab:O}),()=>h({type:2,tab:O}))),C=oe(O=>(h({type:3,panel:O}),()=>h({type:4,panel:O}))),y=oe(O=>{k.current!==O&&m.current(O),c||h({type:0,index:O})}),k=Ir(c?n.selectedIndex:f.selectedIndex),D=A.useMemo(()=>({registerTab:b,registerPanel:C,change:y}),[]);Do(()=>{h({type:0,index:s??t})},[s]);let T=A.useRef({tabs:[],panels:[]}),E={ref:d};return W.createElement(sl.Provider,{value:T},W.createElement(ul.Provider,{value:D},W.createElement(al.Provider,{value:v},v.tabs.length<=0&&W.createElement(Dh,{onFocus:()=>{var O,L;for(let S of g.current)if(((O=S.current)==null?void 0:O.tabIndex)===0)return(L=S.current)==null||L.focus(),!0;return!1}}),_e({ourProps:E,theirProps:l,slot:p,defaultTag:Sh,name:"Tabs"}))))}),Eh="div",Mh=et(function(n,e){let{orientation:t,selectedIndex:r}=er("Tab.List"),i=je(e);return _e({ourProps:{ref:i,role:"tablist","aria-orientation":t},theirProps:n,slot:{selectedIndex:r},defaultTag:Eh,name:"Tabs.List"})}),Th="button",Oh=et(function(n,e){var t,r;let i=bt(),{id:o=`headlessui-tabs-tab-${i}`,...s}=n,{orientation:l,activation:a,selectedIndex:u,tabs:c,panels:d}=er("Tab"),f=cl("Tab"),h=er("Tab"),p=ll("Tab"),m=A.useRef(null),g=je(m,e);Do(()=>f.registerTab(m),[f,m]);let v=p.current.tabs.indexOf(o);v===-1&&(v=p.current.tabs.push(o)-1);let b=c.indexOf(m);b===-1&&(b=v);let C=b===u,y=oe(S=>{var B;let N=S();if(N===gi.Success&&a==="auto"){let U=(B=Yu(m))==null?void 0:B.activeElement,q=h.tabs.findIndex(G=>G.current===U);q!==-1&&f.change(q)}return N}),k=oe(S=>{let B=c.map(N=>N.current).filter(Boolean);if(S.key===fe.Space||S.key===fe.Enter){S.preventDefault(),S.stopPropagation(),f.change(b);return}switch(S.key){case fe.Home:case fe.PageUp:return S.preventDefault(),S.stopPropagation(),y(()=>Ge(B,ke.First));case fe.End:case fe.PageDown:return S.preventDefault(),S.stopPropagation(),y(()=>Ge(B,ke.Last))}if(y(()=>Xt(l,{vertical(){return S.key===fe.ArrowUp?Ge(B,ke.Previous|ke.WrapAround):S.key===fe.ArrowDown?Ge(B,ke.Next|ke.WrapAround):gi.Error},horizontal(){return S.key===fe.ArrowLeft?Ge(B,ke.Previous|ke.WrapAround):S.key===fe.ArrowRight?Ge(B,ke.Next|ke.WrapAround):gi.Error}}))===gi.Success)return S.preventDefault()}),D=A.useRef(!1),T=oe(()=>{var S;D.current||(D.current=!0,(S=m.current)==null||S.focus(),f.change(b),Vf(()=>{D.current=!1}))}),E=oe(S=>{S.preventDefault()}),O=A.useMemo(()=>({selected:C}),[C]),L={ref:g,onKeyDown:k,onMouseDown:E,onClick:T,id:o,role:"tab",type:Zs(n,m),"aria-controls":(r=(t=d[b])==null?void 0:t.current)==null?void 0:r.id,"aria-selected":C,tabIndex:C?0:-1};return _e({ourProps:L,theirProps:s,slot:O,defaultTag:Th,name:"Tabs.Tab"})}),Nh="div",Fh=et(function(n,e){let{selectedIndex:t}=er("Tab.Panels"),r=je(e),i=A.useMemo(()=>({selectedIndex:t}),[t]);return _e({ourProps:{ref:r},theirProps:n,slot:i,defaultTag:Nh,name:"Tabs.Panels"})}),Ih="div",Bh=Qn.RenderStrategy|Qn.Static,Ph=et(function(n,e){var t,r,i,o;let s=bt(),{id:l=`headlessui-tabs-panel-${s}`,...a}=n,{selectedIndex:u,tabs:c,panels:d}=er("Tab.Panel"),f=cl("Tab.Panel"),h=ll("Tab.Panel"),p=A.useRef(null),m=je(p,e);Do(()=>f.registerPanel(p),[f,p]);let g=h.current.panels.indexOf(l);g===-1&&(g=h.current.panels.push(l)-1);let v=d.indexOf(p);v===-1&&(v=g);let b=v===u,C=A.useMemo(()=>({selected:b}),[b]),y={ref:m,id:l,role:"tabpanel","aria-labelledby":(r=(t=c[v])==null?void 0:t.current)==null?void 0:r.id,tabIndex:b?0:-1};return!b&&((i=a.unmount)==null||i)&&!((o=a.static)!=null&&o)?W.createElement(Zn,{as:"span",...y}):_e({ourProps:y,theirProps:a,slot:C,defaultTag:Ih,features:Bh,visible:b,name:"Tabs.Panel"})}),Dr=Object.assign(Oh,{Group:Ah,List:Mh,Panels:Fh,Panel:Ph});function Rh({title:n,titleId:e,...t},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},t),n?A.createElement("title",{id:e},n):null,A.createElement("path",{fillRule:"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const Lh=A.forwardRef(Rh),zh=Lh;function we(n){this.content=n}we.prototype={constructor:we,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new we(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new we(t)},addToStart:function(n,e){return new we([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new we(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new we(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=we.from(n),n.size?new we(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=we.from(n),n.size?new we(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=we.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};we.from=function(n){if(n instanceof we)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new we(e)};function tc(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=tc(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function nc(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){t-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:t,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(s.content.size||l.content.size){let u=nc(s.content,l.content,t-1,r-1);if(u)return u}t-=a,r-=a}}class M{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,l=0;l<t;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(l,a)=>{l.isText?(o+=l.text.slice(Math.max(e,a)-a,t-a),s=!r):l.isLeaf?(i?o+=typeof i=="function"?i(l):i:l.type.spec.leafText&&(o+=l.type.spec.leafText(l)),s=!r):!s&&l.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new M(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),r.push(l),i+=l.nodeSize),s=a}return new M(r,i)}cutByIndex(e,t){return e==t?M.empty:e==0&&t==this.content.length?this:new M(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new M(i,o)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return tc(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return nc(this,e,t,r)}findIndex(e,t=-1){if(e==0)return vi(0,e);if(e==this.size)return vi(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?vi(r+1,s):vi(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return M.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new M(t||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Vo={index:0,offset:0};function vi(n,e){return Vo.index=n,Vo.offset=e,Vo}function Li(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Li(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Li(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ee=class{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Li(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ee.none;if(e instanceof ee)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};ee.none=[];class zi extends Error{}class I{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=ic(this.content,e+this.openStart,t);return r&&new I(r,this.openStart,this.openEnd)}removeBetween(e,t){return new I(rc(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return I.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new I(M.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new I(e,r,i)}}I.empty=new I(M.empty,0,0);function rc(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:l}=n.findIndex(t);if(i==e||o.isText){if(l!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(rc(o.content,e-i-1,t-i-1)))}function ic(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=ic(s.content,e-o-1,t);return l&&n.replaceChild(i,s.copy(l))}function Hh(n,e,t){if(t.openStart>n.depth)throw new zi("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new zi("Inconsistent open depths");return oc(n,e,t,0)}function oc(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=oc(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,l=s.content;return gn(s,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=$h(t,n);return gn(o,lc(n,s,l,e,r))}else return gn(o,Hi(n,e,r))}function sc(n,e){if(!e.type.compatibleContent(n.type))throw new zi("Cannot join "+e.type.name+" onto "+n.type.name)}function vs(n,e,t){let r=n.node(t);return sc(r,e.node(t)),r}function mn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Br(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(mn(n.nodeAfter,r),o++));for(let l=o;l<s;l++)mn(i.child(l),r);e&&e.depth==t&&e.textOffset&&mn(e.nodeBefore,r)}function gn(n,e){return n.type.checkContent(e),n.copy(e)}function lc(n,e,t,r,i){let o=n.depth>i&&vs(n,e,i+1),s=r.depth>i&&vs(t,r,i+1),l=[];return Br(null,n,i,l),o&&s&&e.index(i)==t.index(i)?(sc(o,s),mn(gn(o,lc(n,e,t,r,i+1)),l)):(o&&mn(gn(o,Hi(n,e,i+1)),l),Br(e,t,i,l),s&&mn(gn(s,Hi(t,r,i+1)),l)),Br(r,null,i,l),new M(l)}function Hi(n,e,t){let r=[];if(Br(null,n,t,r),n.depth>t){let i=vs(n,e,t+1);mn(gn(i,Hi(n,e,t+1)),r)}return Br(e,null,t,r),new M(r)}function $h(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(M.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Gr{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ee.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new $i(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new Gr(t,r,o)}static resolveCached(e,t){for(let i=0;i<jo.length;i++){let o=jo[i];if(o.pos==t&&o.doc==e)return o}let r=jo[_o]=Gr.resolve(e,t);return _o=(_o+1)%Vh,r}}let jo=[],_o=0,Vh=12;class $i{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const jh=Object.create(null);let Ft=class{constructor(e,t,r,i=ee.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||M.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Li(this.attrs,t||e.defaultAttrs||jh)&&ee.sameSet(this.marks,r||ee.none)}copy(e=null){return e==this.content?this:new Ft(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ft(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return I.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new I(u,i.depth-s,o.depth-s)}replace(e,t,r){return Hh(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Gr.resolveCached(this,e)}resolveNoCache(e){return Gr.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ac(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=M.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ee.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!ee.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=M.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};Ft.prototype.text=void 0;class Vi extends Ft{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ac(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vi(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vi(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ac(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class wn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new _h(e,t);if(r.next==null)return wn.empty;let i=uc(r);r.next&&r.err("Unexpected trailing text");let o=Yh(Jh(i));return Xh(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!t||a.validEnd))return M.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}wn.empty=new wn(!0);class _h{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function uc(n){let e=[];do e.push(Wh(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Wh(n){let e=[];do e.push(Uh(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Uh(n){let e=Gh(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Kh(n,e);else break;return e}function ta(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Kh(n,e){let t=ta(n),r=t;return n.eat(",")&&(n.next!="}"?r=ta(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function qh(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Gh(n){if(n.eat("(")){let e=uc(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=qh(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Jh(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=t())}else if(s.type=="star"){let a=t();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=t();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=t();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=t();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function cc(n,e){return e-n}function na(n,e){let t=[];return r(e),t.sort(cc);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&t.indexOf(a)==-1&&r(a)}}}function Yh(n){let e=Object.create(null);return t(na(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);na(n,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new wn(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(cc);o.next.push({type:i[s][0],next:e[l.join(",")]||t(l)})}return o}}function Xh(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function dc(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function fc(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function hc(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new Qh(n[t]);return e}let bs=class{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=hc(r.attrs),this.defaultAttrs=dc(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==wn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:fc(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ft(this,this.computeAttrs(e),M.from(t),ee.setFrom(r))}createChecked(e=null,t,r){return t=M.from(t),this.checkContent(t),new Ft(this,this.computeAttrs(e),t,ee.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=M.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(M.empty,!0);return o?new Ft(this,e,t.append(o),ee.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ee.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new bs(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Qh{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class xo{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=hc(i.attrs),this.excluded=null;let o=dc(this.attrs);this.instance=o?new ee(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ee(this,fc(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new xo(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Zh{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=we.from(e.nodes),t.marks=we.from(e.marks||{}),this.nodes=bs.compile(this.spec.nodes,this),this.marks=xo.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;o.contentMatch=r[s]||(r[s]=wn.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=l=="_"?null:l?ra(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:ra(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof bs){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Vi(r,r.defaultAttrs,e,ee.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Ft.fromJSON(this,e)}markFromJSON(e){return ee.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ra(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let l in n.marks){let a=n.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class tr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new oa(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new oa(this,t,!0);return r.addAll(e,t.from,t.to),I.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(np(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=sa(s)),s.mark=i})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=sa(s)),s.node=i})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new tr(e,tr.schemaRules(e)))}}const pc={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ep={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mc={ol:!0,ul:!0},ji=1,_i=2,Pr=4;function ia(n,e,t){return e!=null?(e?ji:0)|(e==="full"?_i:0):n&&n.whitespace=="pre"?ji|_i:t&~Pr}class bi{constructor(e,t,r,i,o,s,l){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=l,this.content=[],this.activeMarks=ee.none,this.stashMarks=[],this.match=s||(l&Pr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(M.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ji)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=M.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):ip(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pc.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class oa{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,s=ia(null,t.preserveWhitespace,0)|(r?Pr:0);i?o=new bi(i.type,i.attrs,ee.none,ee.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new bi(null,null,ee.none,ee.none,!0,null,s):o=new bi(e.schema.topNodeType,null,ee.none,ee.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style"),r=t?this.readStyles(rp(t)):null,i=this.top;if(r!=null)for(let o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(e),r!=null)for(let o=0;o<r.length;o++)this.removePendingMark(r[o],i)}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&_i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&ji)r.options&_i?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;mc.hasOwnProperty(r)&&this.parser.normalizeLists&&tp(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(o?o.ignore:ep.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,l=this.top,a=this.needsBlock;if(pc.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),s=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),s&&this.sync(l),this.needsBlock=a}else this.addElementByRule(e,o,o.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=ee.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)i=o;else break}return t}addElementByRule(e,t,r){let i,o,s;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):i=this.enter(o,t.attrs||null,t.preserveWhitespace)):(s=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(s));let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a)}i&&this.sync(l)&&this.open--,s&&this.removePendingMark(s,l)}addAll(e,t,r){let i=t||0;for(let o=t?e.childNodes[t]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!t||t.length>s.length)&&(t=s,r=o,!s.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=ia(e,i,o.options);o.options&Pr&&o.content.length==0&&(s|=Pr),this.nodes.push(new bi(e,t,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=op(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==t)break}}}function tp(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mc.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function np(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function rp(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function sa(n){let e={};for(let t in n)e[t]=n[t];return e}function ip(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function op(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class yt{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Wo(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,t);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=yt.renderSpec(Wo(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&yt.renderSpec(Wo(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,l=r?e.createElementNS(r,i):e.createElement(i),a=t[1],u=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){u=2;for(let c in a)if(a[c]!=null){let d=c.indexOf(" ");d>0?l.setAttributeNS(c.slice(0,d),c.slice(d+1),a[c]):l.setAttribute(c,a[c])}}for(let c=u;c<t.length;c++){let d=t[c];if(d===0){if(c<t.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:h}=yt.renderSpec(e,d,r);if(l.appendChild(f),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:l,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=la(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return la(e.marks)}}function la(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Wo(n){return n.document||window.document}const gc=65535,yc=Math.pow(2,16);function sp(n,e){return n+e*yc}function aa(n){return n&gc}function lp(n){return(n-(n&gc))/yc}const vc=1,bc=2,Ti=4,wc=8;class ws{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&wc)>0}get deletedBefore(){return(this.delInfo&(vc|Ti))>0}get deletedAfter(){return(this.delInfo&(bc|Ti))>0}get deletedAcross(){return(this.delInfo&Ti)>0}}class Je{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Je.empty)return Je.empty}recover(e){let t=0,r=aa(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+lp(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:t:t,h=a+i+(f<0?0:c);if(r)return h;let p=e==(t<0?a:d)?null:sp(l/3,e-a),m=e==a?bc:e==d?vc:Ti;return(t<0?e!=a:e!=d)&&(m|=wc),new ws(h,m,p)}i+=c-u}return r?e+i:new ws(e+i,0,null)}touches(e,t){let r=0,i=aa(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+t],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Je(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Je.empty:new Je(e<0?[0,-e,0]:[0,0,e])}}Je.empty=new Je([]);class qn{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new qn(this.maps,this.mirror,e,t)}copy(){return new qn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new qn;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new ws(e,i,null)}}const Uo=Object.create(null);class He{getMap(){return Je.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Uo[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Uo)throw new RangeError("Duplicate use of step JSON ID "+e);return Uo[e]=t,t.prototype.jsonID=e,t}}class he{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new he(e,null)}static fail(e){return new he(null,e)}static fromReplace(e,t,r,i){try{return he.ok(e.replace(t,r,i))}catch(o){if(o instanceof zi)return he.fail(o.message);throw o}}}function dl(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(dl(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return M.fromArray(r)}class Ut extends He{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new I(dl(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return he.fromReplace(e,this.from,this.to,o)}invert(){return new vt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ut(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ut&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ut(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ut(t.from,t.to,e.markFromJSON(t.mark))}}He.jsonID("addMark",Ut);class vt extends He{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new I(dl(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return he.fromReplace(e,this.from,this.to,r)}invert(){return new Ut(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new vt(t.pos,r.pos,this.mark)}merge(e){return e instanceof vt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new vt(t.from,t.to,e.markFromJSON(t.mark))}}He.jsonID("removeMark",vt);class Kt extends He{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return he.fromReplace(e,this.pos,this.pos+1,new I(M.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Kt(this.pos,t.marks[i]);return new Kt(this.pos,this.mark)}}return new nr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Kt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Kt(t.pos,e.markFromJSON(t.mark))}}He.jsonID("addNodeMark",Kt);class nr extends He{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return he.fromReplace(e,this.pos,this.pos+1,new I(M.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Kt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new nr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nr(t.pos,e.markFromJSON(t.mark))}}He.jsonID("removeNodeMark",nr);class Ae extends He{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Ds(e,this.from,this.to)?he.fail("Structure replace would overwrite content"):he.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Je([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ae(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ae(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ae)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?I.empty:new I(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ae(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?I.empty:new I(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ae(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ae(t.from,t.to,I.fromJSON(e,t.slice),!!t.structure)}}He.jsonID("replace",Ae);class ye extends He{constructor(e,t,r,i,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Ds(e,this.from,this.gapFrom)||Ds(e,this.gapTo,this.to)))return he.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return he.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?he.fromReplace(e,this.from,this.to,r):he.fail("Content does not fit in gap")}getMap(){return new Je([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ye(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new ye(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ye(t.from,t.to,t.gapFrom,t.gapTo,I.fromJSON(e,t.slice),t.insert,!!t.structure)}}He.jsonID("replaceAround",ye);function Ds(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function ap(n,e,t,r){let i=[],o=[],s,l;n.doc.nodesBetween(e,t,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+a.nodeSize,t),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[m])?s.to=h:i.push(s=new vt(f,h,d[m])));l&&l.to==f?l.to=h:o.push(l=new Ut(f,h,r))}}),i.forEach(a=>n.step(a)),o.forEach(a=>n.step(a))}function up(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof xo){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,t);for(let c=0;c<a.length;c++){let d=a[c],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=u,f.step=o):i.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>n.step(new vt(s.from,s.to,s.style)))}function cp(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),u=s+a.nodeSize,c=r.matchType(a.type);if(!c)o.push(new Ae(s,u,I.empty));else{r=c;for(let d=0;d<a.marks.length;d++)t.allowsMarkType(a.marks[d].type)||n.step(new vt(s,u,a.marks[d]))}s=u}if(!r.validEnd){let l=r.fillBefore(M.empty,!0);n.replace(s,s,new I(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function dp(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function pr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!dp(i,o,s))break}return null}function fp(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=M.empty,d=0;for(let p=o,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,c=M.from(r.node(p).copy(c)),d++):a--;let f=M.empty,h=0;for(let p=o,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=M.from(i.node(p).copy(f)),h++):u++;n.step(new ye(a,u,s,l,new I(c.append(f),d,h),c.size-d,!0))}function fl(n,e,t=null,r=n){let i=hp(n,e),o=i&&pp(r,e);return o?i.map(ua).concat({type:e,attrs:t}).concat(o.map(ua)):null}function ua(n){return{type:n,attrs:null}}function hp(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function pp(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(t.child(u).type);return!a||!a.validEnd?null:s}function mp(n,e,t){let r=M.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new ye(i,o,i,o,new I(r,0,0),t.length,!0))}function gp(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&yp(n.doc,n.mapping.slice(o).map(l),r)){n.clearIncompatible(n.mapping.slice(o).map(l,1),r);let a=n.mapping.slice(o),u=a.map(l,1),c=a.map(l+s.nodeSize,1);return n.step(new ye(u,c,u+1,c-1,new I(M.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function yp(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function vp(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ye(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new I(M.from(s),0,0),1,!0))}function Gn(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=t-2;u>o;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c]||d;if(p!=d&&(h=h.replaceChild(0,p.type.create(p.attrs))),!d.canReplace(f+1,d.childCount)||!p.type.validContent(h))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function bp(n,e,t=1,r){let i=n.doc.resolve(e),o=M.empty,s=M.empty;for(let l=i.depth,a=i.depth-t,u=t-1;l>a;l--,u--){o=M.from(i.node(l).copy(o));let c=r&&r[u];s=M.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}n.step(new Ae(e,e,new I(o.append(s),t,t),!0))}function tn(n,e){let t=n.resolve(e),r=t.index();return Dc(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Dc(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Cc(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):t>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Dc(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function wp(n,e,t){let r=new Ae(e-t,e+t,I.empty,!0);n.step(r)}function Dp(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function xc(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function hl(n,e,t=e,r=I.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return kc(i,o,r)?new Ae(e,t,r):new Cp(i,o,r).fit()}function kc(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Cp{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=M.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new I(o,s,l);return e>-1?new ye(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Ae(r.pos,i.pos,a):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;t>=0;t--){let r,i=null;t?(i=Ko(this.unplaced.content,t-1).firstChild,r=i.content):r=this.unplaced.content;let o=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:l,match:a}=this.frontier[s],u,c=null;if(e==1&&(o?a.matchType(o.type)||(c=a.fillBefore(M.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:s,parent:i,inject:c};if(e==2&&o&&(u=a.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:s,parent:i,wrap:u};if(i&&a.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ko(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new I(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ko(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new I(Tr(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new I(Tr(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));d=d.matchFragment(i)}let h=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),g=d.matchType(m.type);if(!g)break;u++,(u>1||a==0||m.content.size)&&(d=g,c.push(Sc(m.mark(f.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?h:-1)))}let p=u==l.childCount;p||(h=-1),this.placed=Or(this.placed,t,M.from(c)),this.frontier[t].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<h;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=p?e==0?I.empty:new I(Tr(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new I(Tr(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!qo(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=qo(e,t,i,r,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=qo(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Or(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Or(this.placed,this.depth,M.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(M.empty,!0);t.childCount&&(this.placed=Or(this.placed,this.frontier.length,t))}}function Tr(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Tr(n.firstChild.content,e-1,t)))}function Or(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Or(n.lastChild.content,e-1,t)))}function Ko(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Sc(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Sc(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),n.copy(r)}function qo(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!xp(t,o.content,s)?l:null}function xp(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function kp(n){return n.spec.defining||n.spec.definingForContent}function Sp(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(kc(i,o,r))return n.step(new Ae(e,t,r));let s=Ec(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==h&&s.splice(1,0,-f)}let a=s.indexOf(l),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f].type,p=kp(h);if(p&&i.node(a).type!=h)c=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<s.length;m++){let g=s[(m+a)%s.length],v=!0;g<0&&(v=!1,g=-g);let b=i.node(g-1),C=i.index(g-1);if(b.canReplaceWith(C,C,p.type,p.marks))return n.replace(i.before(g),v?o.after(g):t,new I(Ac(r.content,0,r.openStart,h),h,r.openEnd))}}let d=n.steps.length;for(let f=s.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),t=o.after(h))}}function Ac(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Ac(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(M.empty,!0))}return n}function Ap(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Dp(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new I(M.from(r),0,0))}function Ep(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Ec(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function Ec(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Jn extends He{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return he.fromReplace(e,this.pos,this.pos+1,new I(M.from(i),0,t.isLeaf?0:1))}getMap(){return Je.empty}invert(e){return new Jn(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Jn(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jn(t.pos,t.attr,t.value)}}He.jsonID("attr",Jn);let rr=class extends Error{};rr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};rr.prototype=Object.create(Error.prototype);rr.prototype.constructor=rr;rr.prototype.name="TransformError";class pl{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new qn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new rr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=I.empty){let i=hl(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new I(M.from(r),0,0))}delete(e,t){return this.replace(e,t,I.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Sp(this,e,t,r),this}replaceRangeWith(e,t,r){return Ap(this,e,t,r),this}deleteRange(e,t){return Ep(this,e,t),this}lift(e,t){return fp(this,e,t),this}join(e,t=1){return wp(this,e,t),this}wrap(e,t){return mp(this,e,t),this}setBlockType(e,t=e,r,i=null){return gp(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i=[]){return vp(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Jn(e,t,r)),this}addNodeMark(e,t){return this.step(new Kt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ee)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new nr(e,t)),this}split(e,t=1,r){return bp(this,e,t,r),this}addMark(e,t,r){return ap(this,e,t,r),this}removeMark(e,t,r){return up(this,e,t,r),this}clearIncompatible(e,t,r){return cp(this,e,t,r),this}}const Go=Object.create(null);class V{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Mc(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=I.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?I.empty:t),l==0&&fa(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,t),fa(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new j(e):Bn(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?Bn(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Bn(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new st(e.node(0))}static atStart(e){return Bn(e,e,0,0,1)||new st(e)}static atEnd(e){return Bn(e,e,e.content.size,e.childCount,-1)||new st(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Go[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Go)throw new RangeError("Duplicate use of selection JSON ID "+e);return Go[e]=t,t.prototype.jsonID=e,t}getBookmark(){return j.between(this.$anchor,this.$head).getBookmark()}}V.prototype.visible=!0;class Mc{constructor(e,t){this.$from=e,this.$to=t}}let ca=!1;function da(n){!ca&&!n.parent.inlineContent&&(ca=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class j extends V{constructor(e,t=e){da(e),da(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return V.near(r);let i=e.resolve(t.map(this.anchor));return new j(i.parent.inlineContent?i:r,r)}replace(e,t=I.empty){if(super.replace(e,t),t==I.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof j&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ko(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new j(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=V.findFrom(t,r,!0)||V.findFrom(t,-r,!0);if(o)t=o.$head;else return V.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(V.findFrom(e,-r,!0)||V.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new j(e,t)}}V.jsonID("text",j);class ko{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ko(e.map(this.anchor),e.map(this.head))}resolve(e){return j.between(e.resolve(this.anchor),e.resolve(this.head))}}class $ extends V{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?V.near(o):new $(o)}content(){return new I(M.from(this.node),0,0)}eq(e){return e instanceof $&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ml(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new $(e.resolve(t.anchor))}static create(e,t){return new $(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}$.prototype.visible=!1;V.jsonID("node",$);class ml{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new ko(r,r):new ml(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&$.isSelectable(r)?new $(t):V.near(t)}}class st extends V{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=I.empty){if(t==I.empty){e.delete(0,e.doc.content.size);let r=V.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new st(e)}map(e){return new st(e)}eq(e){return e instanceof st}getBookmark(){return Mp}}V.jsonID("all",st);const Mp={map(){return this},resolve(n){return new st(n)}};function Bn(n,e,t,r,i,o=!1){if(e.inlineContent)return j.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&$.isSelectable(l))return $.create(n,t-(i<0?l.nodeSize:0))}else{let a=Bn(n,l,t+i,i<0?l.childCount:0,i,o);if(a)return a}t+=l.nodeSize*i}return null}function fa(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ae||i instanceof ye))return;let o=n.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),n.setSelection(V.near(n.doc.resolve(s),t))}const ha=1,wi=2,pa=4;class Tp extends pl{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ha)&~wi,this.storedMarks=null,this}get selectionSet(){return(this.updated&ha)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wi,this}ensureMarks(e){return ee.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wi)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~wi,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ee.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(V.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=pa,this}get scrolledIntoView(){return(this.updated&pa)>0}}function ma(n,e){return!e||!n?n:n.bind(e)}class Nr{constructor(e,t,r){this.name=e,this.init=ma(t.init,r),this.apply=ma(t.apply,r)}}const Op=[new Nr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Nr("selection",{init(n,e){return n.selection||V.atStart(e.doc)},apply(n){return n.selection}}),new Nr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Nr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Jo{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Op.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Nr(r.key,r.spec.state,r))})}}class zn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new zn(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new Tp(this)}static create(e){let t=new Jo(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new zn(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Jo(this.schema,e.plugins),r=t.fields,i=new zn(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Jo(e.schema,e.plugins),o=new zn(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Ft.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=V.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){o[s.name]=u.fromJSON.call(a,e,t[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Tc(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Tc(i,e,{})),t[r]=i}return t}class pe{constructor(e){this.spec=e,this.props={},e.props&&Tc(e.props,this,this.props),this.key=e.key?e.key.key:Oc("plugin")}getState(e){return e[this.key]}}const Yo=Object.create(null);function Oc(n){return n in Yo?n+"$"+ ++Yo[n]:(Yo[n]=0,n+"$")}class Be{constructor(e="key"){this.key=Oc(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ve=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Jr=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let ga=null;const Mt=function(n,e,t){let r=ga||(ga=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Dn=function(n,e,t,r){return t&&(ya(n,e,t,r,-1)||ya(n,e,t,r,1))},Np=/^(img|br|input|textarea|hr)$/i;function ya(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:mt(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Ip(n)||Np.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ve(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?mt(n):0}else return!1}}function mt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Fp(n,e,t){for(let r=e==0,i=e==mt(n);r||i;){if(n==t)return!0;let o=Ve(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==mt(n)}}function Ip(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const So=function(n){return n.focusNode&&Dn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Hn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Bp(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}const Qt=typeof navigator<"u"?navigator:null,va=typeof document<"u"?document:null,nn=Qt&&Qt.userAgent||"",Cs=/Edge\/(\d+)/.exec(nn),Nc=/MSIE \d/.exec(nn),xs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nn),Re=!!(Nc||xs||Cs),Gt=Nc?document.documentMode:xs?+xs[1]:Cs?+Cs[1]:0,at=!Re&&/gecko\/(\d+)/i.test(nn);at&&+(/Firefox\/(\d+)/.exec(nn)||[0,0])[1];const ks=!Re&&/Chrome\/(\d+)/.exec(nn),Pe=!!ks,Pp=ks?+ks[1]:0,Ne=!Re&&!!Qt&&/Apple Computer/.test(Qt.vendor),ir=Ne&&(/Mobile\/\w+/.test(nn)||!!Qt&&Qt.maxTouchPoints>2),Ke=ir||(Qt?/Mac/.test(Qt.platform):!1),gt=/Android \d/.test(nn),Ao=!!va&&"webkitFontSmoothing"in va.documentElement.style,Rp=Ao?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Lp(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Lt(n,e){return typeof n=="number"?n:n[e]}function zp(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function ba(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;s=Jr(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?Lp(o):zp(l),c=0,d=0;if(e.top<u.top+Lt(r,"top")?d=-(u.top-e.top+Lt(i,"top")):e.bottom>u.bottom-Lt(r,"bottom")&&(d=e.bottom-u.bottom+Lt(i,"bottom")),e.left<u.left+Lt(r,"left")?c=-(u.left-e.left+Lt(i,"left")):e.right>u.right-Lt(r,"right")&&(c=e.right-u.right+Lt(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let f=l.scrollLeft,h=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let p=l.scrollLeft-f,m=l.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(a)break}}function Hp(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=n.root.elementFromPoint(o,s);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Fc(n.dom)}}function Fc(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Jr(r));return e}function $p({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Ic(t,r==0?0:r-e)}function Ic(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let In=null;function Vp(n){if(n.setActive)return n.setActive();if(In)return n.focus(In);let e=Fc(n);n.focus(In==null?{get preventScroll(){return In={preventScroll:!0},!0}}:void 0),In||(In=!1,Ic(e,0))}function Bc(n,e){let t,r=2e8,i,o=0,s=e.top,l=e.top;for(let a=n.firstChild,u=0;a;a=a.nextSibling,u++){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Mt(a).getClientRects();else continue;for(let d=0;d<c.length;d++){let f=c[d];if(f.top<=s&&f.bottom>=l){s=Math.max(f.bottom,s),l=Math.min(f.top,l);let h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<r){t=a,r=h,i=h&&t.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,a.nodeType==1&&h&&(o=u+(e.left>=(f.left+f.right)/2?1:0));continue}}!t&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(o=u+1)}}return t&&t.nodeType==3?jp(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:Bc(t,i)}function jp(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=zt(r,1);if(o.top!=o.bottom&&gl(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function gl(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function _p(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Wp(n,e,t){let{node:r,offset:i}=Bc(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function Up(n,e,t,r){let i=-1;for(let o=e;o!=n.dom;){let s=n.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){let l=s.dom.getBoundingClientRect();if(l.left>r.left||l.top>r.top)i=s.posBefore;else if(l.right<r.left||l.bottom<r.top)i=s.posAfter;else break}o=s.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,1)}function Pc(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(gl(e,u))return Pc(s,e,u)}}if((o=(o+1)%r)==i)break}return n}function Kp(n,e){let t=n.dom.ownerDocument,r,i=0;if(t.caretPositionFromPoint)try{let a=t.caretPositionFromPoint(e.left,e.top);a&&({offsetNode:r,offset:i}=a)}catch{}if(!r&&t.caretRangeFromPoint){let a=t.caretRangeFromPoint(e.left,e.top);a&&({startContainer:r,startOffset:i}=a)}let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),s;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let a=n.dom.getBoundingClientRect();if(!gl(e,a)||(o=Pc(n.dom,e,a),!o))return null}if(Ne)for(let a=o;r&&a;a=Jr(a))a.draggable&&(r=void 0);if(o=_p(o,e),r){if(at&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let a=r.childNodes[i],u;a.nodeName=="IMG"&&(u=a.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=Up(n,r,i,e))}s==null&&(s=Wp(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function zt(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const qp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Rc(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=Ao||at;if(r.nodeType==3)if(s&&(qp.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let a=zt(Mt(r,i,i),t);if(at&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=zt(Mt(r,i-1,i-1),-1);if(u.top==a.top){let c=zt(Mt(r,i,i+1),-1);if(c.top!=a.top)return Cr(c,c.left<u.left)}}return a}else{let a=i,u=i,c=t<0?1:-1;return t<0&&!i?(u++,c=-1):t>=0&&i==r.nodeValue.length?(a--,c=1):t<0?a--:u++,Cr(zt(Mt(r,a,u),1),c<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==mt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Xo(a.getBoundingClientRect(),!1)}if(o==null&&i<mt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Xo(a.getBoundingClientRect(),!0)}return Xo(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==mt(r))){let a=r.childNodes[i-1],u=a.nodeType==3?Mt(a,mt(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Cr(zt(u,1),!1)}if(o==null&&i<mt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Mt(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return Cr(zt(u,-1),!0)}return Cr(zt(r.nodeType==3?Mt(r):r,-t),t>=0)}function Cr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Xo(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Lc(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function Gp(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Lc(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.dom;break}o=l.dom.parentNode}let s=Rc(n,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Mt(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(t=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const Jp=/[\u0590-\u08ac]/;function Yp(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=n.domSelection();return!Jp.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?o:s:Lc(n,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==m;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),g})}let wa=null,Da=null,Ca=!1;function Xp(n,e,t){return wa==e&&Da==t?Ca:(wa=e,Da=t,Ca=t=="up"||t=="down"?Gp(n,e,t):Yp(n,e,t))}const lt=0,xa=1,$n=2,Dt=3;class ti{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=lt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Ve(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Hc){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof zc&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Ve(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Ve(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&t<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Ve(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>t||l==this.children.length-1)){t=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Ve(d.dom);break}t+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(o>h&&s<m)return p.setSelection(e-h-p.border,t-h-p.border,r,i);h=m}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),u=r.getSelection(),c=!1;if((at||Ne)&&e==t){let{node:f,offset:h}=l;if(f.nodeType==3){if(c=!!(h&&f.nodeValue[h-1]==`
`),c&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(l=a={node:m.parentNode,offset:Ve(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=f.childNodes[h-1];c=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(at&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||c&&Ne)&&Dn(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Dn(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((u.extend||e==t)&&!c){u.collapse(l.node,l.offset);try{e!=t&&u.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>t){let h=l;l=a,a=h}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let l=r+o.border,a=s-o.border;if(e>=l&&t<=a){this.dirty=e==r||t==s?$n:xa,e==l&&t==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Dt:o.markDirty(e-l,t-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?$n:Dt}r=s}this.dirty=$n}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?$n:xa;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class zc extends ti{constructor(e,t,r,i){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==lt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Qp extends ti{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Cn extends ti{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let o=i.nodeViews[t.type.name],s=o&&o(t,i,r);return(!s||!s.dom)&&(s=yt.renderSpec(document,t.type.spec.toDOM(t,r))),new Cn(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&Dt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=Dt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=lt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=lt}}slice(e,t,r){let i=Cn.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;t<s&&(o=Es(o,t,s,r)),e>0&&(o=Es(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}}class xn extends ti{constructor(e,t,r,i,o,s,l,a,u){super(e,[],o,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l,s&&this.updateChildren(a,u)}static create(e,t,r,i,o,s){let l=o.nodeViews[t.type.name],a,u=l&&l(t,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=yt.renderSpec(document,t.type.spec.toDOM(t)));!d&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let f=c;return c=jc(c,r,t),u?a=new Zp(e,t,r,i,c,d||null,f,u,o,s+1):t.isText?new Eo(e,t,r,i,c,f,o):new xn(e,t,r,i,c,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,t,r){return this.dirty==lt&&e.eq(this.node)&&As(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new tm(this,s&&s.node,e);im(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?ee.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let h;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,h,e)||a.updateNextNode(u,c,d,e,f)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==$n)&&(s&&this.protectLocalComposition(e,s),$c(this.contentDOM,this.children,e),ir&&om(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof j)||r<t||i>t+this.node.content.size)return null;let o=e.domSelectionRange(),s=sm(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,a=lm(this.node.content,l,r-t,i-t);return a<0?null:{node:s,pos:a,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new Qp(this,o,t,i);e.input.compositionNodes.push(s),this.children=Es(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==Dt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=lt}updateOuterDeco(e){if(As(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Vc(this.dom,this.nodeDOM,Ss(this.outerDeco,this.node,t),Ss(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function ka(n,e,t,r,i){return jc(r,e,n),new xn(void 0,n,e,t,r,r,r,i,0)}class Eo extends xn{constructor(e,t,r,i,o,s,l){super(e,t,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Dt||this.dirty!=lt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=lt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=lt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new Eo(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Dt)}get domAtom(){return!1}}class Hc extends ti{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==lt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Zp extends xn{constructor(e,t,r,i,o,s,l,a,u,c){super(e,t,r,i,o,s,l,u,c),this.spec=a}update(e,t,r,i){if(this.dirty==Dt)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $c(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==n){for(;l!=r;)r=Sa(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(s instanceof Cn){let a=r?r.previousSibling:n.lastChild;$c(s.contentDOM,s.children,t),r=a?a.nextSibling:n.firstChild}}for(;r;)r=Sa(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Rr=function(n){n&&(this.nodeName=n)};Rr.prototype=Object.create(null);const hn=[new Rr];function Ss(n,e,t){if(n.length==0)return hn;let r=t?hn[0]:new Rr,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new Rr(s.nodeName));for(let l in s){let a=s[l];a!=null&&(t&&i.length==1&&i.push(r=new Rr(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Vc(n,e,t,r){if(t==hn&&r==hn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=t[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=n&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=hn[0]),i=a}em(i,l||hn[0],s)}return i}function em(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function jc(n,e,t){return Vc(n,n,hn,Ss(e,t,n.nodeType!=1))}function As(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Sa(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class tm{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=nm(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=lt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){l=a;break}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Cn.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let s=this.top.children[i];return s.dirty==Dt&&s.dom==s.contentDOM&&(s.dirty=$n),s.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof xn){let a=this.preMatch.matched.get(l);if(a!=null&&a!=o)return!1;let u=l.dom;if(!(this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Dt&&As(t,l.outerDeco)))&&l.update(e,t,r,i))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,r,i,o){this.top.children.splice(this.index++,0,xn.create(this.top,e,t,r,i,o)),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new zc(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Cn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Eo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ne||Pe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Hc(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function nm(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=t.children[r-1];if(u instanceof Cn)t=u,r=u.children.length;else{l=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=n.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function rm(n,e){return n.type.side-e.type.side}function im(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let c=n.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){if(s<i.length&&i[s].to==o){let p=i[s++],m;for(;s<i.length&&i[s].to==o;)(m||(m=[p])).push(i[s++]);if(m){m.sort(rm);for(let g=0;g<m.length;g++)t(m[g],u,!!a)}else t(p,u,!!a)}let c,d;if(a)d=-1,c=a,a=null;else if(u<n.childCount)d=u,c=n.child(u++);else break;for(let p=0;p<l.length;p++)l[p].to<=o&&l.splice(p--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let f=o+c.nodeSize;if(c.isText){let p=f;s<i.length&&i[s].from<p&&(p=i[s].from);for(let m=0;m<l.length;m++)l[m].to<p&&(p=l[m].to);p<f&&(a=c.cut(p-o),c=c.cut(0,p-o),f=p,d=-1)}let h=c.isInline&&!c.isLeaf?l.filter(p=>!p.inline):l.slice();r(c,h,e.forChild(o,c),d),o=f}}function om(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function sm(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=mt(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function lm(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<n.childCount;){let u=n.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=t){let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=t)return l+u;if(t==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Es(n,e,t,r,i){let o=[];for(let s=0,l=0;s<n.length;s++){let a=n[s],u=l,c=l+=a.size;u>=t||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>t&&o.push(a.slice(t-u,a.size,r)))}return o}function yl(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(So(t)){for(a=l;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&$.isSelectable(c)&&i.parent&&!(c.isInline&&Fp(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;u=new $(s==d?l:r.resolve(d))}}else{let c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;a=r.resolve(c)}if(!u){let c=e=="pointer"||n.state.selection.head<l.pos&&!o?1:-1;u=vl(n,a,l,c)}return u}function _c(n){return n.editable?n.hasFocus():Uc(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function It(n,e=!1){let t=n.state.selection;if(Wc(n,t),!!_c(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Pe){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Dn(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)um(n);else{let{anchor:r,head:i}=t,o,s;Aa&&!(t instanceof j)&&(t.$from.parent.inlineContent||(o=Ea(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=Ea(n,t.to))),n.docView.setSelection(r,i,n.root,e),Aa&&(o&&Ma(o),s&&Ma(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&am(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Aa=Ne||Pe&&Pp<63;function Ea(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Ne&&i&&i.contentEditable=="false")return Qo(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Qo(i);if(o)return Qo(o)}}function Qo(n){return n.contentEditable="true",Ne&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Ma(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function am(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!_c(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function um(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Ve(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Re&&Gt<=11&&(r.disabled=!0,r.disabled=!1)}function Wc(n,e){if(e instanceof $){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ta(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ta(n)}function Ta(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function vl(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||j.between(e,t,r)}function Oa(n){return n.editable&&!n.hasFocus()?!1:Uc(n)}function Uc(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cm(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Dn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Ms(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&V.findFrom(o,e)}function dn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Na(n,e,t){let r=n.state.selection;if(r instanceof j){if(!r.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let i=Ms(n.state,e);return i&&i instanceof $?dn(n,i):!1}else if(!(Ke&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(l))&&!s.contentDOM?$.isSelectable(o)?dn(n,new $(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Ao?dn(n,new j(n.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else{if(r instanceof $&&r.node.isInline)return dn(n,new j(e>0?r.$to:r.$from));{let i=Ms(n.state,e);return i?dn(n,i):!1}}}function Wi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Lr(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function Zo(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(at&&t.nodeType==1&&r<Wi(t)&&Lr(t.childNodes[r])&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(Lr(l))i=t,o=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(Kc(t))break;{let l=t.previousSibling;for(;l&&Lr(l);)i=t.parentNode,o=Ve(l),l=l.previousSibling;if(l)t=l,r=Wi(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?Ts(n,t,r):i&&Ts(n,i,o)}function es(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Wi(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(Lr(l))o=t,s=++r;else break}else{if(Kc(t))break;{let l=t.nextSibling;for(;l&&Lr(l);)o=l.parentNode,s=Ve(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=Wi(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&Ts(n,o,s)}function Kc(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ts(n,e,t){let r=n.domSelection();if(So(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&It(n)},50)}function Fa(n,e,t){let r=n.state.selection;if(r instanceof j&&!r.empty||t.indexOf("s")>-1||Ke&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=Ms(n.state,e);if(s&&s instanceof $)return dn(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof st?V.near(s,e):V.findFrom(s,e);return l?dn(n,l):!1}return!1}function Ia(n,e){if(!(n.state.selection instanceof j))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function Ba(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function dm(n){if(!Ne||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ba(n,r,"true"),setTimeout(()=>Ba(n,r,"false"),20)}return!1}function fm(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function hm(n,e){let t=e.keyCode,r=fm(e);return t==8||Ke&&t==72&&r=="c"?Ia(n,-1)||Zo(n):t==46||Ke&&t==68&&r=="c"?Ia(n,1)||es(n):t==13||t==27?!0:t==37||Ke&&t==66&&r=="c"?Na(n,-1,r)||Zo(n):t==39||Ke&&t==70&&r=="c"?Na(n,1,r)||es(n):t==38||Ke&&t==80&&r=="c"?Fa(n,-1,r)||Zo(n):t==40||Ke&&t==78&&r=="c"?dm(n)||Fa(n,1,r)||es(n):r==(Ke?"m":"c")&&(t==66||t==73||t==89||t==90)}function qc(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||yt.fromSchema(n.state.schema),l=Zc(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=Qc[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f}}function Gc(n,e,t,r,i){let o=i.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(r||o||!t);if(a){if(n.someProp("transformPastedText",f=>{e=f(e,o||r,n)}),o)return e?new I(M.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):I.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(d)l=d;else{let f=i.marks(),{schema:h}=n.state,p=yt.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),s=gm(t),Ao&&ym(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||tr.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!pm.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=vm(Pa(l,+c[1],+c[2]),c[4]);else if(l=I.maxOpen(mm(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Pa(l,d,f)}return n.someProp("transformPasted",d=>{l=d(l,n)}),l}const pm=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mm(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&Yc(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=Xc(s[s.length-1],o.length));let c=Jc(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return M.from(s)}return n}function Jc(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,M.from(n));return n}function Yc(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=Yc(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(M.from(Jc(t,n,i+1))))}}function Xc(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Xc(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(M.empty,!0);return n.copy(t.append(r))}function Os(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,l=s.content;return i<r-1&&(l=Os(l,e,t,r,i+1,o)),i>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,n.childCount>1||o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(M.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(l))}function Pa(n,e,t){return e<n.openStart&&(n=new I(Os(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new I(Os(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Qc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ra=null;function Zc(){return Ra||(Ra=document.implementation.createHTMLDocument("title"))}function gm(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Zc().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Qc[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=n,i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function ym(n){let e=n.querySelectorAll(Pe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function vm(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=M.from(a.create(r[l+1],i)),o++,s++}return new I(i,o,s)}const Fe={},Ie={},bm={touchstart:!0,touchmove:!0};class wm{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Dm(n){for(let e in Fe){let t=Fe[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{xm(n,r)&&!bl(n,r)&&(n.editable||!(r.type in Ie))&&t(n,r)},bm[e]?{passive:!0}:void 0)}Ne&&n.dom.addEventListener("input",()=>null),Ns(n)}function qt(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Cm(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ns(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>bl(n,r))})}function bl(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function xm(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function km(n,e){!bl(n,e)&&Fe[e.type]&&(n.editable||!(e.type in Ie))&&Fe[e.type](n,e)}Ie.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!td(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(gt&&Pe&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ir&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Hn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||hm(n,t)?t.preventDefault():qt(n,"key")};Ie.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ie.keypress=(n,e)=>{let t=e;if(td(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ke&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof j)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))||n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Mo(n){return{left:n.clientX,top:n.clientY}}function Sm(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function wl(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,l=>s>o.depth?l(n,t,o.nodeAfter,o.before(s),i,!0):l(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function Yn(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function Am(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&$.isSelectable(r)?(Yn(n,new $(t),"pointer"),!0):!1}function Em(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof $&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if($.isSelectable(l)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(Yn(n,$.create(n.state.doc,i),"pointer"),!0):!1}function Mm(n,e,t,r,i){return wl(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?Em(n,t):Am(n,t))}function Tm(n,e,t,r){return wl(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function Om(n,e,t,r){return wl(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||Nm(n,t,r)}function Nm(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Yn(n,j.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Yn(n,j.create(r,l+1,l+1+s.content.size),"pointer");else if($.isSelectable(s))Yn(n,$.create(r,l),"pointer");else continue;return!0}}function Dl(n){return Ui(n)}const ed=Ke?"metaKey":"ctrlKey";Fe.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Dl(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&Sm(t,n.input.lastClick)&&!t[ed]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let s=n.posAtCoords(Mo(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Fm(n,s,t,!!r)):(o=="doubleClick"?Tm:Om)(n,s.pos,s.inside,t)?t.preventDefault():qt(n,"pointer"))};class Fm{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ed],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof $&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&at&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>It(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Mo(e))),this.updateAllowDefault(e),this.allowDefault||!t?qt(this.view,"pointer"):Mm(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ne&&this.mightDrag&&!this.mightDrag.node.isAtom||Pe&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Yn(this.view,V.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):qt(this.view,"pointer")}move(e){this.updateAllowDefault(e),qt(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Fe.touchstart=n=>{n.input.lastTouch=Date.now(),Dl(n),qt(n,"pointer")};Fe.touchmove=n=>{n.input.lastTouch=Date.now(),qt(n,"pointer")};Fe.contextmenu=n=>Dl(n);function td(n,e){return n.composing?!0:Ne&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Im=gt?5e3:-1;Ie.compositionstart=Ie.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ui(n,!0),n.markCursor=null;else if(Ui(n),at&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){n.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}nd(n,Im)};Ie.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,nd(n,20))};function nd(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ui(n),e))}function rd(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Bm());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Bm(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ui(n,e=!1){if(!(gt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),rd(n),e||n.docView&&n.docView.dirty){let t=yl(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function Pm(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const or=Re&&Gt<15||ir&&Rp<604;Fe.copy=Ie.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=or?null:t.clipboardData,s=r.content(),{dom:l,text:a}=qc(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):Pm(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Rm(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Lm(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Fs(n,r.value,null,e):Fs(n,r.textContent,r.innerHTML,e)},50)}function Fs(n,e,t,r){let i=Gc(n,e,t,n.input.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,i||I.empty)))return!0;if(!i)return!1;let o=Rm(i),s=o?n.state.tr.replaceSelectionWith(o,n.input.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ie.paste=(n,e)=>{let t=e;if(n.composing&&!gt)return;let r=or?null:t.clipboardData;r&&Fs(n,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():Lm(n,t)};class zm{constructor(e,t){this.slice=e,this.move=t}}const id=Ke?"altKey":"ctrlKey";Fe.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Mo(t));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof $?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection($.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&n.dispatch(n.state.tr.setSelection($.create(n.state.doc,u.posBefore)))}}let s=n.state.selection.content(),{dom:l,text:a}=qc(n,s);t.dataTransfer.clearData(),t.dataTransfer.setData(or?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",or||t.dataTransfer.setData("text/plain",a),n.dragging=new zm(s,!t[id])};Fe.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ie.dragover=Ie.dragenter=(n,e)=>e.preventDefault();Ie.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Mo(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=Gc(n,t.dataTransfer.getData(or?"Text":"text/plain"),or?null:t.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!t[id]);if(n.someProp("handleDrop",p=>p(n,t,s||I.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?xc(n.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=n.state.tr;l&&u.deleteSelection();let c=u.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&$.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new $(h));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,v,b)=>p=b),u.setSelection(vl(n,h,u.doc.resolve(p)))}n.focus(),n.dispatch(u.setMeta("uiEvent","drop"))};Fe.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&It(n)},20))};Fe.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Fe.beforeinput=(n,e)=>{if(Pe&&gt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Hn(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Ie)Fe[n]=Ie[n];function Yr(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Cl{constructor(e,t){this.toDOM=e,this.spec=t||yn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new Oe(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Cl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Jt{constructor(e,t){this.attrs=e,this.spec=t||yn}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Oe(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Jt&&Yr(this.attrs,e.attrs)&&Yr(this.spec,e.spec)}static is(e){return e.type instanceof Jt}destroy(){}}class xl{constructor(e,t){this.attrs=e,this.spec=t||yn}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Oe(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof xl&&Yr(this.attrs,e.attrs)&&Yr(this.spec,e.spec)}destroy(){}}class Oe{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Oe(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Oe(e,e,new Cl(t,r))}static inline(e,t,r,i){return new Oe(e,t,new Jt(r,i))}static node(e,t,r,i){return new Oe(e,t,new xl(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Jt}}const Pn=[],yn={};class le{constructor(e,t){this.local=e.length?e:Pn,this.children=t.length?t:Pn}static create(e,t){return t.length?Ki(t,e,0,yn):Se}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,r,i+l,o)}}map(e,t,r){return this==Se||e.maps.length==0?this:this.mapInner(e,t,0,0,r||yn)}mapInner(e,t,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(t,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?Hm(this.children,s||[],e,t,r,i,o):s?new le(s.sort(vn),Pn):Se}add(e,t){return t.length?this==Se?le.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=sd(t,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,Ki(c,l,u+1,yn)),o+=3}});let s=od(o?ld(t):t,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new le(s.length?this.local.concat(s).sort(vn):this.local,i||this.children)}remove(e){return e.length==0||this==Se?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+t,a=r[o+1]+t;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Se?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new le(i,r):Se}forChild(e,t){if(this==Se)return this;if(t.isLeaf)return le.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Jt){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new le(i.sort(vn),Pn);return r?new jt([l,r]):l}return r||Se}eq(e){if(this==e)return!0;if(!(e instanceof le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return kl(this.localsInner(e))}localsInner(e){if(this==Se)return Pn;if(e.inlineContent||!this.local.some(Jt.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Jt||t.push(this.local[r]);return t}}le.empty=new le([],[]);le.removeOverlap=kl;const Se=le.empty;class jt{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,yn));return jt.from(r)}forChild(e,t){if(t.isLeaf)return le.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=Se&&(o instanceof jt?r=r.concat(o.members):r.push(o))}return jt.from(r)}eq(e){if(!(e instanceof jt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?kl(r?t:t.sort(vn)):Pn}static from(e){switch(e.length){case 0:return Se;case 1:return e[0];default:return new jt(e.every(t=>t instanceof le)?e:e.reduce((t,r)=>t.concat(r instanceof le?r:r.members),[]))}}}function Hm(n,e,t,r,i,o,s){let l=n.slice();for(let u=0,c=o;u<t.maps.length;u++){let d=0;t.maps[u].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let v=0;v<l.length;v+=3){let b=l[v+1];if(b<0||f>b+c-d)continue;let C=l[v]+c-d;h>=C?l[v+1]=f<=C?-2:-1:p>=i&&g&&(l[v]+=g,l[v+1]+=g)}d+=g}),c=t.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=t.map(n[u]+o),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=t.map(n[u+1]+o,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let v=l[u+2].mapInner(t,g,c+1,n[u]+o+1,s);v!=Se?(l[u]=d,l[u+1]=h,l[u+2]=v):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=$m(l,n,e,t,i,o,s),c=Ki(u,r,0,s);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new le(e.sort(vn),l)}function od(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Oe(i.from+e,i.to+e,i.type))}return t}function $m(n,e,t,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?t.push(d):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+o+1);return t}function sd(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function ld(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ki(n,e,t,r){let i=[],o=!1;e.forEach((l,a)=>{let u=sd(n,l,a+t);if(u){o=!0;let c=Ki(u,l,t+a+1,r);c!=Se&&i.push(a,a+l.nodeSize,c)}});let s=od(o?ld(n):n,-t).sort(vn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new le(s,i):Se}function vn(n,e){return n.from-e.from||n.to-e.to}function kl(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),La(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),La(e,i,r.copy(o.from,r.to)));break}}}return e}function La(n,e,t){for(;e<n.length&&vn(t,n[e])>0;)e++;n.splice(e,0,t)}function ts(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Se&&e.push(r)}),n.cursorWrapper&&e.push(le.create(n.state.doc,[n.cursorWrapper.deco])),jt.from(e)}const Vm={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},jm=Re&&Gt<=11;class _m{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Wm{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _m,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Re&&Gt<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),jm&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Vm)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Oa(this.view)){if(this.suppressingSelectionUpdates)return It(this.view);if(Re&&Gt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Dn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Jr(o))t.add(o);for(let o=e.anchorNode;o;o=Jr(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Oa(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let d=this.registerMutation(t[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(at&&a.length>1){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let d=c[0],f=c[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&So(r)&&(u=yl(e))&&u.eq(V.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,It(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Um(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||It(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)t.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Re&&Gt<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?Ve(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ve(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let za=new WeakMap,Ha=!1;function Um(n){if(!za.has(n)&&(za.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=at,Ha)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ha=!0}}function Km(n){let e;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Dn(l.node,l.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function qm(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),u,c=a.anchorNode;if(c&&n.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],So(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Pe&&n.input.lastKeyCode===8)for(let g=o;g>i;g--){let v=r.childNodes[g-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){o=g;break}if(!b||b.size)break}let d=n.state.doc,f=n.someProp("domParser")||tr.fromSchema(n.state.schema),h=d.resolve(s),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Gm,context:h});if(u&&u[0].pos!=null){let g=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=g),p={anchor:g+s,head:v+s}}return{doc:m,sel:p,from:s,to:l}}function Gm(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ne&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ne&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function Jm(n,e,t,r,i){if(e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,O=yl(n,E);if(O&&!n.state.selection.eq(O)){let L=n.state.tr.setSelection(O);E=="pointer"?L.setMeta("pointer",!0):E=="key"&&L.scrollIntoView(),n.dispatch(L)}return}let o=n.state.doc.resolve(e),s=o.sharedDepth(t);e=o.before(s+1),t=n.state.doc.resolve(t).after(s+1);let l=n.state.selection,a=qm(n,e,t),u=n.state.doc,c=u.slice(a.from,a.to),d,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,f="end"):(d=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let h=Qm(c.content,a.doc.content,a.from,d,f);if((ir&&n.input.lastIOSEnter>Date.now()-225||gt)&&i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"||E.nodeName=="LI")&&(!h||h.endA>=h.endB)&&n.someProp("handleKeyDown",E=>E(n,Hn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof j&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(a.sel){let E=$a(n,n.state.doc,a.sel);E&&!E.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(E))}return}if(Pe&&n.cursorWrapper&&a.sel&&a.sel.anchor==n.cursorWrapper.deco.from&&a.sel.head==a.sel.anchor){let E=h.endB-h.start;a.sel={anchor:a.sel.anchor+E,head:a.sel.anchor+E}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&h.start==h.endB&&n.state.selection instanceof j&&(h.start>n.state.selection.from&&h.start<=n.state.selection.from+2&&n.state.selection.from>=a.from?h.start=n.state.selection.from:h.endA<n.state.selection.to&&h.endA>=n.state.selection.to-2&&n.state.selection.to<=a.to&&(h.endB+=n.state.selection.to-h.endA,h.endA=n.state.selection.to)),Re&&Gt<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>a.from&&a.doc.textBetween(h.start-a.from-1,h.start-a.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let p=a.doc.resolveNoCache(h.start-a.from),m=a.doc.resolveNoCache(h.endB-a.from),g=u.resolve(h.start),v=p.sameParent(m)&&p.parent.inlineContent&&g.end()>=h.endA,b;if((ir&&n.input.lastIOSEnter>Date.now()-225&&(!v||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!v&&p.pos<a.doc.content.size&&(b=V.findFrom(a.doc.resolve(p.pos+1),1,!0))&&b.head==m.pos)&&n.someProp("handleKeyDown",E=>E(n,Hn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>h.start&&Xm(u,h.start,h.endA,p,m)&&n.someProp("handleKeyDown",E=>E(n,Hn(8,"Backspace")))){gt&&Pe&&n.domObserver.suppressSelectionUpdates();return}Pe&&gt&&h.endB==h.start&&(n.input.lastAndroidDelete=Date.now()),gt&&!v&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==h.endA&&(h.endB-=2,m=a.doc.resolveNoCache(h.endB-a.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,Hn(13,"Enter"))})},20));let C=h.start,y=h.endA,k,D,T;if(v){if(p.pos==m.pos)Re&&Gt<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>It(n),20)),k=n.state.tr.delete(C,y),D=u.resolve(h.start).marksAcross(u.resolve(h.endA));else if(h.endA==h.endB&&(T=Ym(p.parent.content.cut(p.parentOffset,m.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start()))))k=n.state.tr,T.type=="add"?k.addMark(C,y,T.mark):k.removeMark(C,y,T.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let E=p.parent.textBetween(p.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",O=>O(n,C,y,E)))return;k=n.state.tr.insertText(E,C,y)}}if(k||(k=n.state.tr.replace(C,y,a.doc.slice(h.start-a.from,h.endB-a.from))),a.sel){let E=$a(n,k.doc,a.sel);E&&!(Pe&&gt&&n.composing&&E.empty&&(h.start!=h.endB||n.input.lastAndroidDelete<Date.now()-100)&&(E.head==C||E.head==k.mapping.map(y)-1)||Re&&E.empty&&E.head==C)&&k.setSelection(E)}D&&k.ensureMarks(D),n.dispatch(k.scrollIntoView())}function $a(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:vl(n,e.resolve(t.anchor),e.resolve(t.head))}function Ym(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<t.length;c++)o=t[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(M.from(u).eq(n))return{mark:l,type:s}}function Xm(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||ns(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(ns(o,!0,!0));return!s.parent.isTextblock||s.pos>t||ns(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ns(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Qm(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&n.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}class Zm{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new wm,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ua),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_a(this),ja(this),this.nodeViews=Wa(this),this.docView=ka(this.state.doc,Va(this),ts(this),this.dom,this),this.domObserver=new Wm(this,(r,i,o,s)=>Jm(this,r,i,o,s)),this.domObserver.start(),Dm(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ns(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ua),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(rd(this),o=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=Wa(this);tg(f,this.nodeViews)&&(this.nodeViews=f,i=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ns(this),this.editable=_a(this),ja(this);let l=ts(this),a=Va(this),u=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",c=i||!this.docView.matchesNode(e.doc,a,l);(c||!e.selection.eq(r.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Hp(this);if(o){this.domObserver.stop();let f=c&&(Re||Pe)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&eg(r.selection,e.selection);if(c){let h=Pe?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,a,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ka(e.doc,a,l,this.dom,this)),h&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cm(this))?It(this,f):(Wc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&$p(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof $){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ba(this,t.getBoundingClientRect(),e)}else ba(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=t?t(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(Re){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vp(this.dom),It(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return Kp(this,e)}coordsAtPos(e,t=1){return Rc(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Xp(this,t||this.state,e)}destroy(){this.docView&&(Cm(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ts(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return km(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ne&&this.root.nodeType===11&&Bp(this.dom.ownerDocument)==this.dom?Km(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Va(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"&&(e.class+=" "+t[r]),r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),[Oe.node(0,n.state.doc.content.size,e)]}function ja(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Oe.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function _a(n){return!n.someProp("editable",e=>e(n.state)===!1)}function eg(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Wa(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function tg(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Ua(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ka=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),ng=typeof navigator<"u"&&/Mac/.test(navigator.platform),rg=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ig=ng||Ka&&+Ka[1]<57;for(var De=0;De<10;De++)Zt[48+De]=Zt[96+De]=String(De);for(var De=1;De<=24;De++)Zt[De+111]="F"+De;for(var De=65;De<=90;De++)Zt[De]=String.fromCharCode(De+32),qi[De]=String.fromCharCode(De);for(var rs in Zt)qi.hasOwnProperty(rs)||(qi[rs]=Zt[rs]);function og(n){var e=ig&&(n.ctrlKey||n.altKey||n.metaKey)||rg&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?qi:Zt)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const sg=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function lg(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))sg?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function ag(n){let e=Object.create(null);for(let t in n)e[lg(t)]=n[t];return e}function is(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}function ug(n){return new pe({props:{handleKeyDown:Sl(n)}})}function Sl(n){let e=ag(n);return function(t,r){let i=og(r),o=i.length==1&&i!=" ",s,l=e[is(i,r,!o)];if(l&&l(t.state,t.dispatch,t))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Zt[r.keyCode])&&s!=i){let a=e[is(s,r,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(o&&r.shiftKey){let a=e[is(i,r,!0)];if(a&&a(t.state,t.dispatch,t))return!0}return!1}}const cg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function dg(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const fg=(n,e,t)=>{let r=dg(n,t);if(!r)return!1;let i=ad(r);if(!i){let s=r.blockRange(),l=s&&pr(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&dd(n,i,e))return!0;if(r.parent.content.size==0&&(sr(o,"end")||$.isSelectable(o))){let s=hl(n.doc,r.before(),r.after(),I.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(sr(o,"end")?V.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):$.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function sr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const hg=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=ad(r)}let s=o&&o.nodeBefore;return!s||!$.isSelectable(s)?!1:(e&&e(n.tr.setSelection($.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function ad(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function pg(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const mg=(n,e,t)=>{let r=pg(n,t);if(!r)return!1;let i=ud(r);if(!i)return!1;let o=i.nodeAfter;if(dd(n,i,e))return!0;if(r.parent.content.size==0&&(sr(o,"start")||$.isSelectable(o))){let s=hl(n.doc,r.before(),r.after(),I.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(sr(o,"start")?V.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):$.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},gg=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=ud(r)}let s=o&&o.nodeAfter;return!s||!$.isSelectable(s)?!1:(e&&e(n.tr.setSelection($.create(n.doc,o.pos)).scrollIntoView()),!0)};function ud(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const yg=(n,e)=>{let t=n.selection,r=t instanceof $,i;if(r){if(t.node.isTextblock||!tn(n.doc,t.from))return!1;i=t.from}else if(i=Cc(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection($.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},vg=(n,e)=>{let t=n.selection,r;if(t instanceof $){if(t.node.isTextblock||!tn(n.doc,t.to))return!1;r=t.to}else if(r=Cc(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},bg=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&pr(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},wg=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function cd(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Dg=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=cd(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,s.createAndFill());a.setSelection(V.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Cg=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof st||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=cd(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(s,o.createAndFill());l.setSelection(j.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},xg=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Gn(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&pr(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},kg=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection($.create(n.doc,i))),!0)};function Sg(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||tn(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function dd(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Sg(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(t){let d=e.pos+i.nodeSize,f=M.empty;for(let m=o.length-1;m>=0;m--)f=M.from(o[m].create(null,f));f=M.from(r.copy(f));let h=n.tr.step(new ye(e.pos-1,d,e.pos,d,new I(f,1,0),o.length,!0)),p=d+2*o.length;tn(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let a=V.findFrom(e,1),u=a&&a.$from.blockRange(a.$to),c=u&&pr(u);if(c!=null&&c>=e.depth)return t&&t(n.tr.lift(u,c).scrollIntoView()),!0;if(l&&sr(i,"start",!0)&&sr(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(t){let m=M.empty;for(let v=f.length-1;v>=0;v--)m=M.from(f[v].copy(m));let g=n.tr.step(new ye(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new I(m,f.length,0),0,!0));t(g.scrollIntoView())}return!0}}return!1}function fd(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(j.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const Ag=fd(-1),Eg=fd(1);function Mg(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),l=s&&fl(s,n,e);return l?(r&&r(t.tr.wrap(s,l).scrollIntoView()),!0):!1}}function qa(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=t.selection.ranges[o];t.doc.nodesBetween(s,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)i=!0;else{let c=t.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];o.setBlockType(l,a,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Tg(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(n)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=t.doc.resolve(s.start-2);a=new $i(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new $i(i,t.doc.resolve(o.end(s.depth)),s.depth)),l=!0}let u=fl(a,n,e,s);return u?(r&&r(Og(t.tr,s,u,l,n).scrollIntoView()),!0):!1}}function Og(n,e,t,r,i){let o=M.empty;for(let c=t.length-1;c>=0;c--)o=M.from(t[c].type.create(t[c].attrs,o));n.step(new ye(e.start-(r?2:0),e.end,e.start,e.end,new I(o,0,0),t.length,!0));let s=0;for(let c=0;c<t.length;c++)t[c].type==i&&(s=c+1);let l=t.length-s,a=e.start+t.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Gn(n.doc,a,l)&&(n.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return n}function Ng(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?Fg(e,t,n,o):Ig(e,t,o):!0:!1}}function Fg(n,e,t,r){let i=n.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new ye(o-1,s,o,s,new I(M.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new $i(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=pr(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(o,-1)-1;return tn(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function Ig(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(t.start),s=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?M.empty:M.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new ye(d-(l?1:0),f+(a?1:0),d+1,f-1,new I((l?M.empty:M.from(i.copy(M.empty))).append(a?M.empty:M.from(i.copy(M.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Bg(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=n)return!1;if(t){let u=a.lastChild&&a.lastChild.type==l.type,c=M.from(u?n.create():null),d=new I(M.from(n.create(null,M.from(l.type.create(null,c)))),u?3:1,0),f=o.start,h=o.end;t(e.tr.step(new ye(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function To(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}class Oo{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(u,t),v=h(...m)(g);return l.push(v),d}])),run:c};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(t).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i;o.storedMarks&&e.setStoredMarks(o.storedMarks);const l={tr:e,editor:i,view:s,state:To({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class Pg{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function P(n,e,t){return n.config[e]===void 0&&n.parent?P(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?P(n.parent,e,t):null}):n.config[e]}function No(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function hd(n){const e=[],{nodeExtensions:t,markExtensions:r}=No(n),i=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=P(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...o,...h}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=P(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function be(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function se(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}i==="class"?r[i]=[r[i],o].join(" "):i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function Is(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>se(t,r),{})}function pd(n){return typeof n=="function"}function K(n,e=void 0,...t){return pd(n)?e?n.bind(e)(...t):n(...t):n}function Rg(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Lg(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Ga(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(t):Lg(t.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Ja(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Rg(t)?!1:t!=null))}function zg(n){var e;const t=hd(n),{nodeExtensions:r,markExtensions:i}=No(n),o=(e=r.find(a=>P(a,"topNode")))===null||e===void 0?void 0:e.name,s=Object.fromEntries(r.map(a=>{const u=t.filter(g=>g.type===a.name),c={name:a.name,options:a.options,storage:a.storage},d=n.reduce((g,v)=>{const b=P(v,"extendNodeSchema",c);return{...g,...b?b(a):{}}},{}),f=Ja({...d,content:K(P(a,"content",c)),marks:K(P(a,"marks",c)),group:K(P(a,"group",c)),inline:K(P(a,"inline",c)),atom:K(P(a,"atom",c)),selectable:K(P(a,"selectable",c)),draggable:K(P(a,"draggable",c)),code:K(P(a,"code",c)),defining:K(P(a,"defining",c)),isolating:K(P(a,"isolating",c)),attrs:Object.fromEntries(u.map(g=>{var v;return[g.name,{default:(v=g==null?void 0:g.attribute)===null||v===void 0?void 0:v.default}]}))}),h=K(P(a,"parseHTML",c));h&&(f.parseDOM=h.map(g=>Ga(g,u)));const p=P(a,"renderHTML",c);p&&(f.toDOM=g=>p({node:g,HTMLAttributes:Is(g,u)}));const m=P(a,"renderText",c);return m&&(f.toText=m),[a.name,f]})),l=Object.fromEntries(i.map(a=>{const u=t.filter(m=>m.type===a.name),c={name:a.name,options:a.options,storage:a.storage},d=n.reduce((m,g)=>{const v=P(g,"extendMarkSchema",c);return{...m,...v?v(a):{}}},{}),f=Ja({...d,inclusive:K(P(a,"inclusive",c)),excludes:K(P(a,"excludes",c)),group:K(P(a,"group",c)),spanning:K(P(a,"spanning",c)),code:K(P(a,"code",c)),attrs:Object.fromEntries(u.map(m=>{var g;return[m.name,{default:(g=m==null?void 0:m.attribute)===null||g===void 0?void 0:g.default}]}))}),h=K(P(a,"parseHTML",c));h&&(f.parseDOM=h.map(m=>Ga(m,u)));const p=P(a,"renderHTML",c);return p&&(f.toDOM=m=>p({mark:m,HTMLAttributes:Is(m,u)})),[a.name,f]}));return new Zh({topNode:o,nodes:s,marks:l})}function ss(n,e){return e.nodes[n]||e.marks[n]||null}function Ya(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const Hg=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";t+=c.slice(0,Math.max(0,r-o))}),t};function Al(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Fo{constructor(e){this.find=e.find,this.handler=e.handler}}const $g=(n,e)=>{if(Al(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[];return r.push(t.text),r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function ls(n){var e;const{editor:t,from:r,to:i,text:o,rules:s,plugin:l}=n,{view:a}=t;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=Hg(u)+o;return s.forEach(f=>{if(c)return;const h=$g(d,f.find);if(!h)return;const p=a.state.tr,m=To({state:a.state,transaction:p}),g={from:r-(h[0].length-o.length),to:i},{commands:v,chain:b,can:C}=new Oo({editor:t,state:m});f.handler({state:m,range:g,match:h,commands:v,chain:b,can:C})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:o}),a.dispatch(p),c=!0)}),c}function Vg(n){const{editor:e,rules:t}=n,r=new pe({state:{init(){return null},apply(i,o){const s=i.getMeta(r);return s||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,s,l){return ls({editor:e,from:o,to:s,text:l,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ls({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?ls({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function jg(n){return typeof n=="number"}class _g{constructor(e){this.find=e.find,this.handler=e.handler}}const Wg=(n,e)=>{if(Al(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function Ug(n){const{editor:e,state:t,from:r,to:i,rule:o}=n,{commands:s,chain:l,can:a}=new Oo({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,i,(d,f)=>{if(!d.isTextblock||d.type.spec.code)return;const h=Math.max(r,f),p=Math.min(i,f+d.content.size),m=d.textBetween(h-f,p-f,void 0,"￼");Wg(m,o.find).forEach(v=>{if(v.index===void 0)return;const b=h+v.index+1,C=b+v[0].length,y={from:t.tr.mapping.map(b),to:t.tr.mapping.map(C)},k=o.handler({state:t,range:y,match:v,commands:s,chain:l,can:a});u.push(k)})}),u.every(d=>d!==null)}function Kg(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1;return t.map(l=>new pe({view(a){const u=c=>{var d;r=!((d=a.dom.parentElement)===null||d===void 0)&&d.contains(c.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:a=>(o=r===a.dom.parentElement,!1),paste:(a,u)=>{var c;const d=(c=u.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return i=!!(d!=null&&d.includes("data-pm-slice")),!1}}},appendTransaction:(a,u,c)=>{const d=a[0],f=d.getMeta("uiEvent")==="paste"&&!i,h=d.getMeta("uiEvent")==="drop"&&!o;if(!f&&!h)return;const p=u.doc.content.findDiffStart(c.doc.content),m=u.doc.content.findDiffEnd(c.doc.content);if(!jg(p)||!m||p===m.b)return;const g=c.tr,v=To({state:c,transaction:g});if(!(!Ug({editor:e,state:v,from:Math.max(p-1,0),to:m.b-1,rule:l})||!g.steps.length))return g}}))}function qg(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class Vn{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Vn.resolve(e),this.schema=zg(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ss(r.name,this.schema)};r.type==="mark"&&(!((i=K(P(r,"keepOnSplit",o)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const s=P(r,"onBeforeCreate",o);s&&this.editor.on("beforeCreate",s);const l=P(r,"onCreate",o);l&&this.editor.on("create",l);const a=P(r,"onUpdate",o);a&&this.editor.on("update",a);const u=P(r,"onSelectionUpdate",o);u&&this.editor.on("selectionUpdate",u);const c=P(r,"onTransaction",o);c&&this.editor.on("transaction",c);const d=P(r,"onFocus",o);d&&this.editor.on("focus",d);const f=P(r,"onBlur",o);f&&this.editor.on("blur",f);const h=P(r,"onDestroy",o);h&&this.editor.on("destroy",h)})}static resolve(e){const t=Vn.sort(Vn.flatten(e)),r=qg(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=P(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=P(r,"priority")||100,s=P(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ss(t.name,this.schema)},i=P(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Vn.sort([...this.extensions].reverse()),r=[],i=[],o=t.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:ss(s.name,this.schema)},a=[],u=P(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>ut.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([g,v])=>[g,()=>v({editor:e})]));c={...c,...m}}const d=ug(c);a.push(d);const f=P(s,"addInputRules",l);Ya(s,e.options.enableInputRules)&&f&&r.push(...f());const h=P(s,"addPasteRules",l);Ya(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=P(s,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[Vg({editor:e,rules:r}),...Kg({editor:e,rules:i}),...o]}get attributes(){return hd(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=No(this.extensions);return Object.fromEntries(t.filter(r=>!!P(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:be(r.name,this.schema)},s=P(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,d)=>{const f=Is(a,i);return s()({editor:e,node:a,getPos:c,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,l]}))}}function Gg(n){return Object.prototype.toString.call(n).slice(8,-1)}function as(n){return Gg(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Io(n,e){const t={...n};return as(n)&&as(e)&&Object.keys(e).forEach(r=>{as(e[r])?r in n?t[r]=Io(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class Ee{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=K(P(this,"addOptions",{name:this.name}))),this.storage=K(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ee(e)}configure(e={}){const t=this.extend();return t.options=Io(this.options,e),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ee(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=K(P(t,"addOptions",{name:t.name})),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}}function md(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=t||{};let l="",a=!0;return n.nodesBetween(r,i,(u,c,d,f)=>{var h;const p=s==null?void 0:s[u.type.name];p?(u.isBlock&&!a&&(l+=o,a=!0),d&&(l+=p({node:u,pos:c,parent:d,index:f,range:e}))):u.isText?(l+=(h=u==null?void 0:u.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c),a=!1):u.isBlock&&!a&&(l+=o,a=!0)}),l}function gd(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Jg=Ee.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new pe({key:new Be("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=gd(t);return md(r,{from:s,to:l},{textSerializers:a})}}})]}}),Yg=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Xg=(n=!1)=>({commands:e})=>e.setContent("",n),Qg=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:s})=>{n.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const p=pr(h);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Zg=n=>e=>n(e),e0=()=>({state:n,dispatch:e})=>Cg(n,e),t0=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);n.delete(l,a).scrollIntoView()}return!0}return!1},n0=n=>({tr:e,state:t,dispatch:r})=>{const i=be(n,t.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},r0=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},i0=()=>({state:n,dispatch:e})=>cg(n,e),o0=()=>({commands:n})=>n.keyboardShortcut("Enter"),s0=()=>({state:n,dispatch:e})=>Dg(n,e);function Gi(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Al(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Bs(n,e,t={}){return n.find(r=>r.type===e&&Gi(r.attrs,t))}function l0(n,e,t={}){return!!Bs(n,e,t)}function El(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Bs([...r.node.marks],e,t);if(!i)return;let o=r.index,s=n.start()+r.offset,l=o+1,a=s+r.node.nodeSize;for(Bs([...r.node.marks],e,t);o>0&&i.isInSet(n.parent.child(o-1).marks);)o-=1,s-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&l0([...n.parent.child(l).marks],e,t);)a+=n.parent.child(l).nodeSize,l+=1;return{from:s,to:a}}function rn(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const a0=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=rn(n,r.schema),{doc:s,selection:l}=t,{$from:a,from:u,to:c}=l;if(i){const d=El(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=j.create(s,d.from,d.to);t.setSelection(f)}}return!0},u0=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Ml(n){return n instanceof j}function Nt(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function yd(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?j.create(n,Nt(0,i,o),Nt(n.content.size,i,o)):j.create(n,Nt(e,i,o),Nt(e,i,o))}function Tl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const c0=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{Tl()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!Ml(t.state.selection))return s(),!0;const l=yd(i.doc,n)||t.state.selection,a=t.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},d0=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),f0=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function Xa(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Ji(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)?M.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Ji("",e,t)}if(typeof n=="string"){const r=tr.fromSchema(e);return t.slice?r.parseSlice(Xa(n),t.parseOptions).content:r.parse(Xa(n),t.parseOptions)}return Ji("",e,t)}function h0(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Ae||i instanceof ye))return;const o=n.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),n.setSelection(V.near(n.doc.resolve(s),t))}const p0=n=>n.toString().startsWith("<"),m0=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const s=Ji(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(s.toString()==="<>")return!0;let{from:l,to:a}=typeof n=="number"?{from:n,to:n}:n,u=!0,c=!0;if((p0(s)?s:[s]).forEach(f=>{f.check(),u=u?f.isText&&f.marks.length===0:!1,c=c?f.isBlock:!1}),l===a&&c){const{parent:f}=r.doc.resolve(l);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(l-=1,a+=1)}u?r.insertText(e,l,a):r.replaceWith(l,a,s),t.updateSelection&&h0(r,r.steps.length-1,-1)}return!0},g0=()=>({state:n,dispatch:e})=>yg(n,e),y0=()=>({state:n,dispatch:e})=>vg(n,e),v0=()=>({state:n,dispatch:e})=>fg(n,e),b0=()=>({state:n,dispatch:e})=>mg(n,e);function vd(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function w0(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Tl()||vd()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const D0=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=w0(n).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Xr(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,s=e?be(e,n.schema):null,l=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);l.push({node:d,from:h,to:p})});const a=i-r,u=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Gi(d.node.attrs,t,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const C0=(n,e={})=>({state:t,dispatch:r})=>{const i=be(n,t.schema);return Xr(t,i,e)?bg(t,r):!1},x0=()=>({state:n,dispatch:e})=>xg(n,e),k0=n=>({state:e,dispatch:t})=>{const r=be(n,e.schema);return Ng(r)(e,t)},S0=()=>({state:n,dispatch:e})=>wg(n,e);function Bo(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Qa(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const A0=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const l=Bo(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(o=be(n,r.schema)),l==="mark"&&(s=rn(n,r.schema)),i&&t.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&t.setNodeMarkup(c,void 0,Qa(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&t.addMark(c,c+u.nodeSize,s.create(Qa(d.attrs,e)))})})}),!0):!1},E0=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),M0=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),T0=()=>({state:n,dispatch:e})=>hg(n,e),O0=()=>({state:n,dispatch:e})=>gg(n,e),N0=()=>({state:n,dispatch:e})=>kg(n,e),F0=()=>({state:n,dispatch:e})=>Eg(n,e),I0=()=>({state:n,dispatch:e})=>Ag(n,e);function bd(n,e,t={}){return Ji(n,e,{slice:!1,parseOptions:t})}const B0=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,l=bd(n,i.schema,t);return o&&r.replaceWith(0,s.content.size,l).setMeta("preventUpdate",!e),!0};function P0(n,e){const t=new pl(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function R0(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function L0(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&r.push({node:i,pos:o})}),r}function wd(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Ol(n){return e=>wd(e.$from,n)}function z0(n,e){const t=yt.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function H0(n,e){const t={from:0,to:n.content.size};return md(n,t,e)}function Dd(n,e){const t=rn(e,n.schema),{from:r,to:i,empty:o}=n.selection,s=[];o?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function $0(n,e){const t=be(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===t.name);return s?{...s.attrs}:{}}function Cd(n,e){const t=Bo(typeof e=="string"?e:e.name,n.schema);return t==="node"?$0(n,e):t==="mark"?Dd(n,e):{}}function V0(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function j0(n){const e=V0(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,s)=>s!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function _0(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((l,a)=>{s.push({from:l,to:a})});else{const{from:l,to:a}=t[o];if(l===void 0||a===void 0)return;s.push({from:l,to:a})}s.forEach(({from:l,to:a})=>{const u=e.slice(o).map(l,-1),c=e.slice(o).map(a),d=e.invert().map(u,-1),f=e.invert().map(c);r.push({oldRange:{from:d,to:f},newRange:{from:u,to:c}})})}),j0(r)}function Yi(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n-1),s=El(o,i.type);s&&r.push({mark:i,...s})}):t.nodesBetween(n,e,(i,o)=>{r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function Ps(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?rn(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Gi(d.attrs,t,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const v=Math.max(h,g),b=Math.min(p,g+m.nodeSize),C=b-v;s+=C,l.push(...m.marks.map(y=>({mark:y,from:v,to:b})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Gi(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=s}function W0(n,e,t={}){if(!e)return Xr(n,null,t)||Ps(n,null,t);const r=Bo(e,n.schema);return r==="node"?Xr(n,e,t):r==="mark"?Ps(n,e,t):!1}function Za(n,e){const{nodeExtensions:t}=No(e),r=t.find(s=>s.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=K(P(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function U0(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function K0(n){return n instanceof $}function q0(n,e,t){const i=n.state.doc.content.size,o=Nt(e,0,i),s=Nt(t,0,i),l=n.coordsAtPos(o),a=n.coordsAtPos(s,-1),u=Math.min(l.top,a.top),c=Math.max(l.bottom,a.bottom),d=Math.min(l.left,a.left),f=Math.max(l.right,a.right),h=f-d,p=c-u,v={top:u,bottom:c,left:d,right:f,width:h,height:p,x:d,y:u};return{...v,toJSON:()=>v}}function G0(n,e,t){var r;const{selection:i}=e;let o=null;if(Ml(i)&&(o=i.$cursor),o){const l=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(t));u=h&&p}return!u}),u})}const J0=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:s,ranges:l}=o,a=rn(n,r.schema);if(i)if(s){const u=Dd(r,a);t.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),m=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===a)?f.marks.forEach(v=>{a===v.type&&t.addMark(p,m,a.create({...v.attrs,...e}))}):t.addMark(p,m,a.create(e))})});return G0(r,t,a)},Y0=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),X0=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=be(n,t.schema);return o.isTextblock?i().command(({commands:s})=>qa(o,e)(t)?!0:s.clearNodes()).command(({state:s})=>qa(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Q0=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Nt(n,0,r.content.size),o=$.create(r,i);e.setSelection(o)}return!0},Z0=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,s=j.atStart(r).from,l=j.atEnd(r).to,a=Nt(i,s,l),u=Nt(o,s,l),c=j.create(r,a,u);e.setSelection(c)}return!0},e1=n=>({state:e,dispatch:t})=>{const r=be(n,e.schema);return Bg(r)(e,t)};function Oi(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function eu(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const t1=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=Oi(u,l.node().type.name,l.node().attrs);if(o instanceof $&&o.node.isBlock)return!l.parentOffset||!Gn(s,l.pos)?!1:(r&&(n&&eu(t,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(r){const d=a.parentOffset===a.parent.content.size;o instanceof j&&e.deleteSelection();const f=l.depth===0?void 0:R0(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=Gn(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Gn(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),p&&(e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}n&&eu(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},n1=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var o;const s=be(n,t.schema),{$from:l,$to:a}=t.selection,u=t.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(a))return!1;const c=l.node(-1);if(c.type!==s)return!1;const d=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==s||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let g=M.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-v;T>=l.depth-3;T-=1)g=M.from(l.node(T).copy(g));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C=Oi(d,l.node().type.name,l.node().attrs),y=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;g=g.append(M.from(s.createAndFill(null,y)||void 0));const k=l.before(l.depth-(v-1));e.replace(k,l.after(-b),new I(g,4-v,0));let D=-1;e.doc.nodesBetween(k,e.doc.content.size,(T,E)=>{if(D>-1)return!1;T.isTextblock&&T.content.size===0&&(D=E+1)}),D>-1&&e.setSelection(j.near(e.doc.resolve(D))),e.scrollIntoView()}return!0}const f=a.pos===l.end()?c.contentMatchAt(0).defaultType:null,h=Oi(d,c.type.name,c.attrs),p=Oi(d,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const m=f?[{type:s,attrs:h},{type:f,attrs:p}]:[{type:s,attrs:h}];return Gn(e.doc,l.pos,2)?(r&&e.split(l.pos,2,m).scrollIntoView(),!0):!1},tu=(n,e)=>{const t=Ol(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&tn(n.doc,t.pos)&&n.join(t.pos),!0},nu=(n,e)=>{const t=Ol(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&tn(n.doc,r)&&n.join(r),!0},r1=(n,e)=>({editor:t,tr:r,state:i,dispatch:o,chain:s,commands:l,can:a})=>{const{extensions:u}=t.extensionManager,c=be(n,i.schema),d=be(e,i.schema),{selection:f}=i,{$from:h,$to:p}=f,m=h.blockRange(p);if(!m)return!1;const g=Ol(v=>Za(v.type.name,u))(f);if(m.depth>=1&&g&&m.depth-g.depth<=1){if(g.node.type===c)return l.liftListItem(d);if(Za(g.node.type.name,u)&&c.validContent(g.node.content)&&o)return s().command(()=>(r.setNodeMarkup(g.pos,c),!0)).command(()=>tu(r,c)).command(()=>nu(r,c)).run()}return s().command(()=>a().wrapInList(c)?!0:l.clearNodes()).wrapInList(c).command(()=>tu(r,c)).command(()=>nu(r,c)).run()},i1=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,s=rn(n,r.schema);return Ps(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},o1=(n,e,t={})=>({state:r,commands:i})=>{const o=be(n,r.schema),s=be(e,r.schema);return Xr(r,o,t)?i.setNode(s):i.setNode(o,t)},s1=(n,e={})=>({state:t,commands:r})=>{const i=be(n,t.schema);return Xr(t,i,e)?r.lift(i):r.wrapIn(i,e)},l1=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const s=n.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},a1=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},u1=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=t,a=rn(n,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&s){let{from:f,to:h}=l;const p=(o=u.marks().find(g=>g.type===a))===null||o===void 0?void 0:o.attrs,m=El(u,a,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,a)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,a)});return t.removeStoredMark(a),!0},c1=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,s=null;const l=Bo(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(o=be(n,r.schema)),l==="mark"&&(s=rn(n,r.schema)),i&&t.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;r.doc.nodesBetween(u,c,(d,f)=>{o&&o===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(h=>{if(s===h.type){const p=Math.max(f,u),m=Math.min(f+d.nodeSize,c);t.addMark(p,m,s.create({...h.attrs,...e}))}})})}),!0):!1},d1=(n,e={})=>({state:t,dispatch:r})=>{const i=be(n,t.schema);return Mg(i,e)(t,r)},f1=(n,e={})=>({state:t,dispatch:r})=>{const i=be(n,t.schema);return Tg(i,e)(t,r)};var h1=Object.freeze({__proto__:null,blur:Yg,clearContent:Xg,clearNodes:Qg,command:Zg,createParagraphNear:e0,deleteCurrentNode:t0,deleteNode:n0,deleteRange:r0,deleteSelection:i0,enter:o0,exitCode:s0,extendMarkRange:a0,first:u0,focus:c0,forEach:d0,insertContent:f0,insertContentAt:m0,joinUp:g0,joinDown:y0,joinBackward:v0,joinForward:b0,keyboardShortcut:D0,lift:C0,liftEmptyBlock:x0,liftListItem:k0,newlineInCode:S0,resetAttributes:A0,scrollIntoView:E0,selectAll:M0,selectNodeBackward:T0,selectNodeForward:O0,selectParentNode:N0,selectTextblockEnd:F0,selectTextblockStart:I0,setContent:B0,setMark:J0,setMeta:Y0,setNode:X0,setNodeSelection:Q0,setTextSelection:Z0,sinkListItem:e1,splitBlock:t1,splitListItem:n1,toggleList:r1,toggleMark:i1,toggleNode:o1,toggleWrap:s1,undoInputRule:l1,unsetAllMarks:a1,unsetMark:u1,updateAttributes:c1,wrapIn:d1,wrapInList:f1});const p1=Ee.create({name:"commands",addCommands(){return{...h1}}}),m1=Ee.create({name:"editable",addProseMirrorPlugins(){return[new pe({key:new Be("editable"),props:{editable:()=>this.editor.options.editable}})]}}),g1=Ee.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new pe({key:new Be("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),y1=Ee.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:h}=d,p=V.atStart(u).from===f;return!c||!p||!h.type.isTextblock||h.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Tl()||vd()?o:i},addProseMirrorPlugins(){return[new pe({key:new Be("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:o,to:s}=e.selection,l=V.atStart(e.doc).from,a=V.atEnd(e.doc).to,u=o===l&&s===a,c=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!u||!c)return;const d=t.tr,f=To({state:t,transaction:d}),{commands:h}=new Oo({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),v1=Ee.create({name:"tabindex",addProseMirrorPlugins(){return[new pe({key:new Be("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var b1=Object.freeze({__proto__:null,ClipboardTextSerializer:Jg,Commands:p1,Editable:m1,FocusEvents:g1,Keymap:y1,Tabindex:v1});const w1=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function D1(n,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}let C1=class extends Pg{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=D1(w1,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e}),this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=pd(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(b1):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Vn(t,this)}createCommandManager(){this.commandManager=new Oo({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=bd(this.options.content,this.schema,this.options.parseOptions),t=yd(e,this.options.autofocus);this.view=new Zm(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:zn.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Cd(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return W0(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return z0(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return H0(this.state.doc,{blockSeparator:t,textSerializers:{...r,...gd(this.schema)}})}get isEmpty(){return U0(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}};function kn(n){return new Fo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=K(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];let a=t.to;if(s){const u=l.search(/\S/),c=t.from+l.indexOf(s),d=c+s.length;if(Yi(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;d<t.to&&o.delete(d,t.to),c>t.from&&o.delete(t.from+u,c),a=t.from+u+s.length,o.addMark(t.from+u,a,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function xd(n){return new Fo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=K(n.getAttributes,void 0,r)||{},{tr:o}=e,s=t.from;let l=t.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);let u=s+a;u>l?u=l:l=u+r[1].length;const c=r[0][r[0].length-1];o.insertText(c,s+r[0].length-1),o.replaceWith(u,l,n.type.create(i))}else r[0]&&o.replaceWith(s,l,n.type.create(i))}})}function Rs(n){return new Fo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=K(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Nl(n){return new Fo({find:n.find,handler:({state:e,range:t,match:r})=>{const i=K(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),a=l&&fl(l,n.type,i);if(!a)return null;o.wrap(l,a);const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&tn(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}class ut{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=K(P(this,"addOptions",{name:this.name}))),this.storage=K(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ut(e)}configure(e={}){const t=this.extend();return t.options=Io(this.options,e),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new ut(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=K(P(t,"addOptions",{name:t.name})),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===t.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class ce{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=K(P(this,"addOptions",{name:this.name}))),this.storage=K(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ce(e)}configure(e={}){const t=this.extend();return t.options=Io(this.options,e),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new ce(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=K(P(t,"addOptions",{name:t.name})),t.storage=K(P(t,"addStorage",{name:t.name,options:t.options})),t}}function en(n){return new _g({find:n.find,handler:({state:e,range:t,match:r})=>{const i=K(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];let a=t.to;if(s){const u=l.search(/\S/),c=t.from+l.indexOf(s),d=c+s.length;if(Yi(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;d<t.to&&o.delete(d,t.to),c>t.from&&o.delete(t.from+u,c),a=t.from+u+s.length,o.addMark(t.from+u,a,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}var Le="top",Qe="bottom",Ze="right",ze="left",Fl="auto",ni=[Le,Qe,Ze,ze],lr="start",Qr="end",x1="clippingParents",kd="viewport",xr="popper",k1="reference",ru=ni.reduce(function(n,e){return n.concat([e+"-"+lr,e+"-"+Qr])},[]),Sd=[].concat(ni,[Fl]).reduce(function(n,e){return n.concat([e,e+"-"+lr,e+"-"+Qr])},[]),S1="beforeRead",A1="read",E1="afterRead",M1="beforeMain",T1="main",O1="afterMain",N1="beforeWrite",F1="write",I1="afterWrite",B1=[S1,A1,E1,M1,T1,O1,N1,F1,I1];function Ct(n){return n?(n.nodeName||"").toLowerCase():null}function tt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Sn(n){var e=tt(n).Element;return n instanceof e||n instanceof Element}function Xe(n){var e=tt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Il(n){if(typeof ShadowRoot>"u")return!1;var e=tt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function P1(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!Xe(o)||!Ct(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var l=i[s];l===!1?o.removeAttribute(s):o.setAttribute(s,l===!0?"":l)}))})}function R1(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),l=s.reduce(function(a,u){return a[u]="",a},{});!Xe(i)||!Ct(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(a){i.removeAttribute(a)}))})}}const Ad={name:"applyStyles",enabled:!0,phase:"write",fn:P1,effect:R1,requires:["computeStyles"]};function wt(n){return n.split("-")[0]}var bn=Math.max,Xi=Math.min,ar=Math.round;function Ls(){var n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ed(){return!/^((?!chrome|android).)*safari/i.test(Ls())}function ur(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&Xe(n)&&(i=n.offsetWidth>0&&ar(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&ar(r.height)/n.offsetHeight||1);var s=Sn(n)?tt(n):window,l=s.visualViewport,a=!Ed()&&t,u=(r.left+(a&&l?l.offsetLeft:0))/i,c=(r.top+(a&&l?l.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Bl(n){var e=ur(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Md(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Il(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Bt(n){return tt(n).getComputedStyle(n)}function L1(n){return["table","td","th"].indexOf(Ct(n))>=0}function on(n){return((Sn(n)?n.ownerDocument:n.document)||window.document).documentElement}function Po(n){return Ct(n)==="html"?n:n.assignedSlot||n.parentNode||(Il(n)?n.host:null)||on(n)}function iu(n){return!Xe(n)||Bt(n).position==="fixed"?null:n.offsetParent}function z1(n){var e=/firefox/i.test(Ls()),t=/Trident/i.test(Ls());if(t&&Xe(n)){var r=Bt(n);if(r.position==="fixed")return null}var i=Po(n);for(Il(i)&&(i=i.host);Xe(i)&&["html","body"].indexOf(Ct(i))<0;){var o=Bt(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ri(n){for(var e=tt(n),t=iu(n);t&&L1(t)&&Bt(t).position==="static";)t=iu(t);return t&&(Ct(t)==="html"||Ct(t)==="body"&&Bt(t).position==="static")?e:t||z1(n)||e}function Pl(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function zr(n,e,t){return bn(n,Xi(e,t))}function H1(n,e,t){var r=zr(n,e,t);return r>t?t:r}function Td(){return{top:0,right:0,bottom:0,left:0}}function Od(n){return Object.assign({},Td(),n)}function Nd(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var $1=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Od(typeof e!="number"?e:Nd(e,ni))};function V1(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,l=wt(t.placement),a=Pl(l),u=[ze,Ze].indexOf(l)>=0,c=u?"height":"width";if(!(!o||!s)){var d=$1(i.padding,t),f=Bl(o),h=a==="y"?Le:ze,p=a==="y"?Qe:Ze,m=t.rects.reference[c]+t.rects.reference[a]-s[a]-t.rects.popper[c],g=s[a]-t.rects.reference[a],v=ri(o),b=v?a==="y"?v.clientHeight||0:v.clientWidth||0:0,C=m/2-g/2,y=d[h],k=b-f[c]-d[p],D=b/2-f[c]/2+C,T=zr(y,D,k),E=a;t.modifiersData[r]=(e={},e[E]=T,e.centerOffset=T-D,e)}}function j1(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Md(e.elements.popper,i)&&(e.elements.arrow=i))}const _1={name:"arrow",enabled:!0,phase:"main",fn:V1,effect:j1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cr(n){return n.split("-")[1]}var W1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function U1(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:ar(e*i)/i||0,y:ar(t*i)/i||0}}function ou(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,l=n.position,a=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,d=n.isFixed,f=s.x,h=f===void 0?0:f,p=s.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),C=ze,y=Le,k=window;if(u){var D=ri(t),T="clientHeight",E="clientWidth";if(D===tt(t)&&(D=on(t),Bt(D).position!=="static"&&l==="absolute"&&(T="scrollHeight",E="scrollWidth")),D=D,i===Le||(i===ze||i===Ze)&&o===Qr){y=Qe;var O=d&&D===k&&k.visualViewport?k.visualViewport.height:D[T];m-=O-r.height,m*=a?1:-1}if(i===ze||(i===Le||i===Qe)&&o===Qr){C=Ze;var L=d&&D===k&&k.visualViewport?k.visualViewport.width:D[E];h-=L-r.width,h*=a?1:-1}}var S=Object.assign({position:l},u&&W1),B=c===!0?U1({x:h,y:m}):{x:h,y:m};if(h=B.x,m=B.y,a){var N;return Object.assign({},S,(N={},N[y]=b?"0":"",N[C]=v?"0":"",N.transform=(k.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",N))}return Object.assign({},S,(e={},e[y]=b?m+"px":"",e[C]=v?h+"px":"",e.transform="",e))}function K1(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,s=o===void 0?!0:o,l=t.roundOffsets,a=l===void 0?!0:l,u={placement:wt(e.placement),variation:cr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ou(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ou(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const q1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:K1,data:{}};var Di={passive:!0};function G1(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,l=s===void 0?!0:s,a=tt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",t.update,Di)}),l&&a.addEventListener("resize",t.update,Di),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",t.update,Di)}),l&&a.removeEventListener("resize",t.update,Di)}}const J1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:G1,data:{}};var Y1={left:"right",right:"left",bottom:"top",top:"bottom"};function Ni(n){return n.replace(/left|right|bottom|top/g,function(e){return Y1[e]})}var X1={start:"end",end:"start"};function su(n){return n.replace(/start|end/g,function(e){return X1[e]})}function Rl(n){var e=tt(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Ll(n){return ur(on(n)).left+Rl(n).scrollLeft}function Q1(n,e){var t=tt(n),r=on(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,l=0,a=0;if(i){o=i.width,s=i.height;var u=Ed();(u||!u&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:o,height:s,x:l+Ll(n),y:a}}function Z1(n){var e,t=on(n),r=Rl(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=bn(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=bn(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+Ll(n),a=-r.scrollTop;return Bt(i||t).direction==="rtl"&&(l+=bn(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:a}}function zl(n){var e=Bt(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function Fd(n){return["html","body","#document"].indexOf(Ct(n))>=0?n.ownerDocument.body:Xe(n)&&zl(n)?n:Fd(Po(n))}function Hr(n,e){var t;e===void 0&&(e=[]);var r=Fd(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=tt(r),s=i?[o].concat(o.visualViewport||[],zl(r)?r:[]):r,l=e.concat(s);return i?l:l.concat(Hr(Po(s)))}function zs(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function ey(n,e){var t=ur(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function lu(n,e,t){return e===kd?zs(Q1(n,t)):Sn(e)?ey(e,t):zs(Z1(on(n)))}function ty(n){var e=Hr(Po(n)),t=["absolute","fixed"].indexOf(Bt(n).position)>=0,r=t&&Xe(n)?ri(n):n;return Sn(r)?e.filter(function(i){return Sn(i)&&Md(i,r)&&Ct(i)!=="body"}):[]}function ny(n,e,t,r){var i=e==="clippingParents"?ty(n):[].concat(e),o=[].concat(i,[t]),s=o[0],l=o.reduce(function(a,u){var c=lu(n,u,r);return a.top=bn(c.top,a.top),a.right=Xi(c.right,a.right),a.bottom=Xi(c.bottom,a.bottom),a.left=bn(c.left,a.left),a},lu(n,s,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Id(n){var e=n.reference,t=n.element,r=n.placement,i=r?wt(r):null,o=r?cr(r):null,s=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,a;switch(i){case Le:a={x:s,y:e.y-t.height};break;case Qe:a={x:s,y:e.y+e.height};break;case Ze:a={x:e.x+e.width,y:l};break;case ze:a={x:e.x-t.width,y:l};break;default:a={x:e.x,y:e.y}}var u=i?Pl(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case lr:a[u]=a[u]-(e[c]/2-t[c]/2);break;case Qr:a[u]=a[u]+(e[c]/2-t[c]/2);break}}return a}function Zr(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.strategy,s=o===void 0?n.strategy:o,l=t.boundary,a=l===void 0?x1:l,u=t.rootBoundary,c=u===void 0?kd:u,d=t.elementContext,f=d===void 0?xr:d,h=t.altBoundary,p=h===void 0?!1:h,m=t.padding,g=m===void 0?0:m,v=Od(typeof g!="number"?g:Nd(g,ni)),b=f===xr?k1:xr,C=n.rects.popper,y=n.elements[p?b:f],k=ny(Sn(y)?y:y.contextElement||on(n.elements.popper),a,c,s),D=ur(n.elements.reference),T=Id({reference:D,element:C,strategy:"absolute",placement:i}),E=zs(Object.assign({},C,T)),O=f===xr?E:D,L={top:k.top-O.top+v.top,bottom:O.bottom-k.bottom+v.bottom,left:k.left-O.left+v.left,right:O.right-k.right+v.right},S=n.modifiersData.offset;if(f===xr&&S){var B=S[i];Object.keys(L).forEach(function(N){var U=[Ze,Qe].indexOf(N)>=0?1:-1,q=[Le,Qe].indexOf(N)>=0?"y":"x";L[N]+=B[q]*U})}return L}function ry(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,s=t.padding,l=t.flipVariations,a=t.allowedAutoPlacements,u=a===void 0?Sd:a,c=cr(r),d=c?l?ru:ru.filter(function(p){return cr(p)===c}):ni,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=Zr(n,{placement:m,boundary:i,rootBoundary:o,padding:s})[wt(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function iy(n){if(wt(n)===Fl)return[];var e=Ni(n);return[su(n),e,su(e)]}function oy(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,l=s===void 0?!0:s,a=t.fallbackPlacements,u=t.padding,c=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,g=e.options.placement,v=wt(g),b=v===g,C=a||(b||!p?[Ni(g)]:iy(g)),y=[g].concat(C).reduce(function(kt,nt){return kt.concat(wt(nt)===Fl?ry(e,{placement:nt,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):nt)},[]),k=e.rects.reference,D=e.rects.popper,T=new Map,E=!0,O=y[0],L=0;L<y.length;L++){var S=y[L],B=wt(S),N=cr(S)===lr,U=[Le,Qe].indexOf(B)>=0,q=U?"width":"height",G=Zr(e,{placement:S,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),ne=U?N?Ze:ze:N?Qe:Le;k[q]>D[q]&&(ne=Ni(ne));var de=Ni(ne),re=[];if(o&&re.push(G[B]<=0),l&&re.push(G[ne]<=0,G[de]<=0),re.every(function(kt){return kt})){O=S,E=!1;break}T.set(S,re)}if(E)for(var ie=p?3:1,$e=function(nt){var St=y.find(function(Mn){var At=T.get(Mn);if(At)return At.slice(0,nt).every(function(Tn){return Tn})});if(St)return O=St,"break"},dt=ie;dt>0;dt--){var sn=$e(dt);if(sn==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const sy={name:"flip",enabled:!0,phase:"main",fn:oy,requiresIfExists:["offset"],data:{_skip:!1}};function au(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function uu(n){return[Le,Ze,Qe,ze].some(function(e){return n[e]>=0})}function ly(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Zr(e,{elementContext:"reference"}),l=Zr(e,{altBoundary:!0}),a=au(s,r),u=au(l,i,o),c=uu(a),d=uu(u);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const ay={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ly};function uy(n,e,t){var r=wt(n),i=[ze,Le].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=o[0],l=o[1];return s=s||0,l=(l||0)*i,[ze,Ze].indexOf(r)>=0?{x:l,y:s}:{x:s,y:l}}function cy(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,s=Sd.reduce(function(c,d){return c[d]=uy(d,e.rects,o),c},{}),l=s[e.placement],a=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}const dy={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cy};function fy(n){var e=n.state,t=n.name;e.modifiersData[t]=Id({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hy={name:"popperOffsets",enabled:!0,phase:"read",fn:fy,data:{}};function py(n){return n==="x"?"y":"x"}function my(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,l=s===void 0?!1:s,a=t.boundary,u=t.rootBoundary,c=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,g=Zr(e,{boundary:a,rootBoundary:u,padding:d,altBoundary:c}),v=wt(e.placement),b=cr(e.placement),C=!b,y=Pl(v),k=py(y),D=e.modifiersData.popperOffsets,T=e.rects.reference,E=e.rects.popper,O=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,L=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(D){if(o){var N,U=y==="y"?Le:ze,q=y==="y"?Qe:Ze,G=y==="y"?"height":"width",ne=D[y],de=ne+g[U],re=ne-g[q],ie=h?-E[G]/2:0,$e=b===lr?T[G]:E[G],dt=b===lr?-E[G]:-T[G],sn=e.elements.arrow,kt=h&&sn?Bl(sn):{width:0,height:0},nt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Td(),St=nt[U],Mn=nt[q],At=zr(0,T[G],kt[G]),Tn=C?T[G]/2-ie-At-St-L.mainAxis:$e-At-St-L.mainAxis,Pt=C?-T[G]/2+ie+At+Mn+L.mainAxis:dt+At+Mn+L.mainAxis,On=e.elements.arrow&&ri(e.elements.arrow),oi=On?y==="y"?On.clientTop||0:On.clientLeft||0:0,gr=(N=S==null?void 0:S[y])!=null?N:0,si=ne+Tn-gr-oi,li=ne+Pt-gr,yr=zr(h?Xi(de,si):de,ne,h?bn(re,li):re);D[y]=yr,B[y]=yr-ne}if(l){var vr,ai=y==="x"?Le:ze,ui=y==="x"?Qe:Ze,Et=D[k],Rt=k==="y"?"height":"width",br=Et+g[ai],ln=Et-g[ui],wr=[Le,ze].indexOf(v)!==-1,ci=(vr=S==null?void 0:S[k])!=null?vr:0,di=wr?br:Et-T[Rt]-E[Rt]-ci+L.altAxis,fi=wr?Et+T[Rt]+E[Rt]-ci-L.altAxis:ln,hi=h&&wr?H1(di,Et,fi):zr(h?di:br,Et,h?fi:ln);D[k]=hi,B[k]=hi-Et}e.modifiersData[r]=B}}const gy={name:"preventOverflow",enabled:!0,phase:"main",fn:my,requiresIfExists:["offset"]};function yy(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function vy(n){return n===tt(n)||!Xe(n)?Rl(n):yy(n)}function by(n){var e=n.getBoundingClientRect(),t=ar(e.width)/n.offsetWidth||1,r=ar(e.height)/n.offsetHeight||1;return t!==1||r!==1}function wy(n,e,t){t===void 0&&(t=!1);var r=Xe(e),i=Xe(e)&&by(e),o=on(e),s=ur(n,i,t),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!t)&&((Ct(e)!=="body"||zl(o))&&(l=vy(e)),Xe(e)?(a=ur(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=Ll(o))),{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function Dy(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(l){if(!t.has(l)){var a=e.get(l);a&&i(a)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function Cy(n){var e=Dy(n);return B1.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function xy(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function ky(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var cu={placement:"bottom",modifiers:[],strategy:"absolute"};function du(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Sy(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?cu:i;return function(l,a,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},cu,o),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},o,c.options,b),c.scrollParents={reference:Sn(l)?Hr(l):l.contextElement?Hr(l.contextElement):[],popper:Hr(a)};var C=Cy(ky([].concat(r,c.options.modifiers)));return c.orderedModifiers=C.filter(function(y){return y.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,b=v.reference,C=v.popper;if(du(b,C)){c.rects={reference:wy(b,ri(C),c.options.strategy==="fixed"),popper:Bl(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var k=c.orderedModifiers[y],D=k.fn,T=k.options,E=T===void 0?{}:T,O=k.name;typeof D=="function"&&(c=D({state:c,options:E,name:O,instance:h})||c)}}}},update:xy(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),f=!0}};if(!du(l,a))return h;h.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,C=b===void 0?{}:b,y=g.effect;if(typeof y=="function"){var k=y({state:c,name:v,instance:h,options:C}),D=function(){};d.push(k||D)}})}function m(){d.forEach(function(g){return g()}),d=[]}return h}}var Ay=[J1,hy,q1,Ad,dy,sy,gy,_1,ay],Ey=Sy({defaultModifiers:Ay}),My="tippy-box",Bd="tippy-content",Ty="tippy-backdrop",Pd="tippy-arrow",Rd="tippy-svg-arrow",cn={passive:!0,capture:!0},Ld=function(){return document.body};function us(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Hl(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function zd(n,e){return typeof n=="function"?n.apply(void 0,e):n}function fu(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function Oy(n){return n.split(/\s+/).filter(Boolean)}function Rn(n){return[].concat(n)}function hu(n,e){n.indexOf(e)===-1&&n.push(e)}function Ny(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function Fy(n){return n.split("-")[0]}function Qi(n){return[].slice.call(n)}function pu(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function $r(){return document.createElement("div")}function Ro(n){return["Element","Fragment"].some(function(e){return Hl(n,e)})}function Iy(n){return Hl(n,"NodeList")}function By(n){return Hl(n,"MouseEvent")}function Py(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Ry(n){return Ro(n)?[n]:Iy(n)?Qi(n):Array.isArray(n)?n:Qi(document.querySelectorAll(n))}function cs(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function mu(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Ly(n){var e,t=Rn(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function zy(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var o=i.popperRect,s=i.popperState,l=i.props,a=l.interactiveBorder,u=Fy(s.placement),c=s.modifiersData.offset;if(!c)return!0;var d=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,p=u==="left"?c.right.x:0,m=o.top-r+d>a,g=r-o.bottom-f>a,v=o.left-t+h>a,b=t-o.right-p>a;return m||g||v||b})}function ds(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function gu(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var pt={isTouch:!1},yu=0;function Hy(){pt.isTouch||(pt.isTouch=!0,window.performance&&document.addEventListener("mousemove",Hd))}function Hd(){var n=performance.now();n-yu<20&&(pt.isTouch=!1,document.removeEventListener("mousemove",Hd)),yu=n}function $y(){var n=document.activeElement;if(Py(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function Vy(){document.addEventListener("touchstart",Hy,cn),window.addEventListener("blur",$y)}var jy=typeof window<"u"&&typeof document<"u",_y=jy?!!window.msCrypto:!1,Wy={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Uy={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ot=Object.assign({appendTo:Ld,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Wy,Uy),Ky=Object.keys(ot),qy=function(e){var t=Object.keys(e);t.forEach(function(r){ot[r]=e[r]})};function $d(n){var e=n.plugins||[],t=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var l;r[o]=n[o]!==void 0?n[o]:(l=ot[o])!=null?l:s}return r},{});return Object.assign({},n,t)}function Gy(n,e){var t=e?Object.keys($d(Object.assign({},ot,{plugins:e}))):Ky,r=t.reduce(function(i,o){var s=(n.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function vu(n,e){var t=Object.assign({},e,{content:zd(e.content,[n])},e.ignoreAttributes?{}:Gy(n,e.plugins));return t.aria=Object.assign({},ot.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var Jy=function(){return"innerHTML"};function Hs(n,e){n[Jy()]=e}function bu(n){var e=$r();return n===!0?e.className=Pd:(e.className=Rd,Ro(n)?e.appendChild(n):Hs(e,n)),e}function wu(n,e){Ro(e.content)?(Hs(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Hs(n,e.content):n.textContent=e.content)}function $s(n){var e=n.firstElementChild,t=Qi(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(Bd)}),arrow:t.find(function(r){return r.classList.contains(Pd)||r.classList.contains(Rd)}),backdrop:t.find(function(r){return r.classList.contains(Ty)})}}function Vd(n){var e=$r(),t=$r();t.className=My,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=$r();r.className=Bd,r.setAttribute("data-state","hidden"),wu(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(o,s){var l=$s(e),a=l.box,u=l.content,c=l.arrow;s.theme?a.setAttribute("data-theme",s.theme):a.removeAttribute("data-theme"),typeof s.animation=="string"?a.setAttribute("data-animation",s.animation):a.removeAttribute("data-animation"),s.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?a.setAttribute("role",s.role):a.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&wu(u,n.props),s.arrow?c?o.arrow!==s.arrow&&(a.removeChild(c),a.appendChild(bu(s.arrow))):a.appendChild(bu(s.arrow)):c&&a.removeChild(c)}return{popper:e,onUpdate:i}}Vd.$$tippy=!0;var Yy=1,Ci=[],fs=[];function Xy(n,e){var t=vu(n,Object.assign({},ot,$d(pu(e)))),r,i,o,s=!1,l=!1,a=!1,u=!1,c,d,f,h=[],p=fu(si,t.interactiveDebounce),m,g=Yy++,v=null,b=Ny(t.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:g,reference:n,popper:$r(),popperInstance:v,props:t,state:C,plugins:b,clearDelayTimeouts:di,setProps:fi,setContent:hi,show:yf,hide:vf,hideWithInteractivity:bf,enable:wr,disable:ci,unmount:wf,destroy:Df};if(!t.render)return y;var k=t.render(y),D=k.popper,T=k.onUpdate;D.setAttribute("data-tippy-root",""),D.id="tippy-"+y.id,y.popper=D,n._tippy=y,D._tippy=y;var E=b.map(function(x){return x.fn(y)}),O=n.hasAttribute("aria-expanded");return On(),ie(),ne(),de("onCreate",[y]),t.showOnCreate&&br(),D.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),D.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&U().addEventListener("mousemove",p)}),y;function L(){var x=y.props.touch;return Array.isArray(x)?x:[x,0]}function S(){return L()[0]==="hold"}function B(){var x;return!!((x=y.props.render)!=null&&x.$$tippy)}function N(){return m||n}function U(){var x=N().parentNode;return x?Ly(x):document}function q(){return $s(D)}function G(x){return y.state.isMounted&&!y.state.isVisible||pt.isTouch||c&&c.type==="focus"?0:us(y.props.delay,x?0:1,ot.delay)}function ne(x){x===void 0&&(x=!1),D.style.pointerEvents=y.props.interactive&&!x?"":"none",D.style.zIndex=""+y.props.zIndex}function de(x,R,_){if(_===void 0&&(_=!0),E.forEach(function(Q){Q[x]&&Q[x].apply(Q,R)}),_){var Z;(Z=y.props)[x].apply(Z,R)}}function re(){var x=y.props.aria;if(x.content){var R="aria-"+x.content,_=D.id,Z=Rn(y.props.triggerTarget||n);Z.forEach(function(Q){var Te=Q.getAttribute(R);if(y.state.isVisible)Q.setAttribute(R,Te?Te+" "+_:_);else{var We=Te&&Te.replace(_,"").trim();We?Q.setAttribute(R,We):Q.removeAttribute(R)}})}}function ie(){if(!(O||!y.props.aria.expanded)){var x=Rn(y.props.triggerTarget||n);x.forEach(function(R){y.props.interactive?R.setAttribute("aria-expanded",y.state.isVisible&&R===N()?"true":"false"):R.removeAttribute("aria-expanded")})}}function $e(){U().removeEventListener("mousemove",p),Ci=Ci.filter(function(x){return x!==p})}function dt(x){if(!(pt.isTouch&&(a||x.type==="mousedown"))){var R=x.composedPath&&x.composedPath()[0]||x.target;if(!(y.props.interactive&&gu(D,R))){if(Rn(y.props.triggerTarget||n).some(function(_){return gu(_,R)})){if(pt.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else de("onClickOutside",[y,x]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),l=!0,setTimeout(function(){l=!1}),y.state.isMounted||St())}}}function sn(){a=!0}function kt(){a=!1}function nt(){var x=U();x.addEventListener("mousedown",dt,!0),x.addEventListener("touchend",dt,cn),x.addEventListener("touchstart",kt,cn),x.addEventListener("touchmove",sn,cn)}function St(){var x=U();x.removeEventListener("mousedown",dt,!0),x.removeEventListener("touchend",dt,cn),x.removeEventListener("touchstart",kt,cn),x.removeEventListener("touchmove",sn,cn)}function Mn(x,R){Tn(x,function(){!y.state.isVisible&&D.parentNode&&D.parentNode.contains(D)&&R()})}function At(x,R){Tn(x,R)}function Tn(x,R){var _=q().box;function Z(Q){Q.target===_&&(ds(_,"remove",Z),R())}if(x===0)return R();ds(_,"remove",d),ds(_,"add",Z),d=Z}function Pt(x,R,_){_===void 0&&(_=!1);var Z=Rn(y.props.triggerTarget||n);Z.forEach(function(Q){Q.addEventListener(x,R,_),h.push({node:Q,eventType:x,handler:R,options:_})})}function On(){S()&&(Pt("touchstart",gr,{passive:!0}),Pt("touchend",li,{passive:!0})),Oy(y.props.trigger).forEach(function(x){if(x!=="manual")switch(Pt(x,gr),x){case"mouseenter":Pt("mouseleave",li);break;case"focus":Pt(_y?"focusout":"blur",yr);break;case"focusin":Pt("focusout",yr);break}})}function oi(){h.forEach(function(x){var R=x.node,_=x.eventType,Z=x.handler,Q=x.options;R.removeEventListener(_,Z,Q)}),h=[]}function gr(x){var R,_=!1;if(!(!y.state.isEnabled||vr(x)||l)){var Z=((R=c)==null?void 0:R.type)==="focus";c=x,m=x.currentTarget,ie(),!y.state.isVisible&&By(x)&&Ci.forEach(function(Q){return Q(x)}),x.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||s)&&y.props.hideOnClick!==!1&&y.state.isVisible?_=!0:br(x),x.type==="click"&&(s=!_),_&&!Z&&ln(x)}}function si(x){var R=x.target,_=N().contains(R)||D.contains(R);if(!(x.type==="mousemove"&&_)){var Z=Rt().concat(D).map(function(Q){var Te,We=Q._tippy,Nn=(Te=We.popperInstance)==null?void 0:Te.state;return Nn?{popperRect:Q.getBoundingClientRect(),popperState:Nn,props:t}:null}).filter(Boolean);zy(Z,x)&&($e(),ln(x))}}function li(x){var R=vr(x)||y.props.trigger.indexOf("click")>=0&&s;if(!R){if(y.props.interactive){y.hideWithInteractivity(x);return}ln(x)}}function yr(x){y.props.trigger.indexOf("focusin")<0&&x.target!==N()||y.props.interactive&&x.relatedTarget&&D.contains(x.relatedTarget)||ln(x)}function vr(x){return pt.isTouch?S()!==x.type.indexOf("touch")>=0:!1}function ai(){ui();var x=y.props,R=x.popperOptions,_=x.placement,Z=x.offset,Q=x.getReferenceClientRect,Te=x.moveTransition,We=B()?$s(D).arrow:null,Nn=Q?{getBoundingClientRect:Q,contextElement:Q.contextElement||N()}:n,Ql={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(pi){var Fn=pi.state;if(B()){var Cf=q(),Ho=Cf.box;["placement","reference-hidden","escaped"].forEach(function(mi){mi==="placement"?Ho.setAttribute("data-placement",Fn.placement):Fn.attributes.popper["data-popper-"+mi]?Ho.setAttribute("data-"+mi,""):Ho.removeAttribute("data-"+mi)}),Fn.attributes.popper={}}}},an=[{name:"offset",options:{offset:Z}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Te}},Ql];B()&&We&&an.push({name:"arrow",options:{element:We,padding:3}}),an.push.apply(an,(R==null?void 0:R.modifiers)||[]),y.popperInstance=Ey(Nn,D,Object.assign({},R,{placement:_,onFirstUpdate:f,modifiers:an}))}function ui(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function Et(){var x=y.props.appendTo,R,_=N();y.props.interactive&&x===Ld||x==="parent"?R=_.parentNode:R=zd(x,[_]),R.contains(D)||R.appendChild(D),y.state.isMounted=!0,ai()}function Rt(){return Qi(D.querySelectorAll("[data-tippy-root]"))}function br(x){y.clearDelayTimeouts(),x&&de("onTrigger",[y,x]),nt();var R=G(!0),_=L(),Z=_[0],Q=_[1];pt.isTouch&&Z==="hold"&&Q&&(R=Q),R?r=setTimeout(function(){y.show()},R):y.show()}function ln(x){if(y.clearDelayTimeouts(),de("onUntrigger",[y,x]),!y.state.isVisible){St();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(x.type)>=0&&s)){var R=G(!1);R?i=setTimeout(function(){y.state.isVisible&&y.hide()},R):o=requestAnimationFrame(function(){y.hide()})}}function wr(){y.state.isEnabled=!0}function ci(){y.hide(),y.state.isEnabled=!1}function di(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function fi(x){if(!y.state.isDestroyed){de("onBeforeUpdate",[y,x]),oi();var R=y.props,_=vu(n,Object.assign({},R,pu(x),{ignoreAttributes:!0}));y.props=_,On(),R.interactiveDebounce!==_.interactiveDebounce&&($e(),p=fu(si,_.interactiveDebounce)),R.triggerTarget&&!_.triggerTarget?Rn(R.triggerTarget).forEach(function(Z){Z.removeAttribute("aria-expanded")}):_.triggerTarget&&n.removeAttribute("aria-expanded"),ie(),ne(),T&&T(R,_),y.popperInstance&&(ai(),Rt().forEach(function(Z){requestAnimationFrame(Z._tippy.popperInstance.forceUpdate)})),de("onAfterUpdate",[y,x])}}function hi(x){y.setProps({content:x})}function yf(){var x=y.state.isVisible,R=y.state.isDestroyed,_=!y.state.isEnabled,Z=pt.isTouch&&!y.props.touch,Q=us(y.props.duration,0,ot.duration);if(!(x||R||_||Z)&&!N().hasAttribute("disabled")&&(de("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,B()&&(D.style.visibility="visible"),ne(),nt(),y.state.isMounted||(D.style.transition="none"),B()){var Te=q(),We=Te.box,Nn=Te.content;cs([We,Nn],0)}f=function(){var an;if(!(!y.state.isVisible||u)){if(u=!0,D.offsetHeight,D.style.transition=y.props.moveTransition,B()&&y.props.animation){var zo=q(),pi=zo.box,Fn=zo.content;cs([pi,Fn],Q),mu([pi,Fn],"visible")}re(),ie(),hu(fs,y),(an=y.popperInstance)==null||an.forceUpdate(),de("onMount",[y]),y.props.animation&&B()&&At(Q,function(){y.state.isShown=!0,de("onShown",[y])})}},Et()}}function vf(){var x=!y.state.isVisible,R=y.state.isDestroyed,_=!y.state.isEnabled,Z=us(y.props.duration,1,ot.duration);if(!(x||R||_)&&(de("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,u=!1,s=!1,B()&&(D.style.visibility="hidden"),$e(),St(),ne(!0),B()){var Q=q(),Te=Q.box,We=Q.content;y.props.animation&&(cs([Te,We],Z),mu([Te,We],"hidden"))}re(),ie(),y.props.animation?B()&&Mn(Z,y.unmount):y.unmount()}}function bf(x){U().addEventListener("mousemove",p),hu(Ci,p),p(x)}function wf(){y.state.isVisible&&y.hide(),y.state.isMounted&&(ui(),Rt().forEach(function(x){x._tippy.unmount()}),D.parentNode&&D.parentNode.removeChild(D),fs=fs.filter(function(x){return x!==y}),y.state.isMounted=!1,de("onHidden",[y]))}function Df(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),oi(),delete n._tippy,y.state.isDestroyed=!0,de("onDestroy",[y]))}}function ii(n,e){e===void 0&&(e={});var t=ot.plugins.concat(e.plugins||[]);Vy();var r=Object.assign({},e,{plugins:t}),i=Ry(n),o=i.reduce(function(s,l){var a=l&&Xy(l,r);return a&&s.push(a),s},[]);return Ro(n)?o[0]:o}ii.defaultProps=ot;ii.setDefaultProps=qy;ii.currentInput=pt;Object.assign({},Ad,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});ii.setDefaultProps({render:Vd});var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qy(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var jd=Qy,Zy=typeof xi=="object"&&xi&&xi.Object===Object&&xi,ev=Zy,tv=ev,nv=typeof self=="object"&&self&&self.Object===Object&&self,rv=tv||nv||Function("return this")(),_d=rv,iv=_d,ov=function(){return iv.Date.now()},sv=ov,lv=/\s/;function av(n){for(var e=n.length;e--&&lv.test(n.charAt(e)););return e}var uv=av,cv=uv,dv=/^\s+/;function fv(n){return n&&n.slice(0,cv(n)+1).replace(dv,"")}var hv=fv,pv=_d,mv=pv.Symbol,Wd=mv,Du=Wd,Ud=Object.prototype,gv=Ud.hasOwnProperty,yv=Ud.toString,kr=Du?Du.toStringTag:void 0;function vv(n){var e=gv.call(n,kr),t=n[kr];try{n[kr]=void 0;var r=!0}catch{}var i=yv.call(n);return r&&(e?n[kr]=t:delete n[kr]),i}var bv=vv,wv=Object.prototype,Dv=wv.toString;function Cv(n){return Dv.call(n)}var xv=Cv,Cu=Wd,kv=bv,Sv=xv,Av="[object Null]",Ev="[object Undefined]",xu=Cu?Cu.toStringTag:void 0;function Mv(n){return n==null?n===void 0?Ev:Av:xu&&xu in Object(n)?kv(n):Sv(n)}var Tv=Mv;function Ov(n){return n!=null&&typeof n=="object"}var Nv=Ov,Fv=Tv,Iv=Nv,Bv="[object Symbol]";function Pv(n){return typeof n=="symbol"||Iv(n)&&Fv(n)==Bv}var Rv=Pv,Lv=hv,ku=jd,zv=Rv,Su=0/0,Hv=/^[-+]0x[0-9a-f]+$/i,$v=/^0b[01]+$/i,Vv=/^0o[0-7]+$/i,jv=parseInt;function _v(n){if(typeof n=="number")return n;if(zv(n))return Su;if(ku(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=ku(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Lv(n);var t=$v.test(n);return t||Vv.test(n)?jv(n.slice(2),t?2:8):Hv.test(n)?Su:+n}var Wv=_v,Uv=jd,hs=sv,Au=Wv,Kv="Expected a function",qv=Math.max,Gv=Math.min;function Jv(n,e,t){var r,i,o,s,l,a,u=0,c=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(Kv);e=Au(e)||0,Uv(t)&&(c=!!t.leading,d="maxWait"in t,o=d?qv(Au(t.maxWait)||0,e):o,f="trailing"in t?!!t.trailing:f);function h(D){var T=r,E=i;return r=i=void 0,u=D,s=n.apply(E,T),s}function p(D){return u=D,l=setTimeout(v,e),c?h(D):s}function m(D){var T=D-a,E=D-u,O=e-T;return d?Gv(O,o-E):O}function g(D){var T=D-a,E=D-u;return a===void 0||T>=e||T<0||d&&E>=o}function v(){var D=hs();if(g(D))return b(D);l=setTimeout(v,m(D))}function b(D){return l=void 0,f&&r?h(D):(r=i=void 0,s)}function C(){l!==void 0&&clearTimeout(l),u=0,r=a=i=l=void 0}function y(){return l===void 0?s:b(hs())}function k(){var D=hs(),T=g(D);if(r=arguments,i=this,a=D,T){if(l===void 0)return p(a);if(d)return clearTimeout(l),l=setTimeout(v,e),h(a)}return l===void 0&&(l=setTimeout(v,e)),s}return k.cancel=C,k.flush=y,k}var Yv=Jv;class Xv{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:l,state:a,from:u,to:c})=>{const{doc:d,selection:f}=a,{empty:h}=f,p=!d.textBetween(u,c).length&&Ml(a.selection),m=this.element.contains(document.activeElement);return!(!(l.hasFocus()||m)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var a;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(l.relatedTarget))||this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.updateHandler=(l,a)=>{var u,c,d;const{state:f,composing:h}=l,{doc:p,selection:m}=f,g=a&&a.doc.eq(p)&&a.selection.eq(m);if(h||g)return;this.createTooltip();const{ranges:v}=m,b=Math.min(...v.map(k=>k.$from.pos)),C=Math.max(...v.map(k=>k.$to.pos));if(!((u=this.shouldShow)===null||u===void 0?void 0:u.call(this,{editor:this.editor,view:l,state:f,oldState:a,from:b,to:C}))){this.hide();return}(c=this.tippy)===null||c===void 0||c.setProps({getReferenceClientRect:((d=this.tippyOptions)===null||d===void 0?void 0:d.getReferenceClientRect)||(()=>{if(K0(f.selection)){const k=l.nodeDOM(b);if(k)return k.getBoundingClientRect()}return q0(l,b,C)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=ii(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.$from.pos!==r.selection.$to.pos;this.updateDelay>0&&i?Yv(this.updateHandler,this.updateDelay)(e,t):this.updateHandler(e,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Kd=n=>new pe({key:typeof n.pluginKey=="string"?new Be(n.pluginKey):n.pluginKey,view:e=>new Xv({view:e,...n})});Ee.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Kd({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});const Qv=n=>{const[e,t]=A.useState(null);return A.useEffect(()=>{if(!e||n.editor.isDestroyed)return;const{pluginKey:r="bubbleMenu",editor:i,tippyOptions:o={},updateDelay:s,shouldShow:l=null}=n,a=Kd({updateDelay:s,editor:i,element:e,pluginKey:r,shouldShow:l,tippyOptions:o});return i.registerPlugin(a),()=>i.unregisterPlugin(r)},[n.editor,e]),W.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)};class Zv extends C1{constructor(){super(...arguments),this.contentComponent=null}}const eb=({renderers:n})=>W.createElement(W.Fragment,null,Object.entries(n).map(([e,t])=>kf.createPortal(t.reactElement,t.element,e)));class tb extends W.Component{constructor(e){super(e),this.editorContentRef=W.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?xf.flushSync(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{const r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,...t}=this.props;return W.createElement(W.Fragment,null,W.createElement("div",{ref:this.editorContentRef,...t}),W.createElement(eb,{renderers:this.state.renderers}))}}const qd=W.memo(tb),nb=A.createContext({onDragStart:void 0}),rb=()=>A.useContext(nb);W.forwardRef((n,e)=>{const{onDragStart:t}=rb(),r=n.as||"div";return W.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function ib(){const[,n]=A.useState(0);return()=>n(e=>e+1)}const Gd=(n={},e=[])=>{const[t,r]=A.useState(null),i=ib();return A.useEffect(()=>{let o=!0;const s=new Zv(n);return r(s),s.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{o&&i()})})}),()=>{s.destroy(),o=!1}},e),t},ob=/^\s*>\s$/,sb=ce.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Nl({find:ob,type:this.type})]}}),lb=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,ab=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,ub=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,cb=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,db=ut.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[kn({find:lb,type:this.type}),kn({find:ub,type:this.type})]},addPasteRules(){return[en({find:ab,type:this.type}),en({find:cb,type:this.type})]}}),fb=/^\s*([-+*])\s$/,hb=ce.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",se(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Nl({find:fb,type:this.type})]}}),pb=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,mb=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,gb=ut.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[kn({find:pb,type:this.type})]},addPasteRules(){return[en({find:mb,type:this.type})]}}),yb=/^```([a-z]+)?[\s\n]$/,vb=/^~~~([a-z]+)?[\s\n]$/,bb=ce.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",se(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:n.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0||r.nodeAt(l)?!1:n.commands.exitCode()}}},addInputRules(){return[Rs({find:yb,type:this.type,getAttributes:n=>({language:n[1]})}),Rs({find:vb,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new pe({key:new Be("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:s}=n.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(j.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(t.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),wb=ce.create({name:"doc",topNode:!0,content:"block+"});function Db(n={}){return new pe({view(e){return new Cb(e,n)}})}class Cb{constructor(e,t){this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=o=>{this[r](o)};return e.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t;if(!e.parent.inlineContent){let s=e.nodeBefore,l=e.nodeAfter;if(s||l){let a=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0));if(a){let u=a.getBoundingClientRect(),c=s?u.bottom:u.top;s&&l&&(c=(c+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:u.left,right:u.right,top:c-this.width/2,bottom:c+this.width/2}}}}if(!t){let s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);let i,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")i=-pageXOffset,o=-pageYOffset;else{let s=r.getBoundingClientRect();i=s.left-r.scrollLeft,o=s.top-r.scrollTop}this.element.style.left=t.left-i+"px",this.element.style.top=t.top-o+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(s=xc(this.editorView.state.doc,s,this.editorView.dragging.slice),s==null))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const xb=Ee.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Db(this.options)]}});class ae extends V{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return ae.valid(r)?new ae(r):V.near(r)}content(){return I.empty}eq(e){return e instanceof ae&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ae(e.resolve(t.pos))}getBookmark(){return new $l(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!kb(e)||!Sb(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&ae.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let a=e.doc.resolve(i);if(ae.valid(a))return a}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!$.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let l=e.doc.resolve(i);if(ae.valid(l))return l}return null}}}ae.prototype.visible=!1;ae.findFrom=ae.findGapCursorFrom;V.jsonID("gapcursor",ae);class $l{constructor(e){this.pos=e}map(e){return new $l(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ae.valid(t)?new ae(t):V.near(t)}}function kb(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Sb(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Ab(){return new pe({props:{decorations:Ob,createSelectionBetween(n,e,t){return e.pos==t.pos&&ae.valid(t)?new ae(t):null},handleClick:Mb,handleKeyDown:Eb,handleDOMEvents:{beforeinput:Tb}}})}const Eb=Sl({ArrowLeft:ki("horiz",-1),ArrowRight:ki("horiz",1),ArrowUp:ki("vert",-1),ArrowDown:ki("vert",1)});function ki(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof j){if(!o.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=ae.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new ae(u))),!0):!1}}function Mb(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ae.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&$.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ae(r))),!0)}function Tb(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ae))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=M.empty;for(let s=r.length-1;s>=0;s--)i=M.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new I(i,0,0));return o.setSelection(j.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function Ob(n){if(!(n.selection instanceof ae))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",le.create(n.doc,[Oe.widget(n.selection.head,e,{key:"gapcursor"})])}const Nb=Ee.create({name:"gapCursor",addProseMirrorPlugins(){return[Ab()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=K(P(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Fb=ce.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",se(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ib=ce.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,se(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Rs({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Zi=200,Ce=function(){};Ce.prototype.append=function(e){return e.length?(e=Ce.from(e),!this.length&&e||e.length<Zi&&this.leafAppend(e)||this.length<Zi&&e.leafPrepend(this)||this.appendInner(e)):this};Ce.prototype.prepend=function(e){return e.length?Ce.from(e).append(this):this};Ce.prototype.appendInner=function(e){return new Bb(this,e)};Ce.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ce.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ce.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ce.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Ce.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},t,r),i};Ce.from=function(e){return e instanceof Ce?e:e&&e.length?new Jd(e):Ce.empty};var Jd=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Zi)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Zi)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Ce);Ce.empty=new Jd([]);var Bb=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ce),Yd=Ce;const Pb=500;class it{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,c.push(d);return}if(i){c.push(new ft(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new ft(p,void 0,void 0,u.length+c.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new it(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,t,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new ft(e.mapping.maps[c],d,t),h;(h=a&&a.merge(f))&&(f=h,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),t&&(s++,t=void 0),i||(a=f)}let u=s-r.depth;return u>Lb&&(l=Rb(l,u),s-=u),new it(l.append(o),s)}remapping(e,t){let r=new qn;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new it(this.items.append(e.map(t=>new ft(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=t;this.items.forEach(f=>{let h=o.getMirror(--a);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),g=f.selection&&f.selection.map(o.slice(a+1,h));g&&l++,r.push(new ft(p,m,g))}else r.push(new ft(p))},i);let u=[];for(let f=t;f<s;f++)u.push(new ft(o.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new it(c,l);return d.emptyItemCount()>Pb&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(t.slice(r)),u=a&&a.getMap();if(r--,u&&t.appendMap(u,r),a){let c=s.selection&&s.selection.map(t.slice(r));c&&o++;let d=new ft(u.invert(),a,c),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new it(Yd.from(i.reverse()),o)}}it.empty=new it(Yd.empty,0);function Rb(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class ft{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ft(t.getMap().invert(),t,this.selection)}}}class $t{constructor(e,t,r,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i}}const Lb=20;function zb(n,e,t,r){let i=t.getMeta(Yt),o;if(i)return i.historyState;t.getMeta($b)&&(n=new $t(n.done,n.undone,null,0));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(Yt))return s.getMeta(Yt).redo?new $t(n.done.addTransform(t,void 0,r,Fi(e)),n.undone,Eu(t.mapping.maps[t.steps.length-1]),n.prevTime):new $t(n.done,n.undone.addTransform(t,void 0,r,Fi(e)),null,n.prevTime);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.prevTime==0||!s&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Hb(t,n.prevRanges)),a=s?ps(n.prevRanges,t.mapping):Eu(t.mapping.maps[t.steps.length-1]);return new $t(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,Fi(e)),it.empty,a,t.time)}else return(o=t.getMeta("rebased"))?new $t(n.done.rebased(t,o),n.undone.rebased(t,o),ps(n.prevRanges,t.mapping),n.prevTime):new $t(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),ps(n.prevRanges,t.mapping),n.prevTime)}function Hb(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function Eu(n){let e=[];return n.forEach((t,r,i,o)=>e.push(i,o)),e}function ps(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function Xd(n,e,t,r){let i=Fi(e),o=Yt.get(e).spec.config,s=(r?n.undone:n.done).popEvent(e,i);if(!s)return;let l=s.selection.resolve(s.transform.doc),a=(r?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),u=new $t(r?a:s.remaining,r?s.remaining:a,null,0);t(s.transform.setSelection(l).setMeta(Yt,{redo:r,historyState:u}).scrollIntoView())}let ms=!1,Mu=null;function Fi(n){let e=n.plugins;if(Mu!=e){ms=!1,Mu=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ms=!0;break}}return ms}const Yt=new Be("history"),$b=new Be("closeHistory");function Vb(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new pe({key:Yt,state:{init(){return new $t(it.empty,it.empty,null,0)},apply(e,t,r){return zb(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Qd:r=="historyRedo"?Zd:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const Qd=(n,e)=>{let t=Yt.getState(n);return!t||t.done.eventCount==0?!1:(e&&Xd(t,n,e,!1),!0)},Zd=(n,e)=>{let t=Yt.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Xd(t,n,e,!0),!0)},jb=Ee.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Qd(n,e),redo:()=>({state:n,dispatch:e})=>Zd(n,e)}},addProseMirrorPlugins(){return[Vb(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),_b=ce.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",se(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n})=>n().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{var r;if(t){const{$to:i}=e.selection,o=i.end();if(i.nodeAfter)e.setSelection(j.create(e.doc,i.pos));else{const s=(r=i.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();s&&(e.insert(o,s),e.setSelection(j.create(e.doc,o)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[xd({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Wb=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Ub=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Kb=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,qb=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Gb=ut.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[kn({find:Wb,type:this.type}),kn({find:Kb,type:this.type})]},addPasteRules(){return[en({find:Ub,type:this.type}),en({find:qb,type:this.type})]}}),Jb=ce.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",se(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Yb=/^(\d+)\.\s$/,Xb=ce.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",se(this.options.HTMLAttributes,t),0]:["ol",se(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Nl({find:Yb,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,e)=>e.childCount+e.attrs.start===+n[1]})]}}),Qb=ce.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Zb=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,ew=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,tw=ut.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[kn({find:Zb,type:this.type})]},addPasteRules(){return[en({find:ew,type:this.type})]}}),nw=ce.create({name:"text",group:"inline"}),ef=Ee.create({name:"starterKit",addExtensions(){var n,e,t,r,i,o,s,l,a,u,c,d,f,h,p,m,g,v;const b=[];return this.options.blockquote!==!1&&b.push(sb.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&b.push(db.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&b.push(hb.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&b.push(gb.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&b.push(bb.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(wb.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&b.push(xb.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&b.push(Nb.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&b.push(Fb.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&b.push(Ib.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&b.push(jb.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&b.push(_b.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&b.push(Gb.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&b.push(Jb.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&b.push(Xb.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&b.push(Qb.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&b.push(tw.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&b.push(nw.configure((v=this.options)===null||v===void 0?void 0:v.text)),b}}),tf=Ee.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new pe({props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const o=n.type.createAndFill(),s=(o==null?void 0:o.sameMarkup(n))&&o.content.findDiffStart(n.content)===null;return n.descendants((l,a)=>{const u=r>=a&&r<=a+l.nodeSize,c=!l.isLeaf&&!l.childCount;if((u||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=Oe.node(a,a+l.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:a,hasAnchor:u}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),le.create(n,i)}}})]}}),rw=({onUpdate:n,defaultTitle:e=""})=>{const t=Gd({extensions:[ef,tf.configure({placeholder:X["New post title here…"]})],editorProps:{attributes:{class:"focus:outline-none max-w-screen-md mx-auto text-neutral-900 font-semibold text-3xl md:text-4xl md:!leading-[120%] lg:text-5xl dark:text-neutral-100"}},content:e,onUpdate:({editor:r})=>{n(r)}});return w(qd,{className:"focus:outline-none mt-6",editor:t})},iw=({onChange:n,defaultValue:e})=>{const t=frontendObject.maxTagsLengSubmit||5,r=Js`
    query GET_LIS_TAGS_MOST_USED {
      tags(where: { orderby: COUNT, order: DESC }, first: 30) {
        edges {
          node {
            id
            name
            count
            tagId
          }
        }
      }
    }
  `,[i,{error:o,data:s,loading:l}]=qu(r,{notifyOnNetworkStatusChange:!0}),a=A.useRef(null),u=A.useRef(null);let[c,d]=A.useState(!1);const[f,h]=A.useState(e||[]);A.useEffect(()=>{!c||s!=null&&s.tags.edges.length||i()},[c]),A.useEffect(()=>{f.length>=t&&d(!1),n(f)},[f.length]);function p(){d(!0)}const m=C=>f.some(y=>y.name===C.name),g=C=>{m(C)||h(y=>[...y,C]),u.current&&(u.current.value="",u.current.focus())};A.useEffect(()=>(v&&document.removeEventListener("click",v),c&&document.addEventListener("click",v),()=>{document.removeEventListener("click",v)}),[c]);const v=C=>{var y;!c||!a.current||a.current.contains(C.target)||(y=u.current)!=null&&y.contains(C.target)||d(!1)},b=C=>{h(f.filter(y=>y.name!==C.name)),setTimeout(()=>{var y;(y=u.current)==null||y.focus()},100)};return z("div",{className:"relative w-full mt-5 text-sm",children:[z("ul",{className:"flex flex-wrap ",children:[f.map((C,y)=>z("li",{className:"flex items-center justify-center mr-1 my-0.5 px-2 py-1.5 rounded bg-neutral-100 dark:bg-neutral-800",children:["#"," ",C.name,w("button",{className:"ml-1 px-1 text-red-400 text-base flex items-center justify-center",onClick:()=>b(C),title:"Remove tag",children:w("i",{className:"las la-times"})})]},y)),f.length<t&&w("li",{children:w("input",{ref:u,className:"px-2 py-1.5 my-0.5 h-full border-none focus:outline-none focus:ring-0 !bg-transparent shadow-none",type:"text",placeholder:f.length?`${X["Add another"]}...`:`${X["Add tags"]} (${f.length}/${t})...`,onFocus:p,onKeyDown:C=>{C.code==="Enter"&&g({id:`${Date.now()}-${Sf()}`,name:C.currentTarget.value,tagId:Math.random()})}})})]}),c&&z("div",{ref:a,className:"absolute top-full mt-4 inset-x-0 p-5 bg-white dark:bg-neutral-800 shadow-lg rounded-2xl z-50 ring-1 ring-black/[0.03]",children:[w("h3",{className:"text-xl font-semibold",children:X["Top tags"]}),w("div",{className:"w-full border-b my-4 border-neutral-300 dark:border-neutral-700"}),o&&w("p",{className:"text-red-500",children:o.message}),l&&w(Mf,{}),(s==null?void 0:s.tags.edges.length)&&w("ul",{className:"flex flex-wrap",children:s==null?void 0:s.tags.edges.map((C,y)=>w("li",{children:z("button",{className:"flex items-center justify-center mr-2 my-1 px-2 py-1.5 rounded bg-neutral-100 disabled:hover:bg-neutral-100 dark:bg-neutral-700 dark:hover:bg-neutral-6000 dark:disabled:hover:bg-neutral-700 hover:bg-neutral-200 disabled:cursor-not-allowed disabled:opacity-70",onClick:()=>{m(C.node)||g(C.node)},disabled:m(C.node),children:["#"," ",C.node.name]})},C.node.id))})]})]})},ow=({onChange:n,defaultValue:e})=>{const r=frontendObject.maxCategoriesLengSubmit||5,i=Js`
    ${Of}
  `,[o,s]=A.useState(e||[]);A.useEffect(()=>{n(o)},[o.length]);const[l,{loading:a,error:u,data:c,fetchMore:d}]=qu(i,{notifyOnNetworkStatusChange:!0}),f=()=>{c!=null&&c.categories.edges.length||l({variables:{first:30,order:"ASC"}})},h=(y,{fetchMoreResult:k})=>{var D,T,E;return(D=k==null?void 0:k.categories)!=null&&D.edges.length?{...k,categories:{...k.categories,edges:[...(T=y==null?void 0:y.categories)==null?void 0:T.edges,...(E=k==null?void 0:k.categories)==null?void 0:E.edges]}}:y},p=()=>{d&&d({variables:{first:30,after:(c==null?void 0:c.categories.pageInfo.endCursor)||null},updateQuery:h})},m=y=>o.some(k=>k.id===y.id),g=y=>{if(m(y)){s(o.filter(k=>k.id!==y.id));return}o.length>=r||s([...o,y])},v=y=>{var T,E;const k=o.some(O=>O.id===y.node.id),D=o.length>=r&&!k;return z("div",{className:`px-2 py-1 flex items-center justify-between rounded-2xl border border-neutral-100 dark:border-neutral-700  
        ${D?"":"hover:bg-neutral-50 dark:hover:bg-neutral-700 cursor-pointer"} ${k?"!bg-primary-500 text-white":""}`,onClick:()=>g(y.node),children:[z("div",{className:"flex items-center",children:[w(Zl,{containerClassName:"w-10 h-10 rounded-2xl overflow-hidden z-0",src:((T=y.node.ncTaxonomyMeta.featuredImage)==null?void 0:T.sourceUrl)||".",srcSet:(E=y.node.ncTaxonomyMeta.featuredImage)==null?void 0:E.srcSet,alt:y.node.name,imageSizes:"THUMBNAIL"}),z("span",{className:"ml-2 text-sm",children:[" ",y.node.name]})]}),k&&w("div",{className:"flex-shrink-0 text-white ml-2",children:z("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-6 w-6",children:[w("circle",{cx:"12",cy:"12",r:"12",fill:"#fff",opacity:"0.2"}),w("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]},y.node.id)},b=a&&!(c!=null&&c.categories.edges.length),C=()=>z("div",{className:"flex flex-col items-center space-y-8",children:[w(Tf,{data:(c==null?void 0:c.categories.edges)||[],isSkeleton:b,error:u}),z("div",{className:"w-full grid gap-5 grid-cols-1 sm:grid-cols-2 sm:py-2 md:grid-cols-3 lg:grid-cols-4 xl:md:grid-cols-5",children:[b&&Array.from("iiiiiiiiiiiiiiiiiiii").map((y,k)=>z("div",{className:"px-2 py-1 flex items-center border rounded-2xl border-neutral-300 border-opacity-30 cursor-pointer hover:border-opacity-100",children:[w(Zl,{containerClassName:"w-10 h-10 rounded-2xl overflow-hidden z-0",src:"."}),w("span",{className:"ml-2.5 flex-grow text-sm",children:w(Nf,{width:"90%"})})]},k)),((c==null?void 0:c.categories.edges)||[]).map(v)]}),(c==null?void 0:c.categories.pageInfo.hasNextPage)&&w(hr,{loading:a,onClick:p,children:X.showMeMore})]});return w("div",{className:"nc-CategoriesInput mt-8 inline-flex",children:w(wo,{onOpenModal:f,triggerText:X["Choose categories"]+`${o.length?` (${o.length} ${X.selected})`:""}`,modalTitle:`${X["Choose categories"]} (${o.length}/${r})`,renderContent:C,modalUnmountOnClose:!1})})};let Tu=["Standard","post-format-audio","post-format-gallery","post-format-video"];const sw=({onSubmit:n,defaultData:e})=>{const[t,r]=A.useState(e.postFormatsSelected||Tu[0]),[i,o]=A.useState(e.excerptText),[s,l]=A.useState(e.videoUrl),[a,u]=A.useState(e.audioUrl),[c,d]=A.useState(e.objGalleryImgs||{}),[f,h]=A.useState(e.isAllowComments),p=Fr.debounce(function(O){o(O)},200),m=Fr.debounce(function(O){l(O)},200),g=Fr.debounce(function(O){u(O)},200),v=()=>{n({postFormatsSelected:t,excerptText:i,videoUrl:s,audioUrl:a,objGalleryImgs:c,isAllowComments:f})},b=()=>w(Kr,{className:"flex-shrink-0",sizeClass:"p-2 w-12 !h-12",fontSize:"text-base font-medium",title:"Post options",children:z("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w("path",{d:"M12.0002 22.6298C11.3302 22.6298 10.6502 22.4798 10.1202 22.1698L4.62023 18.9998C2.38023 17.4898 2.24023 17.2598 2.24023 14.8898V9.1098C2.24023 6.7398 2.37023 6.5098 4.57023 5.0198L10.1102 1.8198C11.1602 1.2098 12.8102 1.2098 13.8602 1.8198L19.3802 4.9998C21.6202 6.5098 21.7602 6.7398 21.7602 9.1098V14.8798C21.7602 17.2498 21.6302 17.4798 19.4302 18.9698L13.8902 22.1698C13.3502 22.4798 12.6702 22.6298 12.0002 22.6298ZM12.0002 2.8698C11.5802 2.8698 11.1702 2.9498 10.8802 3.1198L5.38023 6.2998C3.75023 7.3998 3.75023 7.3998 3.75023 9.1098V14.8798C3.75023 16.5898 3.75023 16.5898 5.42023 17.7198L10.8802 20.8698C11.4702 21.2098 12.5402 21.2098 13.1302 20.8698L18.6302 17.6898C20.2502 16.5898 20.2502 16.5898 20.2502 14.8798V9.1098C20.2502 7.3998 20.2502 7.3998 18.5802 6.2698L13.1202 3.1198C12.8302 2.9498 12.4202 2.8698 12.0002 2.8698Z",fill:"currentColor"}),w("path",{d:"M12 15.75C9.93 15.75 8.25 14.07 8.25 12C8.25 9.93 9.93 8.25 12 8.25C14.07 8.25 15.75 9.93 15.75 12C15.75 14.07 14.07 15.75 12 15.75ZM12 9.75C10.76 9.75 9.75 10.76 9.75 12C9.75 13.24 10.76 14.25 12 14.25C13.24 14.25 14.25 13.24 14.25 12C14.25 10.76 13.24 9.75 12 9.75Z",fill:"currentColor"})]})}),C=()=>z("div",{children:[w(qe,{children:"Post format"}),w(yi,{value:t,onChange:r,children:z("div",{className:"relative z-10 mt-1",children:[z(yi.Button,{className:"focus:outline-none relative w-full cursor-default rounded-full py-2 pl-3 pr-10 text-left border border-neutral-100 dark:border-neutral-700",children:[w("span",{className:"block truncate capitalize",children:t.replace(/^post-format-/g,"")}),w("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:w(zh,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),w(Ri,{as:A.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w(yi.Options,{className:"focus:outline-none absolute mt-2 max-h-60 w-full overflow-auto rounded-2xl bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 sm:text-sm",children:Tu.map((O,L)=>w(yi.Option,{className:({active:S})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${S?"bg-amber-100 text-amber-900":"text-gray-900"}`,value:O,children:({selected:S})=>z(Xn,{children:[w("span",{className:`block truncate capitalize ${S?"font-medium":"font-normal"}`,children:O.replace(/^post-format-/g,"")}),S?w("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600",children:w(qf,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},L))})})]})})]}),y=()=>z("div",{children:[w("span",{className:"text-base font-semibold",children:X["Gallery images"]}),w("div",{className:"flex space-x-2.5 py-2 overflow-x-auto snap-x customScrollBar",children:[1,2,3,4,5,6,7,8].map((O,L)=>z("div",{className:"flex-shrink-0 snap-start",children:[w(qe,{children:`${X.Image} ${O}`}),w(Ys,{defaultImage:c[O],onChangeImage:S=>{d(B=>({...B,[O]:S}))},contentClassName:"p-3"})]},L))})]}),k=()=>z("div",{children:[w(qe,{children:X["Write an excerpt (optional)"]}),w(Ff,{onChange:O=>{p(O.currentTarget.value)},defaultValue:i,className:"mt-1"})]}),D=()=>z("div",{children:[w(qe,{children:"Video URL (Youtube, Vimeo, mp4 ... )"}),w(pn,{onChange:O=>{m(O.currentTarget.value)},defaultValue:s,className:"mt-1",placeholder:"Video url..."})]}),T=()=>{let O="mp3/mp4/Youtube";return frontendObject.musicPlayerMediaSource&&(O=frontendObject.musicPlayerMediaSource.join("/")),z("div",{children:[w(qe,{className:"block capitalize",children:`Audio URL (${O})`}),w(pn,{onChange:L=>{g(L.currentTarget.value)},defaultValue:a,className:"mt-1",placeholder:"Audio url..."})]})},E=()=>z("div",{className:"flex justify-between items-center",children:[w(qe,{children:X["Allow comments"]}),z(wh,{checked:f,onChange:h,className:`${f?"bg-primary-700":"bg-gray-700"}
          relative inline-flex h-[38px] w-[74px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2  focus-visible:ring-white focus-visible:ring-opacity-75`,children:[w("span",{className:"sr-only",children:X["Allow comments"]}),w("span",{"aria-hidden":"true",className:`${f?"translate-x-9":"translate-x-0"}
            pointer-events-none inline-block h-[34px] w-[34px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out`})]})]});return w($o,{className:"relative ml-auto lg:ml-2.5",children:({open:O,close:L})=>z(Xn,{children:[w($o.Button,{as:"div",children:b()}),w(Ri,{as:A.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",unmount:!1,children:w($o.Panel,{unmount:!1,className:"absolute z-10 w-screen max-w-xs sm:max-w-sm md:max-w-md px-4 mb-4 left-full lg:left-1/2 -translate-x-full lg:-translate-x-1/2 bottom-full sm:px-0 lg:max-w-2xl",children:z("div",{className:"rounded-2xl shadow-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:[z("div",{className:"relative flex flex-col px-5 py-6 space-y-5",children:[w("h3",{className:"text-xl font-semibold my-0",children:"Post options"}),w("div",{className:"w-full border-b my-3 border-neutral-300 dark:border-neutral-700"}),k(),C(),t==="post-format-gallery"&&y(),t==="post-format-video"&&D(),t==="post-format-audio"&&T(),E()]}),z("div",{className:"p-5 bg-neutral-50 rounded-b-2xl dark:bg-neutral-900 dark:border-t dark:border-neutral-800 flex items-center justify-between",children:[w(Kr,{onClick:()=>{L()},sizeClass:"px-4 py-2 sm:px-5",children:X.Cancel}),w(hr,{onClick:()=>{v(),L()},sizeClass:"px-4 py-2 sm:px-5",children:X.Apply})]})]})})})]})})},lw=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,aw=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,uw=ut.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[kn({find:lw,type:this.type})]},addPasteRules(){return[en({find:aw,type:this.type})]}}),cw=ut.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Vl(n){this.j={},this.jr=[],this.jd=null,this.t=n}Vl.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var r=t,i=this.j[e];if(i)return r&&(i.t=r),i;i=te();var o=eo(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=r||o.t):i.t=r,this.j[e]=i,i}};var te=function(){return new Vl},H=function(e){return new Vl(e)},F=function(e,t,r){e.j[t]||(e.j[t]=r)},me=function(e,t,r){e.jr.push([t,r])},eo=function(e,t){var r=e.j[t];if(r)return r;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],s=e.jr[i][1];if(o.test(t))return s}return e.jd},J=function(e,t,r){for(var i=0;i<t.length;i++)F(e,t[i],r)},dw=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0],o=t[r][1];F(e,i,o)}},un=function(e,t,r,i){for(var o=0,s=t.length,l;o<s&&(l=e.j[t[o]]);)e=l,o++;if(o>=s)return[];for(;o<s-1;)l=i(),F(e,t[o],l),e=l,o++;F(e,t[s-1],r)},rt="DOMAIN",Tt="LOCALHOST",ht="TLD",Ue="NUM",dr="PROTOCOL",jl="MAILTO",nf="WS",_l="NL",jn="OPENBRACE",Vr="OPENBRACKET",jr="OPENANGLEBRACKET",_r="OPENPAREN",fn="CLOSEBRACE",_n="CLOSEBRACKET",Wn="CLOSEANGLEBRACKET",Un="CLOSEPAREN",to="AMPERSAND",no="APOSTROPHE",ro="ASTERISK",Kn="AT",io="BACKSLASH",oo="BACKTICK",so="CARET",Wr="COLON",Wl="COMMA",lo="DOLLAR",Vt="DOT",ao="EQUALS",Ul="EXCLAMATION",uo="HYPHEN",co="PERCENT",fo="PIPE",ho="PLUS",po="POUND",mo="QUERY",Kl="QUOTE",ql="SEMI",Ot="SLASH",go="TILDE",yo="UNDERSCORE",vo="SYM",fw=Object.freeze({__proto__:null,DOMAIN:rt,LOCALHOST:Tt,TLD:ht,NUM:Ue,PROTOCOL:dr,MAILTO:jl,WS:nf,NL:_l,OPENBRACE:jn,OPENBRACKET:Vr,OPENANGLEBRACKET:jr,OPENPAREN:_r,CLOSEBRACE:fn,CLOSEBRACKET:_n,CLOSEANGLEBRACKET:Wn,CLOSEPAREN:Un,AMPERSAND:to,APOSTROPHE:no,ASTERISK:ro,AT:Kn,BACKSLASH:io,BACKTICK:oo,CARET:so,COLON:Wr,COMMA:Wl,DOLLAR:lo,DOT:Vt,EQUALS:ao,EXCLAMATION:Ul,HYPHEN:uo,PERCENT:co,PIPE:fo,PLUS:ho,POUND:po,QUERY:mo,QUOTE:Kl,SEMI:ql,SLASH:Ot,TILDE:go,UNDERSCORE:yo,SYM:vo}),Ou="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermögensberater-ctb vermögensberatung-pwb ελ ευ бг бел дети ею католик ком қаз мкд мон москва онлайн орг рус рф сайт срб укр გე հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بھارت بيتك پاکستان ڀارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ 닷넷 닷컴 삼성 한국 アマゾン グーグル クラウド コム ストア セール ファッション ポイント みんな 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大众汽车 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港".split(" "),Sr=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Ar=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Er=/\uFE0F/,Mr=/\d/,Nu=/\s/;function hw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=te(),t=H(Ue),r=H(rt),i=te(),o=H(nf),s=[[Mr,r],[Sr,r],[Ar,r],[Er,r]],l=function(){var y=H(rt);return y.j={"-":i},y.jr=[].concat(s),y},a=function(y){var k=l();return k.t=y,k};dw(e,[["'",H(no)],["{",H(jn)],["[",H(Vr)],["<",H(jr)],["(",H(_r)],["}",H(fn)],["]",H(_n)],[">",H(Wn)],[")",H(Un)],["&",H(to)],["*",H(ro)],["@",H(Kn)],["`",H(oo)],["^",H(so)],[":",H(Wr)],[",",H(Wl)],["$",H(lo)],[".",H(Vt)],["=",H(ao)],["!",H(Ul)],["-",H(uo)],["%",H(co)],["|",H(fo)],["+",H(ho)],["#",H(po)],["?",H(mo)],['"',H(Kl)],["/",H(Ot)],[";",H(ql)],["~",H(go)],["_",H(yo)],["\\",H(io)]]),F(e,`
`,H(_l)),me(e,Nu,o),F(o,`
`,te()),me(o,Nu,o);for(var u=0;u<Ou.length;u++)un(e,Ou[u],a(ht),l);var c=l(),d=l(),f=l(),h=l();un(e,"file",c,l),un(e,"ftp",d,l),un(e,"http",f,l),un(e,"mailto",h,l);var p=l(),m=H(dr),g=H(jl);F(d,"s",p),F(d,":",m),F(f,"s",p),F(f,":",m),F(c,":",m),F(p,":",m),F(h,":",g);for(var v=l(),b=0;b<n.length;b++)un(e,n[b],v,l);return F(v,":",m),un(e,"localhost",a(Tt),l),me(e,Mr,t),me(e,Sr,r),me(e,Ar,r),me(e,Er,r),me(t,Mr,t),me(t,Sr,r),me(t,Ar,r),me(t,Er,r),F(t,"-",i),F(r,"-",i),F(i,"-",i),me(r,Mr,r),me(r,Sr,r),me(r,Ar,r),me(r,Er,r),me(i,Mr,r),me(i,Sr,r),me(i,Ar,r),me(i,Er,r),e.jd=H(vo),e}function pw(n,e){for(var t=mw(e.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),r=t.length,i=[],o=0,s=0;s<r;){for(var l=n,a=null,u=0,c=null,d=-1,f=-1;s<r&&(a=eo(l,t[s]));)l=a,l.accepts()?(d=0,f=0,c=l):d>=0&&(d+=t[s].length,f++),u+=t[s].length,o+=t[s].length,s++;o-=d,s-=f,u-=d,i.push({t:c.t,v:e.substr(o-u,u),s:o-u,e:o})}return i}function mw(n){for(var e=[],t=n.length,r=0;r<t;){var i=n.charCodeAt(r),o=void 0,s=i<55296||i>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(s),r+=s.length}return e}function Ii(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ii=function(e){return typeof e}:Ii=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ii(n)}var xe={defaultProtocol:"http",events:null,format:Fu,formatHref:Fu,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function gw(n){n=n||{},this.defaultProtocol="defaultProtocol"in n?n.defaultProtocol:xe.defaultProtocol,this.events="events"in n?n.events:xe.events,this.format="format"in n?n.format:xe.format,this.formatHref="formatHref"in n?n.formatHref:xe.formatHref,this.nl2br="nl2br"in n?n.nl2br:xe.nl2br,this.tagName="tagName"in n?n.tagName:xe.tagName,this.target="target"in n?n.target:xe.target,this.rel="rel"in n?n.rel:xe.rel,this.validate="validate"in n?n.validate:xe.validate,this.truncate="truncate"in n?n.truncate:xe.truncate,this.className="className"in n?n.className:xe.className,this.attributes=n.attributes||xe.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in n)?n.ignoreTags:xe.ignoreTags,t=0;t<e.length;t++)this.ignoreTags.push(e[t].toUpperCase())}gw.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,r){var i=this[e];if(!i)return i;var o;switch(Ii(i)){case"function":return i(t,r.t);case"object":return o=r.t in i?i[r.t]:xe[e],typeof o=="function"?o(t,r.t):o}return i},getObject:function(e,t,r){var i=this[e];return typeof i=="function"?i(t,r.t):i}};function Fu(n){return n}function yw(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(n.prototype);for(var i in t)r[i]=t[i];return r.constructor=e,e.prototype=r,e}function bo(){}bo.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function En(n,e){function t(r,i){this.t=n,this.v=r,this.tk=i}return yw(bo,t,e),t}var rf=En("email",{isLink:!0}),Vs=En("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),js=En("text"),of=En("nl"),Ht=En("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe.defaultProtocol,t=this.tk,r=!1,i=!1,o=[],s=0;t[s].t===dr;)r=!0,o.push(t[s].v),s++;for(;t[s].t===Ot;)i=!0,o.push(t[s].v),s++;for(;s<t.length;s++)o.push(t[s].v);return o=o.join(""),r||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===dr}}),vw=Object.freeze({__proto__:null,MultiToken:bo,Base:bo,createTokenClass:En,MailtoEmail:rf,Email:Vs,Text:js,Nl:of,Url:Ht});function bw(){var n=te(),e=te(),t=te(),r=te(),i=te(),o=te(),s=te(),l=H(Ht),a=te(),u=H(Ht),c=H(Ht),d=te(),f=te(),h=te(),p=te(),m=te(),g=H(Ht),v=H(Ht),b=H(Ht),C=H(Ht),y=te(),k=te(),D=te(),T=te(),E=te(),O=te(),L=H(Vs),S=te(),B=H(Vs),N=H(rf),U=te(),q=te(),G=te(),ne=te(),de=H(of);F(n,_l,de),F(n,dr,e),F(n,jl,t),F(e,Ot,r),F(r,Ot,i),F(n,ht,o),F(n,rt,o),F(n,Tt,l),F(n,Ue,o),F(i,ht,c),F(i,rt,c),F(i,Ue,c),F(i,Tt,c),F(o,Vt,s),F(E,Vt,O),F(s,ht,l),F(s,rt,o),F(s,Ue,o),F(s,Tt,o),F(O,ht,L),F(O,rt,E),F(O,Ue,E),F(O,Tt,E),F(l,Vt,s),F(L,Vt,O),F(l,Wr,a),F(l,Ot,c),F(a,Ue,u),F(u,Ot,c),F(L,Wr,S),F(S,Ue,B);var re=[to,ro,Kn,io,oo,so,lo,rt,ao,uo,Tt,Ue,co,fo,ho,po,dr,Ot,vo,go,ht,yo],ie=[no,Wn,fn,_n,Un,Wr,Wl,Vt,Ul,jr,jn,Vr,_r,mo,Kl,ql];F(c,jn,f),F(c,Vr,h),F(c,jr,p),F(c,_r,m),F(d,jn,f),F(d,Vr,h),F(d,jr,p),F(d,_r,m),F(f,fn,c),F(h,_n,c),F(p,Wn,c),F(m,Un,c),F(g,fn,c),F(v,_n,c),F(b,Wn,c),F(C,Un,c),F(y,fn,c),F(k,_n,c),F(D,Wn,c),F(T,Un,c),J(f,re,g),J(h,re,v),J(p,re,b),J(m,re,C),J(f,ie,y),J(h,ie,k),J(p,ie,D),J(m,ie,T),J(g,re,g),J(v,re,v),J(b,re,b),J(C,re,C),J(g,ie,g),J(v,ie,v),J(b,ie,b),J(C,ie,C),J(y,re,g),J(k,re,v),J(D,re,b),J(T,re,C),J(y,ie,y),J(k,ie,k),J(D,ie,D),J(T,ie,T),J(c,re,c),J(d,re,c),J(c,ie,d),J(d,ie,d),F(t,ht,N),F(t,rt,N),F(t,Ue,N),F(t,Tt,N),J(N,re,N),J(N,ie,U),J(U,re,N),J(U,ie,U);var $e=[to,no,ro,io,oo,so,fn,lo,rt,ao,uo,Ue,jn,co,fo,ho,po,mo,Ot,vo,go,ht,yo];return J(o,$e,q),F(o,Kn,G),J(l,$e,q),F(l,Kn,G),J(s,$e,q),J(q,$e,q),F(q,Kn,G),F(q,Vt,ne),J(ne,$e,q),F(G,ht,E),F(G,rt,E),F(G,Ue,E),F(G,Tt,L),n}function ww(n,e,t){for(var r=t.length,i=0,o=[],s=[];i<r;){for(var l=n,a=null,u=null,c=0,d=null,f=-1;i<r&&!(a=eo(l,t[i].t));)s.push(t[i++]);for(;i<r&&(u=a||eo(l,t[i].t));)a=null,l=u,l.accepts()?(f=0,d=l):f>=0&&f++,i++,c++;if(f<0)for(var h=i-c;h<i;h++)s.push(t[h]);else{s.length>0&&(o.push(gs(js,e,s)),s=[]),i-=f,c-=f;var p=d.t,m=t.slice(i-c,i);o.push(gs(p,e,m))}}return s.length>0&&o.push(gs(js,e,s)),o}function gs(n,e,t){var r=t[0].s,i=t[t.length-1].e,o=e.substr(r,i-r);return new n(o,t)}var Dw=typeof console<"u"&&console&&console.warn||function(){},ge={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function Cw(){ge.scanner=null,ge.parser=null,ge.pluginQueue=[],ge.customProtocols=[],ge.initialized=!1}function xw(n){if(ge.initialized&&Dw('linkifyjs: already initialized - will not register custom protocol "'.concat(n,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(n))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");ge.customProtocols.push(n)}function kw(){ge.scanner={start:hw(ge.customProtocols),tokens:fw},ge.parser={start:bw(),tokens:vw};for(var n={createTokenClass:En},e=0;e<ge.pluginQueue.length;e++)ge.pluginQueue[e][1]({scanner:ge.scanner,parser:ge.parser,utils:n});ge.initialized=!0}function sf(n){return ge.initialized||kw(),ww(ge.parser.start,n,pw(ge.scanner.start,n))}function Gl(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=sf(n),r=[],i=0;i<t.length;i++){var o=t[i];o.isLink&&(!e||o.t===e)&&r.push(o.toObject())}return r}function Iu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=sf(n);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}function Sw(n){return new pe({key:new Be("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,l=P0(t.doc,[...e]),{mapping:a}=l;if(_0(l).forEach(({oldRange:c,newRange:d})=>{Yi(c.from,c.to,t.doc).filter(m=>m.mark.type===n.type).forEach(m=>{const g=a.map(m.from),v=a.map(m.to),b=Yi(g,v,r.doc).filter(E=>E.mark.type===n.type);if(!b.length)return;const C=b[0],y=t.doc.textBetween(m.from,m.to,void 0," "),k=r.doc.textBetween(C.from,C.to,void 0," "),D=Iu(y),T=Iu(k);D&&!T&&s.removeMark(C.from,C.to,n.type)});const f=L0(r.doc,d,m=>m.isTextblock);let h,p;if(f.length>1?(h=f[0],p=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ")):f.length&&r.doc.textBetween(d.from,d.to," "," ").endsWith(" ")&&(h=f[0],p=r.doc.textBetween(h.pos,d.to,void 0," ")),h&&p){const m=p.split(" ").filter(b=>b!=="");if(m.length<=0)return!1;const g=m[m.length-1],v=h.pos+p.lastIndexOf(g);if(!g)return!1;Gl(g).filter(b=>b.isLink).filter(b=>n.validate?n.validate(b.value):!0).map(b=>({...b,from:v+b.start+1,to:v+b.end+1})).forEach(b=>{s.addMark(b.from,b.to,n.type.create({href:b.href}))})}}),!!s.steps.length)return s}})}function Aw(n){return new pe({key:new Be("handleClickLink"),props:{handleClick:(e,t,r)=>{var i;const o=Cd(e.state,n.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&o.href?(window.open(o.href,o.target),!0):!1}}})}function Ew(n){return new pe({key:new Be("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const a=Gl(l).find(u=>u.isLink&&u.value===l);return!l||!a?!1:(n.editor.commands.setMark(n.type,{href:a.href}),!0)}}})}const Mw=ut.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(xw)},onDestroy(){Cw()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",se(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[en({find:n=>Gl(n).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(Sw({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(Aw({type:this.type})),this.options.linkOnPaste&&n.push(Ew({editor:this.editor,type:this.type})),n}}),Tw=Ee.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>n.style.textAlign||this.options.defaultAlignment,renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.every(t=>e.updateAttributes(t,{textAlign:n})):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.every(e=>n.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Ow=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Nw=ce.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",se(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[xd({find:Ow,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}});let _s,Ws;if(typeof WeakMap<"u"){let n=new WeakMap;_s=e=>n.get(e),Ws=(e,t)=>(n.set(e,t),t)}else{let n=[],e=10,t=0;_s=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},Ws=(r,i)=>(t==e&&(t=0),n[t++]=r,n[t++]=i)}class fr{constructor(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}}class ue{constructor(e,t,r,i){this.width=e,this.height=t,this.map=r,this.problems=i}findCell(e){for(let t=0;t<this.map.length;t++){let r=this.map[t];if(r!=e)continue;let i=t%this.width,o=t/this.width|0,s=i+1,l=o+1;for(let a=1;s<this.width&&this.map[t+a]==r;a++)s++;for(let a=1;l<this.height&&this.map[t+this.width*a]==r;a++)l++;return new fr(i,o,s,l)}throw new RangeError("No cell with offset "+e+" found")}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")}nextCell(e,t,r){let{left:i,right:o,top:s,bottom:l}=this.findCell(e);return t=="horiz"?(r<0?i==0:o==this.width)?null:this.map[s*this.width+(r<0?i-1:o)]:(r<0?s==0:l==this.height)?null:this.map[i+this.width*(r<0?s-1:l)]}rectBetween(e,t){let{left:r,right:i,top:o,bottom:s}=this.findCell(e),{left:l,right:a,top:u,bottom:c}=this.findCell(t);return new fr(Math.min(r,l),Math.min(o,u),Math.max(i,a),Math.max(s,c))}cellsInRect(e){let t=[],r={};for(let i=e.top;i<e.bottom;i++)for(let o=e.left;o<e.right;o++){let s=i*this.width+o,l=this.map[s];r[l]||(r[l]=!0,(o!=e.left||!o||this.map[s-1]!=l)&&(i!=e.top||!i||this.map[s-this.width]!=l)&&t.push(l))}return t}positionAt(e,t,r){for(let i=0,o=0;;i++){let s=o+r.child(i).nodeSize;if(i==e){let l=t+e*this.width,a=(e+1)*this.width;for(;l<a&&this.map[l]<o;)l++;return l==a?s-1:this.map[l]}o=s}}static get(e){return _s(e)||Ws(e,Fw(e))}}function Fw(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);let e=Iw(n),t=n.childCount,r=[],i=0,o=null,s=[];for(let u=0,c=e*t;u<c;u++)r[u]=0;for(let u=0,c=0;u<t;u++){let d=n.child(u);c++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;let m=d.child(p),{colspan:g,rowspan:v,colwidth:b}=m.attrs;for(let C=0;C<v;C++){if(C+u>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:v-C});break}let y=i+C*e;for(let k=0;k<g;k++){r[y+k]==0?r[y+k]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:g-k});let D=b&&b[k];if(D){let T=(y+k)%e*2,E=s[T];E==null||E!=D&&s[T+1]==1?(s[T]=D,s[T+1]=1):E==D&&s[T+1]++}}}i+=g,c+=m.nodeSize}let f=(u+1)*e,h=0;for(;i<f;)r[i++]==0&&h++;h&&(o||(o=[])).push({type:"missing",row:u,n:h}),c++}let l=new ue(e,t,r,o),a=!1;for(let u=0;!a&&u<s.length;u+=2)s[u]!=null&&s[u+1]<t&&(a=!0);return a&&Bw(l,s,n),l}function Iw(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){let i=n.child(r),o=0;if(t)for(let s=0;s<r;s++){let l=n.child(s);for(let a=0;a<l.childCount;a++){let u=l.child(a);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let s=0;s<i.childCount;s++){let l=i.child(s);o+=l.attrs.colspan,l.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Bw(n,e,t){n.problems||(n.problems=[]);for(let r=0,i={};r<n.map.length;r++){let o=n.map[r];if(i[o])continue;i[o]=!0;let s=t.nodeAt(o),l=null;for(let a=0;a<s.attrs.colspan;a++){let u=(r+a)%n.width,c=e[u*2];c!=null&&(!s.attrs.colwidth||s.attrs.colwidth[a]!=c)&&((l||(l=Pw(s.attrs)))[a]=c)}l&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:l})}}function Pw(n){if(n.colwidth)return n.colwidth.slice();let e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Me(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(let t in n.nodes){let r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const _t=new Be("selectingCells");function mr(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Rw(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function ct(n){let e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Lo(n){let e=n.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&e.node.type.spec.tableRole=="cell"?e.$anchor:mr(e.$head)||Lw(e.$head)}function Lw(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){let r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){let r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function Us(n){return n.parent.type.spec.tableRole=="row"&&n.nodeAfter}function zw(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function Jl(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function lf(n,e,t){let r=n.start(-1),o=ue.get(n.node(-1)).nextCell(n.pos-r,e,t);return o==null?null:n.node(0).resolve(r+o)}function ve(n,e,t){let r={};for(let i in n)r[i]=n[i];return r[e]=t,r}function An(n,e,t=1){let r=ve(n,"colspan",n.colspan-t);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function af(n,e,t=1){let r=ve(n,"colspan",n.colspan+t);if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function Hw(n,e,t){let r=Me(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}class Y extends V{constructor(e,t=e){let r=e.node(-1),i=ue.get(r),o=e.start(-1),s=i.rectBetween(e.pos-o,t.pos-o),l=e.node(0),a=i.cellsInRect(s).filter(c=>c!=t.pos-o);a.unshift(t.pos-o);let u=a.map(c=>{let d=r.nodeAt(c),f=c+o+1;return new Mc(l.resolve(f),l.resolve(f+d.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=t}map(e,t){let r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(Us(r)&&Us(i)&&Jl(r,i)){let o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Y.rowSelection(r,i):o&&this.isColSelection()?Y.colSelection(r,i):new Y(r,i)}return j.between(r,i)}content(){let e=this.$anchorCell.node(-1),t=ue.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let a=i.top;a<i.bottom;a++){let u=[];for(let c=a*t.width+i.left,d=i.left;d<i.right;d++,c++){let f=t.map[c];if(!o[f]){o[f]=!0;let h=t.findCell(f),p=e.nodeAt(f),m=i.left-h.left,g=h.right-i.right;if(m>0||g>0){let v=p.attrs;m>0&&(v=An(v,0,m)),g>0&&(v=An(v,v.colspan-g,g)),h.left<i.left?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}if(h.top<i.top||h.bottom>i.bottom){let v=ve(p.attrs,"rowspan",Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top));h.top<i.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}u.push(p)}}s.push(e.child(a).copy(M.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:s;return new I(M.from(l),1,1)}replace(e,t=I.empty){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:a}=i[s],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(a.pos),s?I.empty:t)}let o=V.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new I(M.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),r=ue.get(t),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)e(t.nodeAt(o[s]),i+o[s])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;let r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){let r=ue.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(t.pos-i),l=e.node(0);return o.top<=s.top?(o.top>0&&(e=l.resolve(i+r.map[o.left])),s.bottom<r.height&&(t=l.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(t=l.resolve(i+r.map[s.left])),o.bottom<r.height&&(e=l.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new Y(e,t)}isRowSelection(){let e=ue.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-t),i=e.colCount(this.$headCell.pos-t);if(Math.min(r,i)>0)return!1;let o=r+this.$anchorCell.nodeAfter.attrs.colspan,s=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,s)==e.width}eq(e){return e instanceof Y&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){let r=ue.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(t.pos-i),l=e.node(0);return o.left<=s.left?(o.left>0&&(e=l.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(t=l.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(t=l.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(e=l.resolve(i+r.map[r.width*(o.top+1)-1]))),new Y(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Y(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Y(e.resolve(t),e.resolve(r))}getBookmark(){return new Yl(this.$anchorCell.pos,this.$headCell.pos)}}Y.prototype.visible=!1;V.jsonID("cell",Y);class Yl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Yl(e.map(this.anchor),e.map(this.head))}resolve(e){let t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&Jl(t,r)?new Y(t,r):V.near(r,1)}}function $w(n){if(!(n.selection instanceof Y))return null;let e=[];return n.selection.forEachCell((t,r)=>{e.push(Oe.node(r,r+t.nodeSize,{class:"selectedCell"}))}),le.create(n.doc,e)}function Vw({$from:n,$to:e}){if(n.pos==e.pos||n.pos<n.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function jw({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){let o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let i=e.depth;i>0;i--){let o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function _w(n,e,t){let r=(e||n).selection,i=(e||n).doc,o,s;if(r instanceof $&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=Y.create(i,r.from);else if(s=="row"){let l=i.resolve(r.from+1);o=Y.rowSelection(l,l)}else if(!t){let l=ue.get(r.node),a=r.from+1,u=a+l.map[l.width*l.height-1];o=Y.create(i,a+1,u)}}else r instanceof j&&Vw(r)?o=j.create(i,r.from):r instanceof j&&jw(r)&&(o=j.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}function Ww(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.firstChild.type.spec.tableRole=="table");)t--,r--,e=e.firstChild.content;let i=e.firstChild,o=i.type.spec.tableRole,s=i.type.schema,l=[];if(o=="row")for(let a=0;a<e.childCount;a++){let u=e.child(a).content,c=a?0:Math.max(0,t-1),d=a<e.childCount-1?0:Math.max(0,r-1);(c||d)&&(u=Ks(Me(s).row,new I(u,c,d)).content),l.push(u)}else if(o=="cell"||o=="header_cell")l.push(t||r?Ks(Me(s).row,new I(e,t,r)).content:e);else return null;return Uw(s,l)}function Uw(n,e){let t=[];for(let i=0;i<e.length;i++){let o=e[i];for(let s=o.childCount-1;s>=0;s--){let{rowspan:l,colspan:a}=o.child(s).attrs;for(let u=i;u<i+l;u++)t[u]=(t[u]||0)+a}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(M.empty),t[i]<r){let o=Me(n).cell.createAndFill(),s=[];for(let l=t[i];l<r;l++)s.push(o);e[i]=e[i].append(M.from(s))}return{height:e.length,width:r,rows:e}}function Ks(n,e){let t=n.createAndFill();return new pl(t).replace(0,t.content.size,e).doc}function Kw({width:n,height:e,rows:t},r,i){if(n!=r){let o=[],s=[];for(let l=0;l<t.length;l++){let a=t[l],u=[];for(let c=o[l]||0,d=0;c<r;d++){let f=a.child(d%a.childCount);c+f.attrs.colspan>r&&(f=f.type.create(An(f.attrs,f.attrs.colspan,c+f.attrs.colspan-r),f.content)),u.push(f),c+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)o[l+h]=(o[l+h]||0)+f.attrs.colspan}s.push(M.from(u))}t=s,n=r}if(e!=i){let o=[];for(let s=0,l=0;s<i;s++,l++){let a=[],u=t[l%e];for(let c=0;c<u.childCount;c++){let d=u.child(c);s+d.attrs.rowspan>i&&(d=d.type.create(ve(d.attrs,"rowspan",Math.max(1,i-d.attrs.rowspan)),d.content)),a.push(d)}o.push(M.from(a))}t=o,e=i}return{width:n,height:e,rows:t}}function qw(n,e,t,r,i,o,s){let l=n.doc.type.schema,a=Me(l),u,c;if(i>e.width)for(let d=0,f=0;d<e.height;d++){let h=t.child(d);f+=h.nodeSize;let p=[],m;h.lastChild==null||h.lastChild.type==a.cell?m=u||(u=a.cell.createAndFill()):m=c||(c=a.header_cell.createAndFill());for(let g=e.width;g<i;g++)p.push(m);n.insert(n.mapping.slice(s).map(f-1+r),p)}if(o>e.height){let d=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){let g=p>=e.width?!1:t.nodeAt(e.map[m+p]).type==a.header_cell;d.push(g?c||(c=a.header_cell.createAndFill()):u||(u=a.cell.createAndFill()))}let f=a.row.create(null,M.from(d)),h=[];for(let p=e.height;p<o;p++)h.push(f);n.insert(n.mapping.slice(s).map(r+t.nodeSize-2),h)}return!!(u||c)}function Bu(n,e,t,r,i,o,s,l){if(s==0||s==e.height)return!1;let a=!1;for(let u=i;u<o;u++){let c=s*e.width+u,d=e.map[c];if(e.map[c-e.width]==d){a=!0;let f=t.nodeAt(d),{top:h,left:p}=e.findCell(d);n.setNodeMarkup(n.mapping.slice(l).map(d+r),null,ve(f.attrs,"rowspan",s-h)),n.insert(n.mapping.slice(l).map(e.positionAt(s,p,t)),f.type.createAndFill(ve(f.attrs,"rowspan",h+f.attrs.rowspan-s))),u+=f.attrs.colspan-1}}return a}function Pu(n,e,t,r,i,o,s,l){if(s==0||s==e.width)return!1;let a=!1;for(let u=i;u<o;u++){let c=u*e.width+s,d=e.map[c];if(e.map[c-1]==d){a=!0;let f=t.nodeAt(d),h=e.colCount(d),p=n.mapping.slice(l).map(d+r);n.setNodeMarkup(p,null,An(f.attrs,s-h,f.attrs.colspan-(s-h))),n.insert(p+f.nodeSize,f.type.createAndFill(An(f.attrs,0,s-h))),u+=f.attrs.rowspan-1}}return a}function Ru(n,e,t,r,i){let o=t?n.doc.nodeAt(t-1):n.doc,s=ue.get(o),{top:l,left:a}=r,u=a+i.width,c=l+i.height,d=n.tr,f=0;function h(){o=t?d.doc.nodeAt(t-1):d.doc,s=ue.get(o),f=d.mapping.maps.length}qw(d,s,o,t,u,c,f)&&h(),Bu(d,s,o,t,a,u,l,f)&&h(),Bu(d,s,o,t,a,u,c,f)&&h(),Pu(d,s,o,t,l,c,a,f)&&h(),Pu(d,s,o,t,l,c,u,f)&&h();for(let p=l;p<c;p++){let m=s.positionAt(p,a,o),g=s.positionAt(p,u,o);d.replace(d.mapping.slice(f).map(m+t),d.mapping.slice(f).map(g+t),new I(i.rows[p-l],0,0))}h(),d.setSelection(new Y(d.doc.resolve(t+s.positionAt(l,a,o)),d.doc.resolve(t+s.positionAt(c-1,u-1,o)))),e(d)}const Gw=Sl({ArrowLeft:Si("horiz",-1),ArrowRight:Si("horiz",1),ArrowUp:Si("vert",-1),ArrowDown:Si("vert",1),"Shift-ArrowLeft":Ai("horiz",-1),"Shift-ArrowRight":Ai("horiz",1),"Shift-ArrowUp":Ai("vert",-1),"Shift-ArrowDown":Ai("vert",1),Backspace:Ei,"Mod-Backspace":Ei,Delete:Ei,"Mod-Delete":Ei});function Bi(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Si(n,e){return(t,r,i)=>{let o=t.selection;if(o instanceof Y)return Bi(t,r,V.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;let s=uf(i,n,e);if(s==null)return!1;if(n=="horiz")return Bi(t,r,V.near(t.doc.resolve(o.head+e),e));{let l=t.doc.resolve(s),a=lf(l,n,e),u;return a?u=V.near(a,1):e<0?u=V.near(t.doc.resolve(l.before(-1)),-1):u=V.near(t.doc.resolve(l.after(-1)),1),Bi(t,r,u)}}}function Ai(n,e){return(t,r,i)=>{let o=t.selection;if(!(o instanceof Y)){let l=uf(i,n,e);if(l==null)return!1;o=new Y(t.doc.resolve(l))}let s=lf(o.$headCell,n,e);return s?Bi(t,r,new Y(o.$anchorCell,s)):!1}}function Ei(n,e){let t=n.selection;if(!(t instanceof Y))return!1;if(e){let r=n.tr,i=Me(n.schema).cell.createAndFill().content;t.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new I(i,0,0))}),r.docChanged&&e(r)}return!0}function Jw(n,e){let t=n.state.doc,r=mr(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Y(r))),!0):!1}function Yw(n,e,t){if(!ct(n.state))return!1;let r=Ww(t),i=n.state.selection;if(i instanceof Y){r||(r={width:1,height:1,rows:[M.from(Ks(Me(n.state.schema).cell,t))]});let o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),l=ue.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=Kw(r,l.right-l.left,l.bottom-l.top),Ru(n.state,n.dispatch,s,l,r),!0}else if(r){let o=Lo(n.state),s=o.start(-1);return Ru(n.state,n.dispatch,s,ue.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function Xw(n,e){if(e.ctrlKey||e.metaKey)return;let t=Lu(n,e.target),r;if(e.shiftKey&&n.state.selection instanceof Y)i(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&t&&(r=mr(n.state.selection.$anchor))!=null&&ys(n,e).pos!=r.pos)i(r,e),e.preventDefault();else if(!t)return;function i(l,a){let u=ys(n,a),c=_t.getState(n.state)==null;if(!u||!Jl(l,u))if(c)u=l;else return;let d=new Y(l,u);if(c||!n.state.selection.eq(d)){let f=n.state.tr.setSelection(d);c&&f.setMeta(_t,l.pos),n.dispatch(f)}}function o(){n.root.removeEventListener("mouseup",o),n.root.removeEventListener("dragstart",o),n.root.removeEventListener("mousemove",s),_t.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(_t,-1))}function s(l){let a=_t.getState(n.state),u;if(a!=null)u=n.state.doc.resolve(a);else if(Lu(n,l.target)!=t&&(u=ys(n,e),!u))return o();u&&i(u,l)}n.root.addEventListener("mouseup",o),n.root.addEventListener("dragstart",o),n.root.addEventListener("mousemove",s)}function uf(n,e,t){if(!(n.state.selection instanceof j))return null;let{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){let o=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){let l=r.before(i),a=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(a)?l:null}}return null}function Lu(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e}function ys(n,e){let t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?mr(n.state.doc.resolve(t.pos)):null}const Qw=new Be("fix-tables");function cf(n,e,t,r){let i=n.childCount,o=e.childCount;e:for(let s=0,l=0;s<o;s++){let a=e.child(s);for(let u=l,c=Math.min(i,s+3);u<c;u++)if(n.child(u)==a){l=u+1,t+=a.nodeSize;continue e}r(a,t),l<i&&n.child(l).sameMarkup(a)?cf(n.child(l),a,t+1,r):a.nodesBetween(0,a.content.size,r,t+1),t+=a.nodeSize}}function df(n,e){let t,r=(i,o)=>{i.type.spec.tableRole=="table"&&(t=Zw(n,i,o,t))};return e?e.doc!=n.doc&&cf(e.doc,n.doc,0,r):n.doc.descendants(r),t}function Zw(n,e,t,r){let i=ue.get(e);if(!i.problems)return r;r||(r=n.tr);let o=[];for(let a=0;a<i.height;a++)o.push(0);for(let a=0;a<i.problems.length;a++){let u=i.problems[a];if(u.type=="collision"){let c=e.nodeAt(u.pos);for(let d=0;d<c.attrs.rowspan;d++)o[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,An(c.attrs,c.attrs.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){let c=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,ve(c.attrs,"rowspan",c.attrs.rowspan-u.n))}else if(u.type=="colwidth mismatch"){let c=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(t+1+u.pos),null,ve(c.attrs,"colwidth",u.colwidth))}}let s,l;for(let a=0;a<o.length;a++)o[a]&&(s==null&&(s=a),l=a);for(let a=0,u=t+1;a<i.height;a++){let c=e.child(a),d=u+c.nodeSize,f=o[a];if(f>0){let h="cell";c.firstChild&&(h=c.firstChild.type.spec.tableRole);let p=[];for(let g=0;g<f;g++)p.push(Me(n.schema)[h].createAndFill());let m=(a==0||s==a-1)&&l==a?u+1:d-1;r.insert(r.mapping.map(m),p)}u=d}return r.setMeta(Qw,{fixTables:!0})}function xt(n){let e=n.selection,t=Lo(n),r=t.node(-1),i=t.start(-1),o=ue.get(r),s;return e instanceof Y?s=o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s=o.findCell(t.pos-i),s.tableStart=i,s.map=o,s.table=r,s}function ff(n,{map:e,tableStart:t,table:r},i){let o=i>0?-1:0;Hw(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let s=0;s<e.height;s++){let l=s*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){let a=e.map[l],u=r.nodeAt(a);n.setNodeMarkup(n.mapping.map(t+a),null,af(u.attrs,i-e.colCount(a))),s+=u.attrs.rowspan-1}else{let a=o==null?Me(r.type.schema).cell:r.nodeAt(e.map[l+o]).type,u=e.positionAt(s,i,r);n.insert(n.mapping.map(t+u),a.createAndFill())}}return n}function eD(n,e){if(!ct(n))return!1;if(e){let t=xt(n);e(ff(n.tr,t,t.left))}return!0}function tD(n,e){if(!ct(n))return!1;if(e){let t=xt(n);e(ff(n.tr,t,t.right))}return!0}function nD(n,{map:e,table:t,tableStart:r},i){let o=n.mapping.maps.length;for(let s=0;s<e.height;){let l=s*e.width+i,a=e.map[l],u=t.nodeAt(a);if(i>0&&e.map[l-1]==a||i<e.width-1&&e.map[l+1]==a)n.setNodeMarkup(n.mapping.slice(o).map(r+a),null,An(u.attrs,i-e.colCount(a)));else{let c=n.mapping.slice(o).map(r+a);n.delete(c,c+u.nodeSize)}s+=u.attrs.rowspan}}function rD(n,e){if(!ct(n))return!1;if(e){let t=xt(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;nD(r,t,i),i!=t.left;i--)t.table=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc,t.map=ue.get(t.table);e(r)}return!0}function iD(n,e,t){let r=Me(e.type.schema).header_cell;for(let i=0;i<n.width;i++)if(e.nodeAt(n.map[i+t*n.width]).type!=r)return!1;return!0}function hf(n,{map:e,tableStart:t,table:r},i){let o=t;for(let a=0;a<i;a++)o+=r.child(a).nodeSize;let s=[],l=i>0?-1:0;iD(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let a=0,u=e.width*i;a<e.width;a++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){let c=e.map[u],d=r.nodeAt(c).attrs;n.setNodeMarkup(t+c,null,ve(d,"rowspan",d.rowspan+1)),a+=d.colspan-1}else{let c=l==null?Me(r.type.schema).cell:r.nodeAt(e.map[u+l*e.width]).type;s.push(c.createAndFill())}return n.insert(o,Me(r.type.schema).row.create(null,s)),n}function oD(n,e){if(!ct(n))return!1;if(e){let t=xt(n);e(hf(n.tr,t,t.top))}return!0}function sD(n,e){if(!ct(n))return!1;if(e){let t=xt(n);e(hf(n.tr,t,t.bottom))}return!0}function lD(n,{map:e,table:t,tableStart:r},i){let o=0;for(let a=0;a<i;a++)o+=t.child(a).nodeSize;let s=o+t.child(i).nodeSize,l=n.mapping.maps.length;n.delete(o+r,s+r);for(let a=0,u=i*e.width;a<e.width;a++,u++){let c=e.map[u];if(i>0&&c==e.map[u-e.width]){let d=t.nodeAt(c).attrs;n.setNodeMarkup(n.mapping.slice(l).map(c+r),null,ve(d,"rowspan",d.rowspan-1)),a+=d.colspan-1}else if(i<e.width&&c==e.map[u+e.width]){let d=t.nodeAt(c),f=d.type.create(ve(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),h=e.positionAt(i+1,a,t);n.insert(n.mapping.slice(l).map(r+h),f),a+=d.attrs.colspan-1}}}function aD(n,e){if(!ct(n))return!1;if(e){let t=xt(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;lD(r,t,i),i!=t.top;i--)t.table=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc,t.map=ue.get(t.table);e(r)}return!0}function zu(n){let e=n.content;return e.childCount==1&&e.firstChild.isTextblock&&e.firstChild.childCount==0}function uD({width:n,height:e,map:t},r){let i=r.top*n+r.left,o=i,s=(r.bottom-1)*n+r.left,l=i+(r.right-r.left-1);for(let a=r.top;a<r.bottom;a++){if(r.left>0&&t[o]==t[o-1]||r.right<n&&t[l]==t[l+1])return!0;o+=n,l+=n}for(let a=r.left;a<r.right;a++){if(r.top>0&&t[i]==t[i-n]||r.bottom<e&&t[s]==t[s+n])return!0;i++,s++}return!1}function Hu(n,e){let t=n.selection;if(!(t instanceof Y)||t.$anchorCell.pos==t.$headCell.pos)return!1;let r=xt(n),{map:i}=r;if(uD(i,r))return!1;if(e){let o=n.tr,s={},l=M.empty,a,u;for(let c=r.top;c<r.bottom;c++)for(let d=r.left;d<r.right;d++){let f=i.map[c*i.width+d],h=r.table.nodeAt(f);if(!s[f])if(s[f]=!0,a==null)a=f,u=h;else{zu(h)||(l=l.append(h.content));let p=o.mapping.map(f+r.tableStart);o.delete(p,p+h.nodeSize)}}if(o.setNodeMarkup(a+r.tableStart,null,ve(af(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),"rowspan",r.bottom-r.top)),l.size){let c=a+1+u.content.size,d=zu(u)?a+1:c;o.replaceWith(d+r.tableStart,c+r.tableStart,l)}o.setSelection(new Y(o.doc.resolve(a+r.tableStart))),e(o)}return!0}function $u(n,e){const t=Me(n.schema);return cD(({node:r})=>t[r.type.spec.tableRole])(n,e)}function cD(n){return(e,t)=>{let r=e.selection,i,o;if(r instanceof Y){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,o=r.$anchorCell.pos}else{if(i=Rw(r.$from),!i)return!1;o=mr(r.$from).pos}if(i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(t){let s=i.attrs,l=[],a=s.colwidth;s.rowspan>1&&(s=ve(s,"rowspan",1)),s.colspan>1&&(s=ve(s,"colspan",1));let u=xt(e),c=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(a?ve(s,"colwidth",a&&a[f]?[a[f]]:null):s);let d;for(let f=u.top;f<u.bottom;f++){let h=u.map.positionAt(f,u.left,u.table);f==u.top&&(h+=i.nodeSize);for(let p=u.left,m=0;p<u.right;p++,m++)p==u.left&&f==u.top||c.insert(d=c.mapping.map(h+u.tableStart,1),n({node:i,row:f,col:p}).createAndFill(l[m]))}c.setNodeMarkup(o,n({node:i,row:u.top,col:u.left}),l[0]),r instanceof Y&&c.setSelection(new Y(c.doc.resolve(r.$anchorCell.pos),d&&c.doc.resolve(d))),t(c)}return!0}}function dD(n,e){return function(t,r){if(!ct(t))return!1;let i=Lo(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){let o=t.tr;t.selection instanceof Y?t.selection.forEachCell((s,l)=>{s.attrs[n]!==e&&o.setNodeMarkup(l,null,ve(s.attrs,n,e))}):o.setNodeMarkup(i.pos,null,ve(i.nodeAfter.attrs,n,e)),r(o)}return!0}}function fD(n){return function(e,t){if(!ct(e))return!1;if(t){let r=Me(e.schema),i=xt(e),o=e.tr,s=i.map.cellsInRect(n=="column"?new fr(i.left,0,i.right,i.map.height):n=="row"?new fr(0,i.top,i.map.width,i.bottom):i),l=s.map(a=>i.table.nodeAt(a));for(let a=0;a<s.length;a++)l[a].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[a],r.cell,l[a].attrs);if(o.steps.length==0)for(let a=0;a<s.length;a++)o.setNodeMarkup(i.tableStart+s[a],r.header_cell,l[a].attrs);t(o)}return!0}}function Vu(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==t.header_cell)return!1}return!0}function ei(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?fD(n):function(t,r){if(!ct(t))return!1;if(r){let i=Me(t.schema),o=xt(t),s=t.tr,l=Vu("row",o,i),a=Vu("column",o,i),c=(n==="column"?l:n==="row"?a:!1)?1:0,d=n=="column"?new fr(0,c,1,o.map.height):n=="row"?new fr(c,0,o.map.width,1):o,f=n=="column"?a?i.cell:i.header_cell:n=="row"?l?i.cell:i.header_cell:i.cell;o.map.cellsInRect(d).forEach(h=>{const p=h+o.tableStart,m=s.doc.nodeAt(p);m&&s.setNodeMarkup(p,f,m.attrs)}),r(s)}return!0}}ei("row",{useDeprecatedLogic:!0});ei("column",{useDeprecatedLogic:!0});let hD=ei("cell",{useDeprecatedLogic:!0});function pD(n,e){if(e<0){let t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){let o=n.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;let t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){let o=t.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}}function ju(n){return function(e,t){if(!ct(e))return!1;let r=pD(Lo(e),n);if(r!=null){if(t){let i=e.doc.resolve(r);t(e.tr.setSelection(j.between(i,zw(i))).scrollIntoView())}return!0}}}function mD(n,e){let t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}let gD=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),qs(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,qs(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function qs(n,e,t,r,i,o){let s=0,l=!0,a=e.firstChild,u=n.firstChild;for(let c=0,d=0;c<u.childCount;c++){let{colspan:f,colwidth:h}=u.child(c).attrs;for(let p=0;p<f;p++,d++){let m=i==d?o:h&&h[p],g=m?m+"px":"";s+=m||r,m||(l=!1),a?(a.style.width!=g&&(a.style.width=g),a=a.nextSibling):e.appendChild(document.createElement("col")).style.width=g}}for(;a;){let c=a.nextSibling;a.parentNode.removeChild(a),a=c}l?(t.style.width=s+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=s+"px")}const Ye=new Be("tableColumnResizing");function yD({handleWidth:n=5,cellMinWidth:e=25,View:t=gD,lastColumnResizable:r=!0}={}){return new pe({key:Ye,state:{init(o,s){return this.spec.props.nodeViews[Me(s.schema).table.name]=(l,a)=>new t(l,e,a),new Ur(-1,!1)},apply(o,s){return s.apply(o)}},props:{attributes(o){return Ye.getState(o).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove(o,s){vD(o,s,n,e,r)},mouseleave(o){bD(o)},mousedown(o,s){wD(o,s,e)}},decorations(o){let s=Ye.getState(o);if(s.activeHandle>-1)return AD(o,s.activeHandle)},nodeViews:{}}})}class Ur{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){let t=this,r=e.getMeta(Ye);if(r&&r.setHandle!=null)return new Ur(r.setHandle,null);if(r&&r.setDragging!==void 0)return new Ur(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);Us(e.doc.resolve(i))||(i=null),t=new Ur(i,t.dragging)}return t}}function vD(n,e,t,r,i){let o=Ye.getState(n.state);if(!o.dragging){let s=CD(e.target),l=-1;if(s){let{left:a,right:u}=s.getBoundingClientRect();e.clientX-a<=t?l=_u(n,e,"left"):u-e.clientX<=t&&(l=_u(n,e,"right"))}if(l!=o.activeHandle){if(!i&&l!==-1){let a=n.state.doc.resolve(l),u=a.node(-1),c=ue.get(u),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}pf(n,l)}}}function bD(n){let e=Ye.getState(n.state);e.activeHandle>-1&&!e.dragging&&pf(n,-1)}function wD(n,e,t){let r=Ye.getState(n.state);if(r.activeHandle==-1||r.dragging)return!1;let i=n.state.doc.nodeAt(r.activeHandle),o=DD(n,r.activeHandle,i.attrs);n.dispatch(n.state.tr.setMeta(Ye,{setDragging:{startX:e.clientX,startWidth:o}}));function s(a){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",l);let u=Ye.getState(n.state);u.dragging&&(xD(n,u.activeHandle,Wu(u.dragging,a,t)),n.dispatch(n.state.tr.setMeta(Ye,{setDragging:null})))}function l(a){if(!a.which)return s(a);let u=Ye.getState(n.state),c=Wu(u.dragging,a,t);kD(n,u.activeHandle,c,t)}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",l),e.preventDefault(),!0}function DD(n,e,{colspan:t,colwidth:r}){let i=r&&r[r.length-1];if(i)return i;let o=n.domAtPos(e),l=o.node.childNodes[o.offset].offsetWidth,a=t;if(r)for(let u=0;u<t;u++)r[u]&&(l-=r[u],a--);return l/a}function CD(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList.contains("ProseMirror")?null:n.parentNode;return n}function _u(n,e,t){let r=n.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;let{pos:i}=r,o=mr(n.state.doc.resolve(i));if(!o)return-1;if(t=="right")return o.pos;let s=ue.get(o.node(-1)),l=o.start(-1),a=s.map.indexOf(o.pos-l);return a%s.width==0?-1:l+s.map[a-1]}function Wu(n,e,t){let r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function pf(n,e){n.dispatch(n.state.tr.setMeta(Ye,{setHandle:e}))}function xD(n,e,t){let r=n.state.doc.resolve(e),i=r.node(-1),o=ue.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=n.state.tr;for(let u=0;u<o.height;u++){let c=u*o.width+l;if(u&&o.map[c]==o.map[c-o.width])continue;let d=o.map[c],{attrs:f}=i.nodeAt(d),h=f.colspan==1?0:l-o.colCount(d);if(f.colwidth&&f.colwidth[h]==t)continue;let p=f.colwidth?f.colwidth.slice():SD(f.colspan);p[h]=t,a.setNodeMarkup(s+d,null,ve(f,"colwidth",p))}a.docChanged&&n.dispatch(a)}function kD(n,e,t,r){let i=n.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),l=ue.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,a=n.domAtPos(i.start(-1)).node;for(;a.nodeName!="TABLE";)a=a.parentNode;qs(o,a.firstChild,a,r,l,t)}function SD(n){let e=[];for(let t=0;t<n;t++)e.push(0);return e}function AD(n,e){let t=[],r=n.doc.resolve(e),i=r.node(-1),o=ue.get(i),s=r.start(-1),l=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let a=0;a<o.height;a++){let u=l+a*o.width-1;if((l==o.width||o.map[u]!=o.map[u+1])&&(a==0||o.map[u-1]!=o.map[u-1-o.width])){let c=o.map[u],d=s+c+i.nodeAt(c).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",t.push(Oe.widget(d,f))}}return le.create(n.doc,t)}function ED({allowTableNodeSelection:n=!1}={}){return new pe({key:_t,state:{init(){return null},apply(e,t){let r=e.getMeta(_t);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;let{deleted:i,pos:o}=e.mapping.mapResult(t);return i?null:o}},props:{decorations:$w,handleDOMEvents:{mousedown:Xw},createSelectionBetween(e){if(_t.getState(e.state)!=null)return e.state.selection},handleTripleClick:Jw,handleKeyDown:Gw,handlePaste:Yw},appendTransaction(e,t,r){return _w(r,df(r,t),n)}})}function Uu(n,e,t,r,i,o){let s=0,l=!0,a=e.firstChild;const u=n.firstChild;for(let c=0,d=0;c<u.childCount;c+=1){const{colspan:f,colwidth:h}=u.child(c).attrs;for(let p=0;p<f;p+=1,d+=1){const m=i===d?o:h&&h[p],g=m?`${m}px`:"";s+=m||r,m||(l=!1),a?(a.style.width!==g&&(a.style.width=g),a=a.nextSibling):e.appendChild(document.createElement("col")).style.width=g}}for(;a;){const c=a.nextSibling;a.parentNode.removeChild(a),a=c}l?(t.style.width=`${s}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${s}px`)}class MD{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Uu(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,Uu(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function Ku(n,e){return e?n.createChecked(null,e):n.createAndFill()}function TD(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function OD(n,e,t,r,i){const o=TD(n),s=[],l=[];for(let u=0;u<t;u+=1){const c=Ku(o.cell,i);if(c&&l.push(c),r){const d=Ku(o.header_cell,i);d&&s.push(d)}}const a=[];for(let u=0;u<e;u+=1)a.push(o.row.createChecked(null,r&&u===0?s:l));return o.table.createChecked(null,a)}function ND(n){return n instanceof Y}const Mi=({editor:n})=>{const{selection:e}=n.state;if(!ND(e))return!1;let t=0;const r=wd(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},FD=ce.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:MD,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:n}){return["table",se(this.options.HTMLAttributes,n),["tbody",0]]},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const s=OD(o.schema,n,e,t);if(i){const l=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(j.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>eD(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>tD(n,e),deleteColumn:()=>({state:n,dispatch:e})=>rD(n,e),addRowBefore:()=>({state:n,dispatch:e})=>oD(n,e),addRowAfter:()=>({state:n,dispatch:e})=>sD(n,e),deleteRow:()=>({state:n,dispatch:e})=>aD(n,e),deleteTable:()=>({state:n,dispatch:e})=>mD(n,e),mergeCells:()=>({state:n,dispatch:e})=>Hu(n,e),splitCell:()=>({state:n,dispatch:e})=>$u(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>ei("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>ei("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>hD(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>Hu(n,e)?!0:$u(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>dD(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>ju(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>ju(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&df(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=Y.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Mi,"Mod-Backspace":Mi,Delete:Mi,"Mod-Delete":Mi}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[yD({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],ED({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:K(P(n,"tableRole",e))}}}),ID=ce.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",se(this.options.HTMLAttributes,n),0]}}),BD=ce.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",se(this.options.HTMLAttributes,n),0]}}),PD=ce.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",se(this.options.HTMLAttributes,n),0]}}),RD=ce.create({name:"iframe",group:"block",atom:!0,addOptions(){return{allowFullscreen:!0,HTMLAttributes:{class:"nc-iframe-wrapper"}}},addAttributes(){return{src:{default:null},frameborder:{default:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:n}){return["div",this.options.HTMLAttributes,["iframe",n]]},addCommands(){return{setIframe:n=>({tr:e,dispatch:t})=>{const{selection:r}=e,i=this.type.create(n);return t&&e.replaceRangeWith(r.from,r.to,i),!0}}}}),mf=({className:n="text-neutral-700 border border-neutral-200 dark:text-neutral-200 dark:border-neutral-700",...e})=>w(Jf,{className:`ttnc-ButtonThird ${n}`,...e}),LD=({action:n,children:e})=>{let[t,r]=A.useState(!1),[i]=A.useState([X["Insert from URL"],X.Upload]);const[o,s]=A.useState(""),[l,a]=A.useState("");function u(){r(!1)}function c(){r(!0)}const d=()=>{n({url:o,alt:l}),u()},f=()=>z("div",{children:[w("div",{className:"relative flex flex-col px-5 py-6 space-y-5",children:m()}),z("div",{className:"p-5 bg-neutral-50 dark:bg-neutral-900 dark:border-t dark:border-neutral-800 flex items-center justify-between",children:[w(mf,{onClick:u,sizeClass:"px-4 py-2 sm:px-5",children:X.Cancel}),w(hr,{disabled:!o,onClick:d,sizeClass:"px-4 py-2 sm:px-5",children:X.Apply})]})]}),h=()=>z(Xn,{children:[z("form",{className:"block",onSubmit:g=>{g.preventDefault(),d()},children:[w(qe,{children:X["Image URL"]}),w(pn,{className:"mt-1",rounded:"rounded-xl",type:"text",placeholder:"Paste or type URL",onChange:g=>s(g.target.value),defaultValue:o})]}),z("form",{className:"block",onSubmit:g=>{g.preventDefault(),d()},children:[w(qe,{children:X["Alt text (alternative text)"]}),w(pn,{className:"mt-1",rounded:"rounded-xl",type:"text",onChange:g=>a(g.target.value),defaultValue:l})]})]}),p=()=>z("div",{children:[w(Ys,{onChangeImage:g=>{s(g.sourceUrl)}}),o&&z("div",{className:"mt-4",children:[w(qe,{children:X["Alt text (alternative text)"]}),w(pn,{className:"mt-1",rounded:"rounded-xl",type:"text",onChange:g=>a(g.target.value),defaultValue:l})]})]}),m=()=>w("div",{children:z(Dr.Group,{children:[w(Dr.List,{className:"flex p-1 space-x-1 bg-primary-900/10 dark:bg-primary-100/10 rounded-xl",children:i.map(g=>w(Dr,{className:({selected:v})=>`w-full py-2.5 text-sm leading-5 font-medium rounded-lg focus:outline-none focus:ring-2 ring-offset-2 
                  ring-offset-blue-400 ring-white/60 dark:ring-black/0 ${v?"bg-white dark:bg-neutral-900 text-primary-700 dark:text-primary-100 shadow":" hover:bg-white/30 dark:hover:bg-black/[0.15] text-neutral-6000 dark:text-primary-200 "}`,children:g},g))}),w(Dr.Panels,{className:"mt-2",children:i.map((g,v)=>w(Dr.Panel,{className:`bg-neutral-50 dark:bg-black/10 rounded-xl p-4 space-y-5 focus:outline-none 
                  focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white/60 dark:ring-black/0`,children:v?p():h()},v))})]})});return z(Xn,{children:[w("div",{className:"inline-flex",onClick:c,children:e}),w(wo,{contentPaddingClass:"",isOpenProp:t,onCloseModal:u,contentExtraClass:"max-w-screen-md",renderContent:f,renderTrigger:()=>null,modalTitle:"Add Image"})]})};const Xl=({icon:n,action:e,title:t,isActive:r,className:i="flex-shrink-0 mr-2"})=>t==="image"?w(LD,{action:e,children:w("button",{className:`menu-item ${i} ${r&&r()?" is-active":""}`,title:t,children:w("div",{className:"menu-item-svg",dangerouslySetInnerHTML:{__html:n}})})}):w("button",{className:`menu-item ${i} ${r&&r()?" is-active":""}`,onClick:e,title:t,children:w("div",{className:"menu-item-svg",dangerouslySetInnerHTML:{__html:n}})});const zD=({data:n=[],editor:e})=>z(Wt,{as:"div",className:"relative hidden lg:inline-block text-left ml-auto",children:[w(Wt.Button,{className:"ml-auto menu-item",title:"more",children:w("div",{className:"menu-item-svg",children:w("svg",{className:"crayons-icon c-btn__icon","aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 17a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm0-7a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm2-5a2 2 0 1 0-4 0 2 2 0 0 0 4 0Z"})})})}),w(Ri,{as:A.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:w(Wt.Items,{className:"absolute w-auto top-0 right-0 origin-top-right bg-white dark:bg-neutral-900 rounded-2xl divide-y divide-neutral-100 shadow-lg ring-1 ring-black dark:ring-white ring-opacity-5 dark:ring-opacity-10 focus:outline-none z-40",children:w("div",{className:"p-2.5 text-sm text-neutral-6000 dark:text-neutral-300 flex items-center",children:n.map((t,r)=>w(Wt.Item,{as:"div",children:t.type==="divider"?w("div",{className:"divider"}):w(Xl,{icon:t.icon,action:t.action,title:t.title,isActive:t.isActive,className:"mr-0.5"})},r))})})})]}),HD=({action:n,icon:e,title:t,isActive:r,editor:i})=>{const[o]=A.useState([{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z"/></svg>',title:"Heading 1",action:()=>i.chain().focus().toggleHeading({level:1}).run(),isActive:()=>i.isActive("heading",{level:1})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z"/></svg>',title:"Heading 2",action:()=>i.chain().focus().toggleHeading({level:2}).run(),isActive:()=>i.isActive("heading",{level:2})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z"/></svg>',title:"Heading 3",action:()=>i.chain().focus().toggleHeading({level:3}).run(),isActive:()=>i.isActive("heading",{level:3})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z"/></svg>',title:"Heading 4",action:()=>i.chain().focus().toggleHeading({level:4}).run(),isActive:()=>i.isActive("heading",{level:4})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z"/></svg>',title:"Heading 5",action:()=>i.chain().focus().toggleHeading({level:5}).run(),isActive:()=>i.isActive("heading",{level:5})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z"/></svg>',title:"Heading 6",action:()=>i.chain().focus().toggleHeading({level:6}).run(),isActive:()=>i.isActive("heading",{level:6})}]);return w(Xn,{children:z(Wt,{as:"div",className:"relative inline-block text-left",children:[w(Wt.Button,{as:"div",children:w(Xl,{icon:e,title:t,isActive:r,action:n})}),w(Ri,{as:A.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:w(Wt.Items,{className:"focus:outline-none absolute right-0 mt-3 w-52 origin-top-right rounded-2xl bg-white dark:bg-neutral-800 shadow-lg ring-1 ring-black ring-opacity-5",children:w("div",{className:"p-3 space-y-1",children:o.map(s=>w(Wt.Item,{children:({active:l})=>z("button",{className:`${l||s.isActive&&s.isActive()?"bg-primary-100 dark:bg-neutral-700 text-primary-900":""} p-2 flex w-full items-center rounded-lg text-neutral-900 dark:text-white hover:bg-primary-100 dark:hover:bg-neutral-700 hover:text-primary-900 `,onClick:s.action,children:[w("div",{className:"menu-item-svg flex flex-shrink-0 items-center justify-center h-6 w-6",dangerouslySetInnerHTML:{__html:s.icon}}),z("span",{className:"ml-4",children:[" ",s.title]})]})},s.title))})})})]})})},$D=({show:n,onCloseModal:e,onSubmit:t})=>{const[r,i]=W.useState(""),o=A.useRef(null),s=a=>{a.preventDefault(),t(r),e()};return w(wo,{renderTrigger:()=>null,isOpenProp:n,renderContent:()=>z("form",{action:"/#",onSubmit:s,children:[w(qe,{children:X["Type the URL of the iframe you want to embed"]}),w(pn,{required:!0,className:"mt-1",type:"text",onChange:a=>i(a.currentTarget.value),ref:o}),z("div",{className:"mt-4 space-x-3",children:[w(hr,{type:"submit",children:X.Apply}),w(Kr,{type:"button",onClick:e,children:X.Cancel})]})]}),onCloseModal:e,contentExtraClass:"max-w-screen-sm",modalTitle:"Iframe URL",initialFocusRef:o})},gf=({onSubmit:n,isOpen:e,onCloseModal:t,defaultLink:r})=>{const i=A.useRef(null),[o,s]=A.useState("");A.useEffect(()=>{s(r)},[r]);function l(){t()}const a=()=>{n(o),l()},u=()=>{n(""),l()},c=()=>z("div",{children:[w("div",{className:"relative flex flex-col px-5 py-6 space-y-5",children:d()}),z("div",{className:"p-5 bg-neutral-50 dark:bg-neutral-900 dark:border-t dark:border-neutral-800 flex items-center justify-between",children:[w(mf,{onClick:l,sizeClass:"px-4 py-2 sm:px-5",children:X.Cancel}),z("div",{children:[w(Kr,{className:"ml-2",onClick:u,sizeClass:"px-4 py-2 sm:px-5",children:X["Unset link"]}),w(hr,{className:"ml-2",onClick:a,sizeClass:"px-4 py-2 sm:px-5",children:X.Apply})]})]})]}),d=()=>w(Xn,{children:z("form",{className:"block",onSubmit:f=>{f.preventDefault(),a()},action:"/#",children:[w(qe,{children:X["Paste or type a link"]}),w(pn,{className:"mt-1",rounded:"rounded-xl",type:"text",onChange:f=>s(f.target.value),defaultValue:o,ref:i})]})});return w(wo,{contentPaddingClass:"",isOpenProp:e,onCloseModal:l,contentExtraClass:"max-w-screen-md",renderContent:c,renderTrigger:()=>null,modalTitle:"",initialFocusRef:i})},VD=({editor:n})=>{var m;const[e]=A.useState([{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"/></svg>',title:"Bold",action:()=>n.chain().focus().toggleBold().run(),isActive:()=>n.isActive("bold")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"/></svg>',title:"Italic",action:()=>n.chain().focus().toggleItalic().run(),isActive:()=>n.isActive("italic")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"/></svg>',title:"Link",action:()=>u(),isActive:()=>n.isActive("link")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M17 11V4h2v17h-2v-8H7v8H5V4h2v7z"/></svg>',title:"Heading",action:()=>{},isActive:()=>n.isActive("heading")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M4.583 17.321C3.553 16.227 3 15 3 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179zm10 0C13.553 16.227 13 15 13 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179z"/></svg>',title:"Blockquote",action:()=>n.chain().focus().toggleBlockquote().run(),isActive:()=>n.isActive("blockquote")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 4h13v2H8V4zm-5-.5h3v3H3v-3zm0 7h3v3H3v-3zm0 7h3v3H3v-3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"/></svg>',title:"Bullet List",action:()=>n.chain().focus().toggleBulletList().run(),isActive:()=>n.isActive("bulletList")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"/></svg>',title:"Ordered List",action:()=>n.chain().focus().toggleOrderedList().run(),isActive:()=>n.isActive("orderedList")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M24 12l-5.657 5.657-1.414-1.414L21.172 12l-4.243-4.243 1.414-1.414L24 12zM2.828 12l4.243 4.243-1.414 1.414L0 12l5.657-5.657L7.07 7.757 2.828 12zm6.96 9H7.66l6.552-18h2.128L9.788 21z"/></svg>',title:"Code",action:()=>n.chain().focus().toggleCode().run(),isActive:()=>n.isActive("code")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2v14h16V5H4zm16 7l-3.536 3.536-1.414-1.415L17.172 12 15.05 9.879l1.414-1.415L20 12zM6.828 12l2.122 2.121-1.414 1.415L4 12l3.536-3.536L8.95 9.88 6.828 12zm4.416 5H9.116l3.64-10h2.128l-3.64 10z"/></svg>',title:"Code Block",action:()=>n.chain().focus().toggleCodeBlock().run(),isActive:()=>n.isActive("codeBlock")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M4.828 21l-.02.02-.021-.02H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 0 1-.992.993H4.828zM20 15V5H4v14L14 9l6 6zm0 2.828l-6-6L6.828 19H20v-1.172zM8 11a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg>',title:"image",action:({url:g,alt:v,title:b})=>c({url:g,alt:v,title:b}),isActive:()=>n.isActive("addImage")}]),[t]=A.useState([{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z"/></svg>',title:"align left",action:()=>n.chain().focus().setTextAlign("left").run(),isActive:()=>n.isActive({textAlign:"left"})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z"/></svg>',title:"align center",action:()=>n.chain().focus().setTextAlign("center").run(),isActive:()=>n.isActive({textAlign:"center"})},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z"/></svg>',title:"align right",action:()=>n.chain().focus().setTextAlign("right").run(),isActive:()=>n.isActive({textAlign:"right"})},{type:"divider"},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z"/></svg>',title:"Underline",action:()=>n.chain().focus().toggleUnderline().run(),isActive:()=>n.isActive("underline")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z"/></svg>',title:"Strike",action:()=>n.chain().focus().toggleStrike().run(),isActive:()=>n.isActive("strike")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M15.95 2.393l5.657 5.657a1 1 0 0 1 0 1.414l-7.779 7.779-2.12.707-1.415 1.414a1 1 0 0 1-1.414 0l-4.243-4.243a1 1 0 0 1 0-1.414l1.414-1.414.707-2.121 7.779-7.779a1 1 0 0 1 1.414 0zm.707 3.536l-6.364 6.364 1.414 1.414 6.364-6.364-1.414-1.414zM4.282 16.889l2.829 2.829-1.414 1.414-4.243-1.414 2.828-2.829z"/></svg>',title:"Highlight",action:()=>n.chain().focus().toggleHighlight().run(),isActive:()=>n.isActive("highlight")},{icon:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6">
      <path fill="none" d="M0 0h24v24H0z"/><path d="M3 3.993C3 3.445 3.445 3 3.993 3h16.014c.548 0 .993.445.993.993v16.014a.994.994 0 0 1-.993.993H3.993A.994.994 0 0 1 3 20.007V3.993zM5 5v14h14V5H5zm5.622 3.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"/></svg>`,title:"iframe",action:()=>a(),isActive:()=>n.isActive("addIframe")},{type:"divider"},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z"/></svg>',title:"Horizontal Rule",action:()=>n.chain().focus().setHorizontalRule().run()},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 18h1.5a2.5 2.5 0 1 0 0-5H3v-2h13.5a4.5 4.5 0 1 1 0 9H15v2l-4-3 4-3v2zM3 4h18v2H3V4zm6 14v2H3v-2h6z"/></svg>',title:"Hard Break",action:()=>n.chain().focus().setHardBreak().run()},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M12.651 14.065L11.605 20H9.574l1.35-7.661-7.41-7.41L4.93 3.515 20.485 19.07l-1.414 1.414-6.42-6.42zm-.878-6.535l.27-1.53h-1.8l-2-2H20v2h-5.927L13.5 9.257 11.773 7.53z"/></svg>',title:"Clear Format",action:()=>n.chain().focus().clearNodes().unsetAllMarks().run()},{type:"divider"},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 7v4L2 6l6-5v4h5a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H8z"/></svg>',title:"Undo",action:()=>n.chain().focus().undo().run()},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z"/></svg>',title:"Redo",action:()=>n.chain().focus().redo().run()}]),[r]=A.useState(((m=document.getElementById("wpadminbar"))==null?void 0:m.clientHeight)||0),[i,o]=A.useState(!1),[s,l]=A.useState(!1),a=()=>{o(!0)},u=()=>{l(!0)},c=({url:g,alt:v,title:b})=>{g&&n.chain().focus().setImage({src:g,alt:v,title:b}).run()},d=g=>{if(g!==null){if(g===""){n.chain().focus().extendMarkRange("link").unsetLink().run();return}n.chain().focus().extendMarkRange("link").setLink({href:g}).run()}},{width:f}=Gf(),h=f||window.innerWidth,p=h<=1024?[...e,...t]:e;return w("div",{className:"editor__header sticky bg-neutral-100 dark:bg-neutral-800 px-2 lg:px-0 py-5 overflow-hidden lg:overflow-visible flex justify-center z-10",style:{top:h<=600?0:r},children:w("div",{className:"  w-full max-w-screen-md",children:z("div",{className:"flex items-center overflow-x-auto lg:overflow-x-visible -mx-2.5",children:[p.map((g,v)=>w(A.Fragment,{children:g.type==="divider"?w("div",{className:"divider"}):g.title==="Heading"?w(HD,{...g,editor:n}):w(Xl,{...g})},v)),w($D,{show:i,onSubmit:g=>{g&&n.chain().focus().setIframe({src:g}).run()},onCloseModal:()=>o(!1)}),w(gf,{onCloseModal:()=>l(!1),isOpen:s,onSubmit:g=>d(g),defaultLink:(()=>!n.getAttributes("link").href||typeof n.getAttributes("link").href!="string"?"":n.getAttributes("link").href||"")()}),w(zD,{data:t,editor:n})]})})})};const jD=({editor:n})=>{const[e]=A.useState([{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"/></svg>',title:"Bold",action:()=>n.chain().focus().toggleBold().run(),isActive:()=>n.isActive("bold")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"/></svg>',title:"Italic",action:()=>n.chain().focus().toggleItalic().run(),isActive:()=>n.isActive("italic")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"/></svg>',title:"Link",action:()=>i(),isActive:()=>n.isActive("link")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M17 17h5v2h-3v3h-2v-5zM7 7H2V5h3V2h2v5zm11.364 8.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"/></svg>',title:"Unlink",action:()=>n.chain().focus().unsetLink().run(),isActive:()=>n.isActive("link")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M4.583 17.321C3.553 16.227 3 15 3 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179zm10 0C13.553 16.227 13 15 13 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179z"/></svg>',title:"Blockquote",action:()=>n.chain().focus().toggleBlockquote().run(),isActive:()=>n.isActive("blockquote")},{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 sm:w-6 sm:h-6"><path fill="none" d="M0 0h24v24H0z"/><path d="M24 12l-5.657 5.657-1.414-1.414L21.172 12l-4.243-4.243 1.414-1.414L24 12zM2.828 12l4.243 4.243-1.414 1.414L0 12l5.657-5.657L7.07 7.757 2.828 12zm6.96 9H7.66l6.552-18h2.128L9.788 21z"/></svg>',title:"Code",action:()=>n.chain().focus().toggleCode().run(),isActive:()=>n.isActive("code")}]),[t,r]=A.useState(!1),i=()=>{r(!0)},o=l=>{if(l!==null){if(l===""){n.chain().focus().extendMarkRange("link").unsetLink().run();return}n.chain().focus().extendMarkRange("link").setLink({href:l}).run()}},s=l=>w("button",{className:`px-1.5 ${l.isActive&&l.isActive()?" is-active text-green-500":""}`,onClick:l.action,title:l.title,children:w("div",{className:"menu-item-svg",dangerouslySetInnerHTML:{__html:l.icon}})});return z(Qv,{className:"p-3 bg-neutral-800 dark:bg-neutral-200 text-neutral-200 dark:text-neutral-900 flex justify-center rounded-xl",editor:n,tippyOptions:{duration:100},children:[e.map((l,a)=>w(A.Fragment,{children:s(l)},l.title)),w(gf,{onCloseModal:()=>r(!1),isOpen:t,onSubmit:l=>o(l),defaultLink:(()=>!n.getAttributes("link").href||typeof n.getAttributes("link").href!="string"?"":n.getAttributes("link").href||"")()})]})},_D=({onUpdate:n,defaultContent:e=""})=>{const t=Gd({extensions:[ef,uw,cw,FD,BD,PD,ID,RD,Mw.configure({openOnClick:!1}),tf.configure({placeholder:X["Write your post content here…"],showOnlyCurrent:!1}),Tw.configure({types:["heading","paragraph"]}),Nw.configure({allowBase64:!0,inline:!0,HTMLAttributes:{class:"ncmaz-custom-img-editor rounded"}})],editorProps:{attributes:{class:"focus:outline-none prose prose-neutral lg:prose-lg dark:prose-invert max-w-screen-md mx-auto min-h-[500px]"}},content:e,onUpdate:({editor:r})=>{n(r)}});return w("div",{className:"nc-TiptapEditor ",children:z("div",{className:"editor ",children:[t&&w(jD,{editor:t}),t&&w(VD,{editor:t}),w(qd,{className:"editor__content focus:outline-none ",editor:t})]})})};function Gs(n){n.preventDefault(),n.returnValue=""}const WD=({})=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,o]=W.useState(),[s,l]=W.useState([]),[a,u]=W.useState([]),[c,d]=W.useState({audioUrl:"",videoUrl:"",excerptText:"",postFormatsSelected:"Standard",objGalleryImgs:{},isAllowComments:!0}),f=Js`
    mutation MUTATION_CREATE_POST(
      $commentStatus: String = "open"
      $status: PostStatusEnum = null
      $title: String = ""
      $excerpt: String = ""
      $ncFeaturedImageDatabaseId: Int = null
      $ncmazAudioUrl: String = null
      $ncmazGalleryImgs_1_databaseID: Int = null
      $ncmazGalleryImgs_2_databaseID: Int = null
      $ncmazGalleryImgs_3_databaseID: Int = null
      $ncmazGalleryImgs_4_databaseID: Int = null
      $ncmazGalleryImgs_5_databaseID: Int = null
      $ncmazGalleryImgs_6_databaseID: Int = null
      $ncmazGalleryImgs_7_databaseID: Int = null
      $ncmazGalleryImgs_8_databaseID: Int = null
      $content: String = ""
      $ncmazVideoUrl: String = null
      $postFormatsSlug: String = null
      $categoryNodes: [PostCategoriesNodeInput] = {}
      $ncTags: String = null
    ) {
      createPost(
        input: {
          status: $status
          commentStatus: $commentStatus
          title: $title
          excerpt: $excerpt
          ncFeaturedImageDatabaseId: $ncFeaturedImageDatabaseId
          ncmazAudioUrl: $ncmazAudioUrl
          ncmazGalleryImgs1DatabaseID: $ncmazGalleryImgs_1_databaseID
          ncmazGalleryImgs2DatabaseID: $ncmazGalleryImgs_2_databaseID
          ncmazGalleryImgs3DatabaseID: $ncmazGalleryImgs_3_databaseID
          ncmazGalleryImgs4DatabaseID: $ncmazGalleryImgs_4_databaseID
          ncmazGalleryImgs5DatabaseID: $ncmazGalleryImgs_5_databaseID
          ncmazGalleryImgs6DatabaseID: $ncmazGalleryImgs_6_databaseID
          ncmazGalleryImgs7DatabaseID: $ncmazGalleryImgs_7_databaseID
          ncmazGalleryImgs8DatabaseID: $ncmazGalleryImgs_8_databaseID
          content: $content
          categories: { append: false, nodes: $categoryNodes }
          ncTags: $ncTags
          ncmazVideoUrl: $ncmazVideoUrl
          postFormats: { nodes: { slug: $postFormatsSlug } }
        }
      ) {
        post {
          title
          link
          id
          postId
          postFormats {
            edges {
              node {
                id
                name
                slug
              }
            }
          }
        }
      }
    }
  `,[h,{error:p,data:m,loading:g}]=If(f),v=A.useDeferredValue(m==null?void 0:m.createPost.post.id);A.useEffect(()=>{window.addEventListener("beforeunload",Gs,!0)},[]),A.useEffect(()=>{!v||!(m!=null&&m.createPost.post.link)||(window.removeEventListener("beforeunload",Gs,!0),Af.success(X["Post successful"]+"!"),setTimeout(()=>{window.location.href=m==null?void 0:m.createPost.post.link},500))},[v]);const b=Fr.debounce(function(N){e(N.getText())},300),C=Fr.debounce(function(N){r(N.getHTML())},400),y=N=>{o(N)},k=N=>{u(N)},D=N=>{l(N)},T=N=>{d(N)},E=N=>{let U={excerpt:N.excerptText,commentStatus:N.isAllowComments?"open":"closed",postFormatsSlug:N.postFormatsSelected!=="Standard"?N.postFormatsSelected:null};return N.postFormatsSelected==="post-format-gallery"&&(U={...U,ncmazGalleryImgs_1_databaseID:N.objGalleryImgs[1].id||null,ncmazGalleryImgs_2_databaseID:N.objGalleryImgs[2].id||null,ncmazGalleryImgs_3_databaseID:N.objGalleryImgs[3].id||null,ncmazGalleryImgs_4_databaseID:N.objGalleryImgs[4].id||null,ncmazGalleryImgs_5_databaseID:N.objGalleryImgs[5].id||null,ncmazGalleryImgs_6_databaseID:N.objGalleryImgs[6].id||null,ncmazGalleryImgs_7_databaseID:N.objGalleryImgs[7].id||null,ncmazGalleryImgs_8_databaseID:N.objGalleryImgs[8].id||null}),N.postFormatsSelected==="post-format-video"&&(U={...U,ncmazVideoUrl:N.videoUrl||null}),N.postFormatsSelected==="post-format-audio"&&(U={...U,ncmazAudioUrl:N.audioUrl||null}),U},O=N=>{const U=E(c),q={status:N,title:n,ncFeaturedImageDatabaseId:(i==null?void 0:i.id)||null,content:t,categoryNodes:a.map(G=>({id:G.id})),ncTags:s.map(G=>G.name).join(","),...U};h({variables:q})},L=()=>{O("PUBLISH")},S=()=>{O("DRAFT")};return w("div",{className:"nc-CreateNewPostEditor ",children:z("div",{className:" bg-white dark:bg-neutral-900 lg:shadow-xl rounded-2xl dark:ring dark:ring-neutral-50/10",children:[(()=>z("div",{className:"pb-10 lg:py-10 w-full max-w-screen-md mx-auto ",children:[z("div",{className:"flex flex-col w-full",children:[w(qe,{className:"block !text-base",children:X["Add a cover image"]}),w(Ys,{defaultImage:i,onChangeImage:y})]}),w(ow,{onChange:k}),w(rw,{defaultTitle:n,onUpdate:b}),w(iw,{onChange:D})]}))(),w(_D,{onUpdate:C}),w("div",{className:"w-full border-b my-2 border-neutral-300 dark:border-neutral-700"}),p&&w(Ef,{containerClassName:"text-sm m-4 mb-0",type:"error",children:p.message}),z("div",{className:"w-full max-w-screen-md mx-auto flex space-x-2 py-8",children:[w(hr,{fontSize:"text-base font-medium",onClick:L,loading:g,disabled:g,children:X.Publish}),w(Kr,{fontSize:"text-base font-medium",className:"ml-2.5",onClick:S,loading:g,disabled:g,children:X["Save draft"]}),w(sw,{defaultData:c,onSubmit:T})]})]})})},mC=Object.freeze(Object.defineProperty({__proto__:null,default:WD,handleBeforeunload:Gs},Symbol.toStringTag,{value:"Module"}));export{ow as C,sw as P,_D as T,rw as a,iw as b,mC as c,Gs as h};
