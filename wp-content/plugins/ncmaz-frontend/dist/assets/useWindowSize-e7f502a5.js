import{r as u,R as U}from"./main-01589982.js";import{s as Y,a as D,o as f,C as M,y as A,u as k,l as be,v as xe,F as ge,p as B,c as he,d as V,z as me,$,k as j,S as X,e as Oe,h as Re,m as W,q as m,r as Se,A as ye}from"./use-owner-4bb5aead.js";import{s as Le,u as we,a as y,x as Te}from"./menu-8d10a083.js";import{h as Ie,s as Pe}from"./dialog-c077491e.js";function Z(e,o){let[t,r]=u.useState(e),i=Y(e);return D(()=>r(i.current),[i,r,...o]),t}function _(e={},o=null,t=[]){for(let[r,i]of Object.entries(e))te(t,ee(o,r),i);return t}function ee(e,o){return e?e+"["+o+"]":o}function te(e,o,t){if(Array.isArray(t))for(let[r,i]of t.entries())te(e,ee(o,r.toString()),i);else t instanceof Date?e.push([o,t.toISOString()]):typeof t=="boolean"?e.push([o,t?"1":"0"]):typeof t=="string"?e.push([o,t]):typeof t=="number"?e.push([o,`${t}`]):t==null?e.push([o,""]):_(t,o,e)}function _e(e){var o;let t=(o=e==null?void 0:e.form)!=null?o:e.closest("form");if(t){for(let r of t.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}function Ce(e,o,t){let[r,i]=u.useState(t),l=e!==void 0,n=u.useRef(l),a=u.useRef(!1),g=u.useRef(!1);return l&&!n.current&&!a.current?(a.current=!0,n.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&n.current&&!g.current&&(g.current=!0,n.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?e:r,f(v=>(l||i(v),o==null?void 0:o(v)))]}var ke=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ke||{}),Ee=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ee||{}),De=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(De||{}),Me=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Me||{});function H(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=ye(o(e.options.slice()),l=>l.dataRef.current.domRef.current),i=t?r.indexOf(t):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let Ae={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let o=e.activeOptionIndex,{isSelected:t}=e.dataRef.current,r=e.options.findIndex(i=>t(i.dataRef.current.value));return r!==-1&&(o=r),{...e,listboxState:0,activeOptionIndex:o}},[2](e,o){var t;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=H(e),i=Te(o,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:i,activationTrigger:(t=o.trigger)!=null?t:1}},[3]:(e,o)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,r=e.searchQuery+o.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(n=>{var a;return!n.dataRef.current.disabled&&((a=n.dataRef.current.textValue)==null?void 0:a.startsWith(r))}),l=i?e.options.indexOf(i):-1;return l===-1||l===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:l,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,o)=>{let t={id:o.id,dataRef:o.dataRef},r=H(e,i=>[...i,t]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(o.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(t)),{...e,...r}},[6]:(e,o)=>{let t=H(e,r=>{let i=r.findIndex(l=>l.id===o.id);return i!==-1&&r.splice(i,1),r});return{...e,...t,activationTrigger:1}},[7]:(e,o)=>({...e,labelId:o.id})},q=u.createContext(null);q.displayName="ListboxActionsContext";function F(e){let o=u.useContext(q);if(o===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,F),t}return o}let K=u.createContext(null);K.displayName="ListboxDataContext";function z(e){let o=u.useContext(K);if(o===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,z),t}return o}function $e(e,o){return k(o.type,Ae,e,o)}let Fe=u.Fragment,ze=M(function(e,o){let{value:t,defaultValue:r,name:i,onChange:l,by:n=(c,p)=>c===p,disabled:a=!1,horizontal:g=!1,multiple:v=!1,...S}=e;const L=g?"horizontal":"vertical";let P=A(o),[O=v?[]:void 0,T]=Ce(t,l,r),[I,d]=u.useReducer($e,{dataRef:u.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),s=u.useRef({static:!1,hold:!1}),b=u.useRef(null),C=u.useRef(null),G=u.useRef(null),h=f(typeof n=="string"?(c,p)=>{let R=n;return(c==null?void 0:c[R])===(p==null?void 0:p[R])}:n),w=u.useCallback(c=>k(x.mode,{[1]:()=>O.some(p=>h(p,c)),[0]:()=>h(O,c)}),[O]),x=u.useMemo(()=>({...I,value:O,disabled:a,mode:v?1:0,orientation:L,compare:h,isSelected:w,optionsPropsRef:s,labelRef:b,buttonRef:C,optionsRef:G}),[O,a,v,I]);D(()=>{I.dataRef.current=x},[x]),be([x.buttonRef,x.optionsRef],(c,p)=>{var R;d({type:1}),xe(p,ge.Loose)||(c.preventDefault(),(R=x.buttonRef.current)==null||R.focus())},x.listboxState===0);let oe=u.useMemo(()=>({open:x.listboxState===0,disabled:a,value:O}),[x,a,O]),ne=f(c=>{let p=x.options.find(R=>R.id===c);!p||E(p.dataRef.current.value)}),re=f(()=>{if(x.activeOptionIndex!==null){let{dataRef:c,id:p}=x.options[x.activeOptionIndex];E(c.current.value),d({type:2,focus:y.Specific,id:p})}}),ie=f(()=>d({type:0})),ae=f(()=>d({type:1})),le=f((c,p,R)=>c===y.Specific?d({type:2,focus:y.Specific,id:p,trigger:R}):d({type:2,focus:c,trigger:R})),se=f((c,p)=>(d({type:5,id:c,dataRef:p}),()=>d({type:6,id:c}))),ue=f(c=>(d({type:7,id:c}),()=>d({type:7,id:null}))),E=f(c=>k(x.mode,{[0](){return T==null?void 0:T(c)},[1](){let p=x.value.slice(),R=p.findIndex(Q=>h(Q,c));return R===-1?p.push(c):p.splice(R,1),T==null?void 0:T(p)}})),ce=f(c=>d({type:3,value:c})),de=f(()=>d({type:4})),pe=u.useMemo(()=>({onChange:E,registerOption:se,registerLabel:ue,goToOption:le,closeListbox:ae,openListbox:ie,selectActiveOption:re,selectOption:ne,search:ce,clearSearch:de}),[]),fe={ref:P},N=u.useRef(null),ve=B();return u.useEffect(()=>{!N.current||r!==void 0&&ve.addEventListener(N.current,"reset",()=>{E(r)})},[N,E]),U.createElement(q.Provider,{value:pe},U.createElement(K.Provider,{value:x},U.createElement(he,{value:k(x.listboxState,{[0]:V.Open,[1]:V.Closed})},i!=null&&O!=null&&_({[i]:O}).map(([c,p],R)=>U.createElement(Ie,{features:Pe.Hidden,ref:R===0?Q=>{var J;N.current=(J=Q==null?void 0:Q.closest("form"))!=null?J:null}:void 0,...me({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:c,value:p})})),$({ourProps:fe,theirProps:S,slot:oe,defaultTag:Fe,name:"Listbox"}))))}),Ne="button",Qe=M(function(e,o){var t;let r=j(),{id:i=`headlessui-listbox-button-${r}`,...l}=e,n=z("Listbox.Button"),a=F("Listbox.Button"),g=A(n.buttonRef,o),v=B(),S=f(d=>{switch(d.key){case m.Space:case m.Enter:case m.ArrowDown:d.preventDefault(),a.openListbox(),v.nextFrame(()=>{n.value||a.goToOption(y.First)});break;case m.ArrowUp:d.preventDefault(),a.openListbox(),v.nextFrame(()=>{n.value||a.goToOption(y.Last)});break}}),L=f(d=>{switch(d.key){case m.Space:d.preventDefault();break}}),P=f(d=>{if(Se(d.currentTarget))return d.preventDefault();n.listboxState===0?(a.closeListbox(),v.nextFrame(()=>{var s;return(s=n.buttonRef.current)==null?void 0:s.focus({preventScroll:!0})})):(d.preventDefault(),a.openListbox())}),O=Z(()=>{if(n.labelId)return[n.labelId,i].join(" ")},[n.labelId,i]),T=u.useMemo(()=>({open:n.listboxState===0,disabled:n.disabled,value:n.value}),[n]),I={ref:g,id:i,type:Le(e,n.buttonRef),"aria-haspopup":"listbox","aria-controls":(t=n.optionsRef.current)==null?void 0:t.id,"aria-expanded":n.disabled?void 0:n.listboxState===0,"aria-labelledby":O,disabled:n.disabled,onKeyDown:S,onKeyUp:L,onClick:P};return $({ourProps:I,theirProps:l,slot:T,defaultTag:Ne,name:"Listbox.Button"})}),Ue="label",Be=M(function(e,o){let t=j(),{id:r=`headlessui-listbox-label-${t}`,...i}=e,l=z("Listbox.Label"),n=F("Listbox.Label"),a=A(l.labelRef,o);D(()=>n.registerLabel(r),[r]);let g=f(()=>{var S;return(S=l.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})}),v=u.useMemo(()=>({open:l.listboxState===0,disabled:l.disabled}),[l]);return $({ourProps:{ref:a,id:r,onClick:g},theirProps:i,slot:v,defaultTag:Ue,name:"Listbox.Label"})}),je="ul",Ge=X.RenderStrategy|X.Static,He=M(function(e,o){var t;let r=j(),{id:i=`headlessui-listbox-options-${r}`,...l}=e,n=z("Listbox.Options"),a=F("Listbox.Options"),g=A(n.optionsRef,o),v=B(),S=B(),L=Oe(),P=(()=>L!==null?L===V.Open:n.listboxState===0)();u.useEffect(()=>{var s;let b=n.optionsRef.current;!b||n.listboxState===0&&b!==((s=Re(b))==null?void 0:s.activeElement)&&b.focus({preventScroll:!0})},[n.listboxState,n.optionsRef]);let O=f(s=>{switch(S.dispose(),s.key){case m.Space:if(n.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),a.search(s.key);case m.Enter:if(s.preventDefault(),s.stopPropagation(),n.activeOptionIndex!==null){let{dataRef:b}=n.options[n.activeOptionIndex];a.onChange(b.current.value)}n.mode===0&&(a.closeListbox(),W().nextFrame(()=>{var b;return(b=n.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})}));break;case k(n.orientation,{vertical:m.ArrowDown,horizontal:m.ArrowRight}):return s.preventDefault(),s.stopPropagation(),a.goToOption(y.Next);case k(n.orientation,{vertical:m.ArrowUp,horizontal:m.ArrowLeft}):return s.preventDefault(),s.stopPropagation(),a.goToOption(y.Previous);case m.Home:case m.PageUp:return s.preventDefault(),s.stopPropagation(),a.goToOption(y.First);case m.End:case m.PageDown:return s.preventDefault(),s.stopPropagation(),a.goToOption(y.Last);case m.Escape:return s.preventDefault(),s.stopPropagation(),a.closeListbox(),v.nextFrame(()=>{var b;return(b=n.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})});case m.Tab:s.preventDefault(),s.stopPropagation();break;default:s.key.length===1&&(a.search(s.key),S.setTimeout(()=>a.clearSearch(),350));break}}),T=Z(()=>{var s,b,C;return(C=(s=n.labelRef.current)==null?void 0:s.id)!=null?C:(b=n.buttonRef.current)==null?void 0:b.id},[n.labelRef.current,n.buttonRef.current]),I=u.useMemo(()=>({open:n.listboxState===0}),[n]),d={"aria-activedescendant":n.activeOptionIndex===null||(t=n.options[n.activeOptionIndex])==null?void 0:t.id,"aria-multiselectable":n.mode===1?!0:void 0,"aria-labelledby":T,"aria-orientation":n.orientation,id:i,onKeyDown:O,role:"listbox",tabIndex:0,ref:g};return $({ourProps:d,theirProps:l,slot:I,defaultTag:je,features:Ge,visible:P,name:"Listbox.Options"})}),Ve="li",We=M(function(e,o){let t=j(),{id:r=`headlessui-listbox-option-${t}`,disabled:i=!1,value:l,...n}=e,a=z("Listbox.Option"),g=F("Listbox.Option"),v=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===r:!1,S=a.isSelected(l),L=u.useRef(null),P=Y({disabled:i,value:l,domRef:L,get textValue(){var h,w;return(w=(h=L.current)==null?void 0:h.textContent)==null?void 0:w.toLowerCase()}}),O=A(o,L);D(()=>{if(a.listboxState!==0||!v||a.activationTrigger===0)return;let h=W();return h.requestAnimationFrame(()=>{var w,x;(x=(w=L.current)==null?void 0:w.scrollIntoView)==null||x.call(w,{block:"nearest"})}),h.dispose},[L,v,a.listboxState,a.activationTrigger,a.activeOptionIndex]),D(()=>g.registerOption(r,P),[P,r]);let T=f(h=>{if(i)return h.preventDefault();g.onChange(l),a.mode===0&&(g.closeListbox(),W().nextFrame(()=>{var w;return(w=a.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})}))}),I=f(()=>{if(i)return g.goToOption(y.Nothing);g.goToOption(y.Specific,r)}),d=we(),s=f(h=>d.update(h)),b=f(h=>{!d.wasMoved(h)||i||v||g.goToOption(y.Specific,r,0)}),C=f(h=>{!d.wasMoved(h)||i||!v||g.goToOption(y.Nothing)}),G=u.useMemo(()=>({active:v,selected:S,disabled:i}),[v,S,i]);return $({ourProps:{id:r,ref:O,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":S,disabled:void 0,onClick:T,onFocus:I,onPointerEnter:s,onMouseEnter:s,onPointerMove:b,onMouseMove:b,onPointerLeave:C,onMouseLeave:C},theirProps:n,slot:G,defaultTag:Ve,name:"Listbox.Option"})}),et=Object.assign(ze,{Button:Qe,Label:Be,Options:He,Option:We});function qe({title:e,titleId:o,...t},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":o},t),e?u.createElement("title",{id:o},e):null,u.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z",clipRule:"evenodd"}))}const Ke=u.forwardRef(qe),tt=Ke;function ot(){const[e,o]=u.useState({width:0,height:0});return u.useEffect(()=>{function t(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),e}export{tt as C,et as M,Ce as T,_e as p,ot as u};
