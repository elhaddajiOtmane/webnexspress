import{R as b,C as y,j as t,a as h,N as e,z as w,D as C,F as S}from"./main-01589982.js";import{B as j}from"./ButtonPrimaryDanger-9c37c9e4.js";import{B as D}from"./ButtonSecondary-a2b42169.js";import{N as x}from"./NcModal-42d0aa76.js";import{B as T}from"./ButtonPrimary-7b9ce8b4.js";import A from"./NcDropDown-b9381a6a.js";import"./Button-d1fff97b.js";import"./twFocusClass-d0735f61.js";import"./ButtonClose-46908ee4.js";import"./transition-c5ae4969.js";import"./use-owner-4bb5aead.js";import"./dialog-c077491e.js";import"./menu-8d10a083.js";const O=({show:p,onCloseModal:s,postDataBaseId:f,isReloadAfterDelete:a=!1,linkReloadAfterDelete:n=window.frontendObject.homeURL})=>{const[r,d]=b.useState(!1),g=y(),u=async()=>{d(!0),await jQuery.ajax({url:window.frontendObject.restUrl+"wp/v2/posts/"+f,method:"DELETE",processData:!1,contentType:!1,beforeSend:function(i){i.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)}}).done(function(i){w.success(e["Post deleted successfully."]),g(C(f)),a&&setTimeout(()=>{window.location.replace(n)},800)}).fail(function(i){var P;const l=((P=i.responseJSON)==null?void 0:P.message)||e.somethingWentWrong;w.error(l)}).always(function(){s(),d(!1)})};return t(x,{renderTrigger:()=>null,isOpenProp:p,renderContent:()=>h("div",{children:[t("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-200",children:e["Delete post"]}),t("span",{className:"text-sm",children:e["Are you sure you want to delete this post? You cannot undo this action."]}),h("div",{className:"mt-4 space-x-3",children:[t(j,{loading:r,onClick:u,type:"submit",disabled:r,children:e["Delete post"]}),t(D,{type:"button",loading:r,onClick:s,disabled:r,children:e.Cancel})]})]}),onCloseModal:s,contentExtraClass:"max-w-screen-sm",modalTitle:""})},v=({show:p,onCloseModal:s,postDataBaseId:f,isReloadAfterDelete:a=!1})=>{const[n,r]=b.useState(!1);y();const d=async()=>{r(!0);const u=new FormData;u.append("status","draft"),await jQuery.ajax({url:window.frontendObject.restUrl+"wp/v2/posts/"+f,method:"POST",data:u,processData:!1,contentType:!1,dataType:"json",beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)}}).done(function(o){w.success(e["Draft post"]+"!"),a&&o.link&&setTimeout(()=>{window.location.replace(o.link)},800)}).fail(function(o){var l;const i=((l=o.responseJSON)==null?void 0:l.message)||e.somethingWentWrong;w.error(i)}).always(function(){s(),r(!1)})};return t(x,{renderTrigger:()=>null,isOpenProp:p,renderContent:()=>h("div",{children:[t("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-200",children:e["Draft post"]}),t("span",{className:"text-sm",children:e["Are you sure you want to draft this post? You cannot undo this action."]}),h("div",{className:"mt-4 space-x-3",children:[t(T,{loading:n,onClick:d,type:"submit",disabled:n,children:e["Draft post"]}),t(D,{type:"button",loading:n,onClick:s,disabled:n,children:e.Cancel})]})]}),onCloseModal:s,contentExtraClass:"max-w-screen-sm",modalTitle:""})},M=({show:p,onCloseModal:s,postDataBaseId:f,isReloadAfterDelete:a=!1})=>{const[n,r]=b.useState(!1);y();const d=async()=>{r(!0);const u=new FormData;u.append("status","publish"),await jQuery.ajax({url:window.frontendObject.restUrl+"wp/v2/posts/"+f,method:"POST",data:u,processData:!1,contentType:!1,beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)}}).done(function(o){w.success(e.Published+"!"),a&&o.link&&setTimeout(()=>{window.location.replace(o.link)},800)}).fail(function(o){var l;const i=((l=o.responseJSON)==null?void 0:l.message)||e.somethingWentWrong;w.error(i)}).always(function(){s(),r(!1)})};return t(x,{renderTrigger:()=>null,isOpenProp:p,renderContent:()=>h("div",{children:[t("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-200",children:e["Publish post"]}),t("span",{className:"text-sm",children:e["Are you sure you want to publish this post? You cannot undo this action."]}),h("div",{className:"mt-4 space-x-3",children:[t(T,{loading:n,onClick:d,type:"submit",disabled:n,children:e["Publish post"]}),t(D,{type:"button",loading:n,onClick:s,disabled:n,children:e.Cancel})]})]}),onCloseModal:s,contentExtraClass:"max-w-screen-sm",modalTitle:""})},Y=({className:p="text-neutral-700 bg-neutral-50 hover:bg-blue-50 hover:text-blue-700 dark:hover:text-blue-700 dark:text-neutral-100 dark:bg-neutral-800 dark:hover:bg-blue-100 transition-colors duration-300 h-7 w-7 sm:h-8 sm:w-8",panelMenusClass:s="w-52 right-0 bottom-0 origin-bottom-right",href:f,postDataBaseId:a,isReloadAfterDelete:n=!1,hasComment:r=!0,data:d,singlePostStatus:g})=>{const[u,o]=b.useState(!1),[i,l]=b.useState(!1),[P,N]=b.useState(!1);let m=[{icon:"las la-edit",id:"edit",name:e["Edit post"],href:frontendObject.pagePostSubmissionEditorUrl+"?pid="+a+"&action=edit"},{icon:"las la-comment-dots",id:"gotocoommment",name:e["Comment this post"],href:`${f}#comment`},{icon:"las la-upload",id:"publish_post",name:e["Publish post"]},{icon:"las la-recycle",id:"draft_post",name:e["Draft post"]},{icon:"las la-trash-alt",id:"delete_post",name:e["Delete post"]}];m=r?m:m.filter(c=>c.id!=="gotocoommment"),frontendObject.currentPageType==="author"&&location.search.includes("tab=Drafts")||g==="draft"?m=m.filter(c=>c.id!=="draft_post"):m=m.filter(c=>c.id!=="publish_post"),d&&(m=d);const k=c=>{if(c.id==="delete_post")return o(!0);if(c.id==="publish_post")return l(!0);if(c.id==="draft_post")return N(!0);console.log("clicked",c)};return h(S,{children:[t(A,{data:m,className:`nc-PostMoreActionDropdown relative rounded-full flex items-center justify-center focus:outline-none ${p}`,panelMenusClass:s,onClickItem:k}),t(O,{show:u,onCloseModal:()=>o(!1),postDataBaseId:a,isReloadAfterDelete:n}),t(M,{show:i,onCloseModal:()=>l(!1),postDataBaseId:a,isReloadAfterDelete:!0}),t(v,{show:P,onCloseModal:()=>N(!1),postDataBaseId:a,isReloadAfterDelete:!0})]})};export{Y as default};
