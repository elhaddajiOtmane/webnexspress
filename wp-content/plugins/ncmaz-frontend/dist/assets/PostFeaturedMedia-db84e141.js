import{r as a,a as x,j as t,N as P,F as z}from"./main-01589982.js";import{N as T}from"./NcImage-befadaec.js";import{N as L}from"./NextPrev-10599e1e.js";import{P as E}from"./PostTypeFeaturedIcon-f1f09999.js";import{u as U}from"./useIntersectionObserver-8d200e88.js";import{R as F}from"./index-b8b43c8a.js";import{B as j}from"./ButtonPlayMusicRunningContainer-80762dbc.js";function A(l,o=300){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>{l.apply(this,n)},o)}}const V=({galleryImgs:l,postLink:o})=>{var g,S;const s=a.useRef(null),n=a.useRef(null),e=a.useRef(null),[u,c]=a.useState(((g=document.querySelector("html"))==null?void 0:g.getAttribute("dir"))==="rtl"),[f,i]=a.useState(((S=document.querySelector("html"))==null?void 0:S.getAttribute("dir"))!=="rtl"),[d,v]=a.useState(0);a.useEffect(()=>{y()},[]);const y=a.useCallback(p,[l]);function p(){var h,N,_;const r=s.current;if(!r)return;const m=((h=r.querySelector("div"))==null?void 0:h.clientWidth)||0,k=()=>{r.scrollTo(r.scrollLeft+m,0)},w=()=>{r.scrollTo(r.scrollLeft-m,0)};(N=n.current)==null||N.addEventListener("click",k),(_=e.current)==null||_.addEventListener("click",w),r.addEventListener("scroll",function(){C()});const C=A(function(){var R;i(!1),c(!1),((R=document.querySelector("html"))==null?void 0:R.getAttribute("dir"))==="rtl"?(v(Math.floor(-r.scrollLeft/m)),r.clientWidth-r.scrollLeft>=r.scrollWidth?i(!0):r.scrollLeft===0&&c(!0)):(v(Math.floor(r.scrollLeft/m)),r.clientWidth+r.scrollLeft>=r.scrollWidth?c(!0):r.scrollLeft===0&&i(!0))},400)}return x("div",{className:"nc-gallerySlider group relative z-10 xl:z-auto w-full h-full",children:[t("div",{className:" h-full gallery_scroller hiddenScrollbar scrollBehaviorSmooth",ref:s,children:l.map((r,m)=>t("a",{href:o,className:"block h-full w-full flex-shrink-0 ",children:t(T,{src:r.sourceUrl,srcSet:r.srcSet,alt:r.altText,containerClassName:"w-full h-full"})},m))}),x("div",{className:"",children:[t("div",{ref:e,className:"nc-gallerySlider__prevBtn absolute opacity-0 group-hover:opacity-100 z-20 left-2 top-1/2 -translate-y-1/2 ",title:P.prev,children:!f&&t(L,{isOfGlide:!1,onlyPrev:!0,btnClassName:"w-8 h-8"})}),t("div",{ref:n,className:"nc-gallerySlider__nextBtn absolute opacity-0 group-hover:opacity-100 z-20 right-2 top-1/2 -translate-y-1/2 ",title:P.next,children:!u&&t(L,{isOfGlide:!1,onlyNext:!0,btnClassName:"w-8 h-8"})})]}),t("div",{className:"absolute w-full left-0 bottom-0 h-6 bg-gradient-to-t from-neutral-800/50"}),t("div",{className:"absolute z-10 bottom-3 left-0 w-full flex items-center justify-center glide__bullets",children:l.map((r,m)=>t("div",{className:`glide__bullet w-[5px] h-[5px] bg-neutral-200 bg-opacity-50 rounded-full mx-0.5 ${m===d?"glide__bullet--active":""}`},m))})]})};var M={};Object.defineProperty(M,"__esModule",{value:!0});var b=a;function H(l,o){o===void 0&&(o=0);var s=b.useRef(!1),n=b.useRef(),e=b.useRef(l),u=b.useCallback(function(){return s.current},[]),c=b.useCallback(function(){s.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){s.current=!0,e.current()},o)},[o]),f=b.useCallback(function(){s.current=null,n.current&&clearTimeout(n.current)},[]);return b.useEffect(function(){e.current=l},[l]),b.useEffect(function(){return c(),f},[o]),[u,f,c]}var O=M.default=H;const B=({videoUrl:l,isHover:o,featuredImage:s,postLink:n})=>{let e=null;const u=a.useRef(null),[c,f]=a.useState(!0),[i,d]=a.useState(!1),[v,y]=a.useState(!1),[,p,g]=O(()=>y(!0),300),S=a.useCallback(()=>{p(),y(!1)},[]),[r,m]=a.useState(0),[k,w]=a.useState(!1);let C=window.matchMedia("only screen and (max-width: 639px)").matches;const h=U(u,{freezeOnceVisible:!1,threshold:.999,rootMargin:"-10px 0px"});a.useEffect(()=>{if(!o)return f(!0),S();g()},[o]),a.useEffect(()=>{if(!h)return;const R=((h==null?void 0:h.intersectionRatio)||-1)>r;w(R),m((h==null?void 0:h.intersectionRatio)||0)},[h]),a.useEffect(()=>{if(i)return e&&clearTimeout(e),e=setTimeout(()=>{d(!1)},2e3),()=>{e&&clearTimeout(e)}},[i]);let N=C?k:v;return frontendObject.switchPreviewVideo===!1&&(N=!1),t("div",{className:"nc-MediaVideo absolute inset-0",ref:u,children:(()=>x("div",{children:[t(F,{url:l,muted:c,className:"absolute bg-black inset-0",playing:N,width:"100%",height:"100%",onStart:()=>{d(()=>!0)},onPause:()=>{d(()=>!1)},light:N?!1:(s==null?void 0:s.node.sourceUrl)||!0,playIcon:t("span",{className:"absolute inset-0 flex items-center justify-center ",children:t(E,{className:"hover:scale-105 transform cursor-pointer transition-transform ",postType:"post-format-video"})})}),t("a",{className:"absolute block inset-0 ",href:n}),t("div",{className:`absolute z-20 bottom-2 left-2 h-6 rounded-full bg-black bg-opacity-70 text-white flex items-center justify-center text-sm transform transition-transform ${N?"opacity-100":"opacity-0 hidden"} ${i?"pl-[6px] pr-2":"w-6 hover:scale-125"}`,onClick:()=>f(!c),children:c?x(z,{children:[t("i",{className:"las la-volume-off"}),i&&t("span",{className:"ml-1 inline-block text-[9px]",children:"Click here to unmute"})]}):t("i",{className:"las la-volume-up"})})]}))()})},G=({post:l})=>{var s,n,e;return x("div",{children:[(()=>l.ncmazAudioUrl.audioUrl?t(j,{className:"absolute bg-neutral-900/20 flex items-center justify-center inset-0",post:l}):t("span",{className:"absolute inset-0 flex items-center justify-center ",children:t(E,{className:"hover:scale-105 transform cursor-pointer transition-transform ",postType:"post-format-audio"})}))(),t("a",{className:"block absolute inset-0 group-hover:opacity-90 transition-opacity",href:l.link,children:t(T,{containerClassName:"absolute inset-0",src:((s=l.featuredImage)==null?void 0:s.node.sourceUrl)||".",srcSet:(n=l.featuredImage)==null?void 0:n.node.srcSet,alt:(e=l.featuredImage)==null?void 0:e.node.altText})})]})};function $(l){const{image1:o,image2:s,image3:n,image4:e,image5:u,image6:c,image7:f,image8:i,image9:d,image10:v}=l;return[o,s,n,e,u,c,f,i,d,v].filter(p=>p&&!!(p!=null&&p.sourceUrl))}const Q=({className:l="w-full h-full",post:o,isHover:s=!1,imageSizes:n})=>{var g,S;const{featuredImage:e,postFormats:u,ncmazVideoUrl:c,ncmazGalleryImgs:f,link:i}=o,d=(S=(g=u==null?void 0:u.edges[0])==null?void 0:g.node)==null?void 0:S.slug,v=()=>{const r=$(f);return r.length?x(a.Fragment,{children:[t(T,{containerClassName:"absolute inset-0",src:"."}),t(V,{galleryImgs:r,postLink:i})]}):t(T,{containerClassName:"absolute inset-0 group-hover:opacity-90 transition-opacity",src:(e==null?void 0:e.node.sourceUrl)||".",srcSet:e==null?void 0:e.node.srcSet,alt:e==null?void 0:e.node.altText,imageSizes:n})},y=()=>d==="post-format-gallery"?v():d==="post-format-video"?t(B,{featuredImage:e,isHover:s,videoUrl:c.videoUrl,postLink:i}):d==="post-format-audio"?t(G,{post:o}):t("a",{href:i,className:"absolute inset-0 group-hover:opacity-90 transition-opacity",children:t(T,{containerClassName:"absolute inset-0",src:(e==null?void 0:e.node.sourceUrl)||".",srcSet:e==null?void 0:e.node.srcSet,alt:e==null?void 0:e.node.altText,imageSizes:n})}),p=d==="Standard"&&e&&e.node.id;return t("div",{className:`nc-PostFeaturedMedia relative ${l} ${p?"standardhasFeaturedImage":"standardnotFeaturedImage"}`,"data-nc-id":"PostFeaturedMedia",children:y()})};export{Q as P,$ as g};
