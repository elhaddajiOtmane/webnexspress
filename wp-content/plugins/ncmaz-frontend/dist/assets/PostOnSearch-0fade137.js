import{R as N,r as E,a as n,j as a,N as u}from"./main-01589982.js";import{c as v}from"./queryGraphql-58383481.js";import{D as T}from"./DataStatementBlockV2-5007f6a0.js";import{a as I,C as O}from"./Card3Small-5803e521.js";import{B as P}from"./ButtonPrimary-7b9ce8b4.js";import{B as A}from"./ButtonSecondary-a2b42169.js";import{b as B,c as j}from"./useQuery-2326dd90.js";import"./contants-3c5f400b.js";import"./contantsCommon-3b0e63b7.js";import"./EmptyState-8d3ff74e.js";import"./NcImage-befadaec.js";import"./getImageSizesBySizeName-22c25ac1.js";import"./index-0c588460.js";import"./PostCardMeta-4fa2bae8.js";import"./Avatar-e46ae567.js";import"./formatDate-dfe39bf7.js";import"./Button-d1fff97b.js";import"./twFocusClass-d0735f61.js";const R=({searchText:x})=>{var c;const y=N.useRef(null),b=N.useRef(null),i=15;let m={},d="";d=v,m={first:i,search:x};const _=B`
    ${d}
  `,{loading:o,error:h,data:s,fetchMore:l}=j(_,{notifyOnNetworkStatusChange:!0,variables:m});E.useEffect(()=>{var r;(r=s==null?void 0:s.posts.pageInfo)==null||r.total},[s]);const t=(s==null?void 0:s.posts.edges)||[],k=(r,{fetchMoreResult:e})=>{var f,g,S;return(f=e==null?void 0:e.posts)!=null&&f.edges.length?{...e,posts:{...e.posts,edges:[...(g=r==null?void 0:r.posts)==null?void 0:g.edges,...(S=e==null?void 0:e.posts)==null?void 0:S.edges]}}:r},C=()=>{if(!l)return;const r=t.map(e=>e.node.postId);l({variables:{first:i,notIn:r},updateQuery:k})},p=o&&!t.length;return n("div",{className:"bg-white dark:bg-neutral-800",children:[n("div",{ref:y,className:"max-h-[70vh] overflow-y-auto border-t border-neutral-200 dark:border-neutral-700",children:[a(T,{className:"my-5 flex justify-center",data:t,error:h,isSkeleton:p}),p||t.length?n("div",{className:"grid grid-cols-1 divide-y divide-neutral-200 dark:divide-neutral-700",children:[t.map(r=>a(I,{className:"p-4 hover:bg-neutral-100 dark:hover:bg-neutral-700",post:r.node},r.node.id)),a("div",{ref:b,className:"hidden"}),o&&Array.from("88888888").map((r,e)=>a(O,{className:"p-4 "},e)),((c=s==null?void 0:s.posts.pageInfo)==null?void 0:c.hasNextPage)&&a("div",{className:"p-4",children:a(P,{className:"inline-flex",sizeClass:"px-4 py-2 sm:py-2.5",fontSize:"text-xs sm:text-sm font-medium",onClick:C,loading:o,children:u.showMeMore})})]}):null]}),a("div",{className:"flex justify-between space-x-1 p-3 sm:p-4 border-t border-neutral-200 dark:border-neutral-700",children:a(A,{className:"ml-auto",sizeClass:"px-4 py-2 sm:py-2.5",fontSize:"text-xs sm:text-sm font-medium",type:"submit",children:u["Go to search page"]})})]})};export{R as default};
