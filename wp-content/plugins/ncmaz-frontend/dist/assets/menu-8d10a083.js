import{r as c,R as O}from"./main-01589982.js";import{a as M,h as H,C as w,S as Q,y as D,l as V,o as g,c as W,u as _,d as C,$ as E,k as L,p as j,n as q,e as Z,m as A,v as J,F as X,q as m,r as Y,w as z,L as U,x as G,A as ee}from"./use-owner-4bb5aead.js";function K(e){var n;if(e.type)return e.type;let t=(n=e.as)!=null?n:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function te(e,n){let[t,a]=c.useState(()=>K(e));return M(()=>{a(K(e))},[e.type,e.as]),M(()=>{t||!n.current||n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&a("button")},[t,n]),t}function re({container:e,accept:n,walk:t,enabled:a=!0}){let o=c.useRef(n),i=c.useRef(t);c.useEffect(()=>{o.current=n,i.current=t},[n,t]),M(()=>{if(!e||!a)return;let u=H(e);if(!u)return;let r=o.current,l=i.current,d=Object.assign(v=>r(v),{acceptNode:r}),I=u.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,d,!1);for(;I.nextNode();)l(I.currentNode)},[e,a,o,i])}function ne(e){throw new Error("Unexpected object: "+e)}var y=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(y||{});function ae(e,n){let t=n.resolveItems();if(t.length<=0)return null;let a=n.resolveActiveIndex(),o=a??-1,i=(()=>{switch(e.focus){case 0:return t.findIndex(u=>!n.resolveDisabled(u));case 1:{let u=t.slice().reverse().findIndex((r,l,d)=>o!==-1&&d.length-l-1>=o?!1:!n.resolveDisabled(r));return u===-1?u:t.length-1-u}case 2:return t.findIndex((u,r)=>r<=o?!1:!n.resolveDisabled(u));case 3:{let u=t.slice().reverse().findIndex(r=>!n.resolveDisabled(r));return u===-1?u:t.length-1-u}case 4:return t.findIndex(u=>n.resolveId(u)===e.id);case 5:return null;default:ne(e)}})();return i===-1?a:i}function B(e){return[e.screenX,e.screenY]}function ue(){let e=c.useRef([-1,-1]);return{wasMoved(n){let t=B(n);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(n){e.current=B(n)}}}var oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oe||{}),se=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(se||{}),ie=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ie||{});function F(e,n=t=>t){let t=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=ee(n(e.items.slice()),i=>i.dataRef.current.domRef.current),o=t?a.indexOf(t):null;return o===-1&&(o=null),{items:a,activeItemIndex:o}}let le={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,n)=>{var t;let a=F(e),o=ae(n,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:o,activationTrigger:(t=n.trigger)!=null?t:1}},[3]:(e,n)=>{let t=e.searchQuery!==""?0:1,a=e.searchQuery+n.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+t).concat(e.items.slice(0,e.activeItemIndex+t)):e.items).find(u=>{var r;return((r=u.dataRef.current.textValue)==null?void 0:r.startsWith(a))&&!u.dataRef.current.disabled}),i=o?e.items.indexOf(o):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:i,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,n)=>{let t=F(e,a=>[...a,{id:n.id,dataRef:n.dataRef}]);return{...e,...t}},[6]:(e,n)=>{let t=F(e,a=>{let o=a.findIndex(i=>i.id===n.id);return o!==-1&&a.splice(o,1),a});return{...e,...t,activationTrigger:1}}},N=c.createContext(null);N.displayName="MenuContext";function k(e){let n=c.useContext(N);if(n===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,k),t}return n}function ce(e,n){return _(n.type,le,e,n)}let de=c.Fragment,fe=w(function(e,n){let t=c.useReducer(ce,{menuState:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:o,buttonRef:i},u]=t,r=D(n);V([i,o],(x,h)=>{var R;u({type:1}),J(h,X.Loose)||(x.preventDefault(),(R=i.current)==null||R.focus())},a===0);let l=g(()=>{u({type:1})}),d=c.useMemo(()=>({open:a===0,close:l}),[a,l]),I=e,v={ref:r};return O.createElement(N.Provider,{value:t},O.createElement(W,{value:_(a,{[0]:C.Open,[1]:C.Closed})},E({ourProps:v,theirProps:I,slot:d,defaultTag:de,name:"Menu"})))}),pe="button",me=w(function(e,n){var t;let a=L(),{id:o=`headlessui-menu-button-${a}`,...i}=e,[u,r]=k("Menu.Button"),l=D(u.buttonRef,n),d=j(),I=g(f=>{switch(f.key){case m.Space:case m.Enter:case m.ArrowDown:f.preventDefault(),f.stopPropagation(),r({type:0}),d.nextFrame(()=>r({type:2,focus:y.First}));break;case m.ArrowUp:f.preventDefault(),f.stopPropagation(),r({type:0}),d.nextFrame(()=>r({type:2,focus:y.Last}));break}}),v=g(f=>{switch(f.key){case m.Space:f.preventDefault();break}}),x=g(f=>{if(Y(f.currentTarget))return f.preventDefault();e.disabled||(u.menuState===0?(r({type:1}),d.nextFrame(()=>{var S;return(S=u.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})})):(f.preventDefault(),r({type:0})))}),h=c.useMemo(()=>({open:u.menuState===0}),[u]),R={ref:l,id:o,type:te(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(t=u.itemsRef.current)==null?void 0:t.id,"aria-expanded":e.disabled?void 0:u.menuState===0,onKeyDown:I,onKeyUp:v,onClick:x};return E({ourProps:R,theirProps:i,slot:h,defaultTag:pe,name:"Menu.Button"})}),ve="div",Ie=Q.RenderStrategy|Q.Static,ge=w(function(e,n){var t,a;let o=L(),{id:i=`headlessui-menu-items-${o}`,...u}=e,[r,l]=k("Menu.Items"),d=D(r.itemsRef,n),I=q(r.itemsRef),v=j(),x=Z(),h=(()=>x!==null?x===C.Open:r.menuState===0)();c.useEffect(()=>{let s=r.itemsRef.current;!s||r.menuState===0&&s!==(I==null?void 0:I.activeElement)&&s.focus({preventScroll:!0})},[r.menuState,r.itemsRef,I]),re({container:r.itemsRef.current,enabled:r.menuState===0,accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let R=g(s=>{var T,p;switch(v.dispose(),s.key){case m.Space:if(r.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),l({type:3,value:s.key});case m.Enter:if(s.preventDefault(),s.stopPropagation(),l({type:1}),r.activeItemIndex!==null){let{dataRef:b}=r.items[r.activeItemIndex];(p=(T=b.current)==null?void 0:T.domRef.current)==null||p.click()}G(r.buttonRef.current);break;case m.ArrowDown:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:y.Next});case m.ArrowUp:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:y.Previous});case m.Home:case m.PageUp:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:y.First});case m.End:case m.PageDown:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:y.Last});case m.Escape:s.preventDefault(),s.stopPropagation(),l({type:1}),A().nextFrame(()=>{var b;return(b=r.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})});break;case m.Tab:s.preventDefault(),s.stopPropagation(),l({type:1}),A().nextFrame(()=>{z(r.buttonRef.current,s.shiftKey?U.Previous:U.Next)});break;default:s.key.length===1&&(l({type:3,value:s.key}),v.setTimeout(()=>l({type:4}),350));break}}),f=g(s=>{switch(s.key){case m.Space:s.preventDefault();break}}),S=c.useMemo(()=>({open:r.menuState===0}),[r]),P={"aria-activedescendant":r.activeItemIndex===null||(t=r.items[r.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(a=r.buttonRef.current)==null?void 0:a.id,id:i,onKeyDown:R,onKeyUp:f,role:"menu",tabIndex:0,ref:d};return E({ourProps:P,theirProps:u,slot:S,defaultTag:ve,features:Ie,visible:h,name:"Menu.Items"})}),be=c.Fragment,ye=w(function(e,n){let t=L(),{id:a=`headlessui-menu-item-${t}`,disabled:o=!1,...i}=e,[u,r]=k("Menu.Item"),l=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===a:!1,d=c.useRef(null),I=D(n,d);M(()=>{if(u.menuState!==0||!l||u.activationTrigger===0)return;let p=A();return p.requestAnimationFrame(()=>{var b,$;($=(b=d.current)==null?void 0:b.scrollIntoView)==null||$.call(b,{block:"nearest"})}),p.dispose},[d,l,u.menuState,u.activationTrigger,u.activeItemIndex]);let v=c.useRef({disabled:o,domRef:d});M(()=>{v.current.disabled=o},[v,o]),M(()=>{var p,b;v.current.textValue=(b=(p=d.current)==null?void 0:p.textContent)==null?void 0:b.toLowerCase()},[v,d]),M(()=>(r({type:5,id:a,dataRef:v}),()=>r({type:6,id:a})),[v,a]);let x=g(()=>{r({type:1})}),h=g(p=>{if(o)return p.preventDefault();r({type:1}),G(u.buttonRef.current)}),R=g(()=>{if(o)return r({type:2,focus:y.Nothing});r({type:2,focus:y.Specific,id:a})}),f=ue(),S=g(p=>f.update(p)),P=g(p=>{!f.wasMoved(p)||o||l||r({type:2,focus:y.Specific,id:a,trigger:0})}),s=g(p=>{!f.wasMoved(p)||o||!l||r({type:2,focus:y.Nothing})}),T=c.useMemo(()=>({active:l,disabled:o,close:x}),[l,o,x]);return E({ourProps:{id:a,ref:I,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:R,onPointerEnter:S,onMouseEnter:S,onPointerMove:P,onMouseMove:P,onPointerLeave:s,onMouseLeave:s},theirProps:i,slot:T,defaultTag:be,name:"Menu.Item"})}),he=Object.assign(fe,{Button:me,Items:ge,Item:ye});export{he as Z,y as a,te as s,ue as u,ae as x};
