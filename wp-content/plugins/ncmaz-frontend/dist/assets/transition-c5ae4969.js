import{r as i,R as E}from"./main-01589982.js";import{u as g,m as K,f as Q,p as W,s as x,a as X,S as ce,C as _,y as Y,j as S,b as Z,o as F,c as de,d as H,$ as ee,e as te}from"./use-owner-4bb5aead.js";function fe(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function I(t,...e){t&&e.length>0&&t.classList.add(...e)}function V(t,...e){t&&e.length>0&&t.classList.remove(...e)}function ve(t,e){let n=K();if(!t)return n.dispose;let{transitionDuration:l,transitionDelay:d}=getComputedStyle(t),[p,f]=[l,d].map(o=>{let[u=0]=o.split(",").filter(Boolean).map(s=>s.includes("ms")?parseFloat(s):parseFloat(s)*1e3).sort((s,h)=>h-s);return u});if(p+f!==0){let o=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),o())})}else e();return n.add(()=>e()),n.dispose}function me(t,e,n,l){let d=n?"enter":"leave",p=K(),f=l!==void 0?fe(l):()=>{};d==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let o=g(d,{enter:()=>e.enter,leave:()=>e.leave}),u=g(d,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),s=g(d,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return V(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),I(t,...o,...s),p.nextFrame(()=>{V(t,...s),I(t,...u),ve(t,()=>(V(t,...o),I(t,...e.entered),f()))}),p.dispose}function he({container:t,direction:e,classes:n,onStart:l,onStop:d}){let p=Q(),f=W(),o=x(e);X(()=>{let u=K();f.add(u.dispose);let s=t.current;if(s&&o.current!=="idle"&&p.current)return u.dispose(),l.current(o.current),u.add(me(s,n.current,o.current==="enter",()=>{u.dispose(),d.current(o.current)})),u.dispose},[e])}function pe(...t){return t.filter(Boolean).join(" ")}function C(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let A=i.createContext(null);A.displayName="TransitionContext";var be=(t=>(t.Visible="visible",t.Hidden="hidden",t))(be||{});function Ee(){let t=i.useContext(A);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function ge(){let t=i.useContext(M);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let M=i.createContext(null);M.displayName="NestingContext";function N(t){return"children"in t?N(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function re(t,e){let n=x(t),l=i.useRef([]),d=Q(),p=W(),f=F((c,r=S.Hidden)=>{let v=l.current.findIndex(({el:a})=>a===c);v!==-1&&(g(r,{[S.Unmount](){l.current.splice(v,1)},[S.Hidden](){l.current[v].state="hidden"}}),p.microTask(()=>{var a;!N(l)&&d.current&&((a=n.current)==null||a.call(n))}))}),o=F(c=>{let r=l.current.find(({el:v})=>v===c);return r?r.state!=="visible"&&(r.state="visible"):l.current.push({el:c,state:"visible"}),()=>f(c,S.Unmount)}),u=i.useRef([]),s=i.useRef(Promise.resolve()),h=i.useRef({enter:[],leave:[],idle:[]}),T=F((c,r,v)=>{u.current.splice(0),e&&(e.chains.current[r]=e.chains.current[r].filter(([a])=>a!==c)),e==null||e.chains.current[r].push([c,new Promise(a=>{u.current.push(a)})]),e==null||e.chains.current[r].push([c,new Promise(a=>{Promise.all(h.current[r].map(([m,b])=>b)).then(()=>a())})]),r==="enter"?s.current=s.current.then(()=>e==null?void 0:e.wait.current).then(()=>v(r)):v(r)}),w=F((c,r,v)=>{Promise.all(h.current[r].splice(0).map(([a,m])=>m)).then(()=>{var a;(a=u.current.shift())==null||a()}).then(()=>v(r))});return i.useMemo(()=>({children:l,register:o,unregister:f,onStart:T,onStop:w,wait:s,chains:h}),[o,f,l,T,w,h,s])}function Te(){}let we=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function z(t){var e;let n={};for(let l of we)n[l]=(e=t[l])!=null?e:Te;return n}function Re(t){let e=i.useRef(z(t));return i.useEffect(()=>{e.current=z(t)},[t]),e}let $e="div",ne=ce.RenderStrategy,ie=_(function(t,e){let{beforeEnter:n,afterEnter:l,beforeLeave:d,afterLeave:p,enter:f,enterFrom:o,enterTo:u,entered:s,leave:h,leaveFrom:T,leaveTo:w,...c}=t,r=i.useRef(null),v=Y(r,e),a=c.unmount?S.Unmount:S.Hidden,{show:m,appear:b,initial:le}=Ee(),[R,j]=i.useState(m?"visible":"hidden"),q=ge(),{register:P,unregister:y}=q,B=i.useRef(null);i.useEffect(()=>P(r),[P,r]),i.useEffect(()=>{if(a===S.Hidden&&r.current){if(m&&R!=="visible"){j("visible");return}return g(R,{hidden:()=>y(r),visible:()=>P(r)})}},[R,r,P,y,m,a]);let O=x({enter:C(f),enterFrom:C(o),enterTo:C(u),entered:C(s),leave:C(h),leaveFrom:C(T),leaveTo:C(w)}),L=Re({beforeEnter:n,afterEnter:l,beforeLeave:d,afterLeave:p}),U=Z();i.useEffect(()=>{if(U&&R==="visible"&&r.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[r,R,U]);let J=le&&!b,ue=(()=>!U||J||B.current===m?"idle":m?"enter":"leave")(),ae=F($=>g($,{enter:()=>L.current.beforeEnter(),leave:()=>L.current.beforeLeave(),idle:()=>{}})),se=F($=>g($,{enter:()=>L.current.afterEnter(),leave:()=>L.current.afterLeave(),idle:()=>{}})),D=re(()=>{j("hidden"),y(r)},q);he({container:r,classes:O,direction:ue,onStart:x($=>{D.onStart(r,$,ae)}),onStop:x($=>{D.onStop(r,$,se),$==="leave"&&!N(D)&&(j("hidden"),y(r))})}),i.useEffect(()=>{!J||(a===S.Hidden?B.current=null:B.current=m)},[m,J,R]);let k=c,oe={ref:v};return b&&m&&(typeof window>"u"||typeof document>"u")&&(k={...k,className:pe(c.className,...O.current.enter,...O.current.enterFrom)}),E.createElement(M.Provider,{value:D},E.createElement(de,{value:g(R,{visible:H.Open,hidden:H.Closed})},ee({ourProps:oe,theirProps:k,defaultTag:$e,features:ne,visible:R==="visible",name:"Transition.Child"})))}),G=_(function(t,e){let{show:n,appear:l=!1,unmount:d,...p}=t,f=i.useRef(null),o=Y(f,e);Z();let u=te();if(n===void 0&&u!==null&&(n=g(u,{[H.Open]:!0,[H.Closed]:!1})),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[s,h]=i.useState(n?"visible":"hidden"),T=re(()=>{h("hidden")}),[w,c]=i.useState(!0),r=i.useRef([n]);X(()=>{w!==!1&&r.current[r.current.length-1]!==n&&(r.current.push(n),c(!1))},[r,n]);let v=i.useMemo(()=>({show:n,appear:l,initial:w}),[n,l,w]);i.useEffect(()=>{if(n)h("visible");else if(!N(T))h("hidden");else{let m=f.current;if(!m)return;let b=m.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&h("hidden")}},[n,T]);let a={unmount:d};return E.createElement(M.Provider,{value:T},E.createElement(A.Provider,{value:v},ee({ourProps:{...a,as:i.Fragment,children:E.createElement(ie,{ref:o,...a,...p})},theirProps:{},defaultTag:i.Fragment,features:ne,visible:s==="visible",name:"Transition"})))}),Se=_(function(t,e){let n=i.useContext(A)!==null,l=te()!==null;return E.createElement(E.Fragment,null,!n&&l?E.createElement(G,{ref:e,...t}):E.createElement(ie,{ref:e,...t}))}),xe=Object.assign(G,{Child:Se,Root:G});export{xe as J};
